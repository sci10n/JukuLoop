import{s as ht,n as lt,b as ft,o as pt,r as _t}from"../chunks/scheduler.BvLojk_z.js";import{S as gt,i as vt,e as S,s as U,c as w,m as Y,h as H,d as J,g as F,n as T,j as L,k as d,o as q,p as it,q as $,r as rt,b as V,f as W,l as X}from"../chunks/index.BORNZebv.js";import{e as G,t as mt}from"../chunks/index.BS81UHqu.js";import{w as bt}from"../chunks/index.BGTSHx9J.js";function Z(t){const n=/([\u3400-\u9FAF]+)[(（](.+?)[)）]|([^\u3400-\u9FAF]+)/g;let s=[],l=[],e;for(;(e=n.exec(t))!==null;)e[1]&&e[2]?(s.push(e[1]),l.push(e[2])):e[3]&&(s.push(e[3]),l.push(""));return{reading:s,furigana:l}}const St="東京(とうきょう)は日本(にほん)の首都(しゅと)です。",wt="私（わたし）は日本語（にほんご）を話（はな）します";console.log(Z(St));console.log(Z(wt));function at(t,n,s){const l=t.slice();return l[20]=n[s],l[21]=n,l[22]=s,l}function st(t,n,s){const l=t.slice();return l[23]=n[s],l[25]=s,l}function Tt(t){let n=t[23]+"",s;return{c(){s=V(n)},l(l){s=W(l,n)},m(l,e){L(l,s,e)},p(l,e){e&1&&n!==(n=l[23]+"")&&X(s,n)},d(l){l&&F(s)}}}function Ft(t){let n,s=t[23]+"",l,e,a,m=t[20].furigana[t[25]]+"",E,_;return{c(){n=S("ruby"),l=V(s),e=U(),a=S("rt"),E=V(m),_=U(),this.h()},l(g){n=w(g,"RUBY",{class:!0});var i=J(n);l=W(i,s),e=H(i),a=w(i,"RT",{});var h=J(a);E=W(h,m),h.forEach(F),_=H(i),i.forEach(F),this.h()},h(){T(n,"class","svelte-18lxgvr")},m(g,i){L(g,n,i),d(n,l),d(n,e),d(n,a),d(a,E),d(n,_)},p(g,i){i&1&&s!==(s=g[23]+"")&&X(l,s),i&1&&m!==(m=g[20].furigana[g[25]]+"")&&X(E,m)},d(g){g&&F(n)}}}function ut(t){let n;function s(a,m){return a[20].furigana[a[25]]?Ft:Tt}let l=s(t),e=l(t);return{c(){e.c(),n=rt()},l(a){e.l(a),n=rt()},m(a,m){e.m(a,m),L(a,n,m)},p(a,m){l===(l=s(a))&&e?e.p(a,m):(e.d(1),e=l(a),e&&(e.c(),e.m(n.parentNode,n)))},d(a){a&&F(n),e.d(a)}}}function ot(t){let n,s,l,e,a,m,E,_,g,i,h,M,B,C,D,f,u,y="Delete",p,A,R=G(t[20].reading),k=[];for(let c=0;c<R.length;c+=1)k[c]=ut(st(t,R,c));function r(){t[8].call(a,t[21],t[22])}function o(...c){return t[9](t[20],...c)}function N(...c){return t[10](t[20],...c)}function O(){t[11].call(_,t[21],t[22])}function I(...c){return t[12](t[20],...c)}function j(){t[13].call(h,t[21],t[22])}function P(...c){return t[14](t[20],...c)}function K(){t[15].call(C,t[21],t[22])}function ct(...c){return t[16](t[20],...c)}function dt(){return t[17](t[20])}return{c(){n=S("tr"),s=S("td");for(let c=0;c<k.length;c+=1)k[c].c();l=U(),e=S("td"),a=S("input"),m=U(),E=S("td"),_=S("input"),g=U(),i=S("td"),h=S("input"),M=U(),B=S("td"),C=S("input"),D=U(),f=S("td"),u=S("button"),u.textContent=y,this.h()},l(c){n=w(c,"TR",{});var v=J(n);s=w(v,"TD",{class:!0});var b=J(s);for(let Q=0;Q<k.length;Q+=1)k[Q].l(b);b.forEach(F),l=H(v),e=w(v,"TD",{class:!0});var z=J(e);a=w(z,"INPUT",{type:!0,class:!0}),z.forEach(F),m=H(v),E=w(v,"TD",{class:!0});var x=J(E);_=w(x,"INPUT",{type:!0,class:!0}),x.forEach(F),g=H(v),i=w(v,"TD",{class:!0});var tt=J(i);h=w(tt,"INPUT",{type:!0,class:!0}),tt.forEach(F),M=H(v),B=w(v,"TD",{class:!0});var et=J(B);C=w(et,"INPUT",{type:!0,class:!0}),et.forEach(F),D=H(v),f=w(v,"TD",{class:!0});var nt=J(f);u=w(nt,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(u)!=="svelte-qy7xxg"&&(u.textContent=y),nt.forEach(F),v.forEach(F),this.h()},h(){T(s,"class","reading svelte-18lxgvr"),T(a,"type","text"),T(a,"class","svelte-18lxgvr"),T(e,"class","svelte-18lxgvr"),T(_,"type","text"),T(_,"class","svelte-18lxgvr"),T(E,"class","svelte-18lxgvr"),T(h,"type","text"),T(h,"class","svelte-18lxgvr"),T(i,"class","svelte-18lxgvr"),T(C,"type","text"),T(C,"class","svelte-18lxgvr"),T(B,"class","svelte-18lxgvr"),T(u,"class","svelte-18lxgvr"),T(f,"class","svelte-18lxgvr")},m(c,v){L(c,n,v),d(n,s);for(let b=0;b<k.length;b+=1)k[b]&&k[b].m(s,null);d(n,l),d(n,e),d(e,a),$(a,t[20].raw),d(n,m),d(n,E),d(E,_),$(_,t[20].translation),d(n,g),d(n,i),d(i,h),$(h,t[20].note),d(n,M),d(n,B),d(B,C),$(C,t[20].hint),d(n,D),d(n,f),d(f,u),p||(A=[q(a,"input",r),q(a,"input",o),q(a,"blur",N),q(_,"input",O),q(_,"blur",I),q(h,"input",j),q(h,"blur",P),q(C,"input",K),q(C,"blur",ct),q(u,"click",dt)],p=!0)},p(c,v){if(t=c,v&1){R=G(t[20].reading);let b;for(b=0;b<R.length;b+=1){const z=st(t,R,b);k[b]?k[b].p(z,v):(k[b]=ut(z),k[b].c(),k[b].m(s,null))}for(;b<k.length;b+=1)k[b].d(1);k.length=R.length}v&1&&a.value!==t[20].raw&&$(a,t[20].raw),v&1&&_.value!==t[20].translation&&$(_,t[20].translation),v&1&&h.value!==t[20].note&&$(h,t[20].note),v&1&&C.value!==t[20].hint&&$(C,t[20].hint)},d(c){c&&F(n),it(k,c),p=!1,_t(A)}}}function yt(t){let n,s="Stored Sentences",l,e,a,m='<td class="centered svelte-18lxgvr"><h3>Formatted Sentence</h3></td> <td class="svelte-18lxgvr"><h3>Raw Sentence (with Furigana)</h3></td> <td class="svelte-18lxgvr"><h3>English Translation</h3></td> <td class="svelte-18lxgvr"><h3>Additional Notes</h3></td> <td class="svelte-18lxgvr"><h3>Hint for Sentence</h3></td> <td class="svelte-18lxgvr"><h3>Actions</h3></td>',E,_,g,i,h,M="Add",B,C,D=G(t[0]),f=[];for(let u=0;u<D.length;u+=1)f[u]=ot(at(t,D,u));return{c(){n=S("h2"),n.textContent=s,l=U(),e=S("table"),a=S("tr"),a.innerHTML=m,E=U();for(let u=0;u<f.length;u+=1)f[u].c();_=U(),g=S("tr"),i=S("td"),h=S("button"),h.textContent=M,this.h()},l(u){n=w(u,"H2",{"data-svelte-h":!0}),Y(n)!=="svelte-1j8t86n"&&(n.textContent=s),l=H(u),e=w(u,"TABLE",{class:!0});var y=J(e);a=w(y,"TR",{"data-svelte-h":!0}),Y(a)!=="svelte-y8eq10"&&(a.innerHTML=m),E=H(y);for(let R=0;R<f.length;R+=1)f[R].l(y);_=H(y),g=w(y,"TR",{});var p=J(g);i=w(p,"TD",{class:!0});var A=J(i);h=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(h)!=="svelte-mbqzgr"&&(h.textContent=M),A.forEach(F),p.forEach(F),y.forEach(F),this.h()},h(){T(h,"class","svelte-18lxgvr"),T(i,"class","svelte-18lxgvr"),T(e,"class","svelte-18lxgvr")},m(u,y){L(u,n,y),L(u,l,y),L(u,e,y),d(e,a),d(e,E);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(e,null);d(e,_),d(e,g),d(g,i),d(i,h),B||(C=q(h,"click",t[2]),B=!0)},p(u,[y]){if(y&251){D=G(u[0]);let p;for(p=0;p<D.length;p+=1){const A=at(u,D,p);f[p]?f[p].p(A,y):(f[p]=ot(A),f[p].c(),f[p].m(e,_))}for(;p<f.length;p+=1)f[p].d(1);f.length=D.length}},i:lt,o:lt,d(u){u&&(F(n),F(l),F(e)),it(f,u),B=!1,C()}}}function kt(t,n,s){let l,e=bt([]);ft(t,e,r=>s(0,l=r));const a=r=>mt(r,{IMEMode:!0}),m=r=>r.replace(/[\s.,\/#!$%\^&\*;:{}=\-_`~\u3000-\u303f]/g,""),E=()=>{e.update(r=>{const o={raw:"私（わたし）は学生（がくせい）です",reading:["私","は","学生","です"],furigana:["わたし","","がくせい",""],translation:"I am a student",note:"This is a note and will be shown with the answer.",hint:"This is a hint and will be shown with the question."},N=[...r,o];return localStorage.setItem("sentences",JSON.stringify(N)),N})};function _(r,o){const N=m(o),O=Z(N);e.update(I=>{const j=I.map(P=>P.raw===r?(console.log(O),{...P,raw:N,reading:O.reading,furigana:O.furigana}):P);return localStorage.setItem("sentences",JSON.stringify(j)),j})}const g=(r,o)=>{e.update(N=>{const O=N.map(I=>I.raw===r?{...I,translation:o}:I);return localStorage.setItem("sentences",JSON.stringify(O)),O})},i=(r,o)=>{e.update(N=>{const O=N.map(I=>I.raw===r?{...I,note:o}:I);return localStorage.setItem("sentences",JSON.stringify(O)),O})},h=(r,o)=>{e.update(N=>{const O=N.map(I=>I.raw===r?{...I,updateHint:o}:I);return localStorage.setItem("sentences",JSON.stringify(O)),O})},M=(r,o)=>{const N=r.target.selectionStart,O=r.target.selectionEnd,I=a(r.target.value);e.update(j=>{const P=j.map(K=>K.raw===o?{...K,raw:I}:K);return localStorage.setItem("sentences",JSON.stringify(P)),P}),r.target.focus(),requestAnimationFrame(()=>{r.target.setSelectionRange(N,O)})};pt(()=>{const r=localStorage.getItem("sentences");r&&e.set(JSON.parse(r))});function B(r,o){r[o].raw=this.value,e.set(l)}const C=(r,o)=>M(o,r.raw),D=(r,o)=>_(r.raw,o.target.value);function f(r,o){r[o].translation=this.value,e.set(l)}const u=(r,o)=>g(r.raw,o.target.value);function y(r,o){r[o].note=this.value,e.set(l)}const p=(r,o)=>i(r.raw,o.target.value);function A(r,o){r[o].hint=this.value,e.set(l)}return[l,e,E,_,g,i,h,M,B,C,D,f,u,y,p,A,(r,o)=>h(r.raw,o.target.value),r=>{e.update(o=>o.filter(N=>N.raw!==r.raw)),localStorage.setItem("sentences",JSON.stringify(l))}]}class Ot extends gt{constructor(n){super(),vt(this,n,kt,yt,ht,{})}}export{Ot as component};
