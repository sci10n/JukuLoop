import{s as me,e as p,t as F,d as m,f as q,h as Y,i as g,w as je,k as J,l as c,m as le,n as ue,v as D,S as Le,b as N,j as L,T as te,U as G,V as z,C as Be,r as et,E as lt,W as He,X as at,Y as rt,x as Ee,Z as De}from"../chunks/scheduler.CKvUs9I6.js";import{S as be,i as we,g as fe,a as X,c as he,t as $,b as ae,d as re,m as ie,e as oe,f as Te}from"../chunks/index.bg1NXnqI.js";import{s as Ne,a as Pe,S as it,e as pe,N as Ve,u as tt,o as ot,C as st,g as Ce,d as ct,b as nt,c as dt,p as ut,f as ft,h as ht}from"../chunks/crud.bNxi_p4L.js";import{b as _t}from"../chunks/paths.sBXEDIkB.js";function vt(a){let e,t=Ne(a[0])+"",l;return{c(){e=p("p"),l=F(t),this.h()},l(i){e=m(i,"P",{style:!0});var s=q(e);l=Y(s,t),s.forEach(g),this.h()},h(){je(e,"color",Pe(a[0]))},m(i,s){J(i,e,s),c(e,l)},p(i,[s]){s&1&&t!==(t=Ne(i[0])+"")&&le(l,t),s&1&&je(e,"color",Pe(i[0]))},i:ue,o:ue,d(i){i&&g(e)}}}function gt(a,e,t){let{stage:l}=e,{srs:i}=e;return a.$$set=s=>{"stage"in s&&t(0,l=s.stage),"srs"in s&&t(1,i=s.srs)},[l,i]}class kt extends be{constructor(e){super(),we(this,e,gt,vt,me,{stage:0,srs:1})}}function Xe(a,e,t){const l=a.slice();return l[12]=e[t],l}function pt(a){let e,t,l,i,s,n,o,r='<tr><th class="svelte-eaqrys">Translation</th> <th class="svelte-eaqrys">Sentence</th> <th class="svelte-eaqrys">Notes</th> <th class="svelte-eaqrys">Hint</th> <th class="svelte-eaqrys">Stage</th> <th class="svelte-eaqrys">Review</th> <th class="svelte-eaqrys">Actions</th></tr>',d,h,f=[],C=new Map,S,T,w="Add Sentence",A,R,b,k,_,v=pe(a[3]);const j=u=>u[12].id;for(let u=0;u<v.length;u+=1){let E=Xe(a,v,u),M=j(E);C.set(M,f[u]=Ye(M,E))}return R=new Ve({props:{view:[{to:"cancel",label:"Cancel",active:!0},{to:"save",label:"Save",active:!0}]}}),R.$on("navigate",a[11]),{c(){e=p("div"),t=p("input"),l=N(),i=p("textarea"),s=N(),n=p("table"),o=p("thead"),o.innerHTML=r,d=N(),h=p("tbody");for(let u=0;u<f.length;u+=1)f[u].c();S=N(),T=p("button"),T.textContent=w,A=N(),ae(R.$$.fragment),this.h()},l(u){e=m(u,"DIV",{class:!0});var E=q(e);t=m(E,"INPUT",{placeholder:!0,class:!0}),l=L(E),i=m(E,"TEXTAREA",{placeholder:!0,class:!0}),q(i).forEach(g),E.forEach(g),s=L(u),n=m(u,"TABLE",{class:!0});var M=q(n);o=m(M,"THEAD",{"data-svelte-h":!0}),te(o)!=="svelte-8zpm6h"&&(o.innerHTML=r),d=L(M),h=m(M,"TBODY",{});var U=q(h);for(let I=0;I<f.length;I+=1)f[I].l(U);U.forEach(g),M.forEach(g),S=L(u),T=m(u,"BUTTON",{class:!0,"data-svelte-h":!0}),te(T)!=="svelte-1f1ee0k"&&(T.textContent=w),A=L(u),re(R.$$.fragment,u),this.h()},h(){D(t,"placeholder","Deck Name"),D(t,"class","svelte-eaqrys"),D(i,"placeholder","Deck Description"),D(i,"class","svelte-eaqrys"),D(e,"class","deck-info svelte-eaqrys"),D(n,"class","sentence-table svelte-eaqrys"),D(T,"class","primary add-sentence svelte-eaqrys")},m(u,E){J(u,e,E),c(e,t),G(t,a[1]),c(e,l),c(e,i),G(i,a[2]),J(u,s,E),J(u,n,E),c(n,o),c(n,d),c(n,h);for(let M=0;M<f.length;M+=1)f[M]&&f[M].m(h,null);J(u,S,E),J(u,T,E),J(u,A,E),ie(R,u,E),b=!0,k||(_=[z(t,"input",a[8]),z(i,"input",a[9]),z(T,"click",a[6])],k=!0)},p(u,E){E&2&&t.value!==u[1]&&G(t,u[1]),E&4&&G(i,u[2]),E&25&&(v=pe(u[3]),fe(),f=tt(f,E,j,1,u,v,C,h,ot,Ye,null,Xe),he())},i(u){if(!b){for(let E=0;E<v.length;E+=1)$(f[E]);$(R.$$.fragment,u),b=!0}},o(u){for(let E=0;E<f.length;E+=1)X(f[E]);X(R.$$.fragment,u),b=!1},d(u){u&&(g(e),g(s),g(n),g(S),g(T),g(A));for(let E=0;E<f.length;E+=1)f[E].d();oe(R,u),k=!1,Be(_)}}}function mt(a){let e,t="Deck not found";return{c(){e=p("p"),e.textContent=t},l(l){e=m(l,"P",{"data-svelte-h":!0}),te(e)!=="svelte-vs2gpw"&&(e.textContent=t)},m(l,i){J(l,e,i)},p:ue,i:ue,o:ue,d(l){l&&g(e)}}}function ze(a){let e,t;return e=new kt({props:{stage:a[12].srs.stage,srs:a[12].srs}}),{c(){ae(e.$$.fragment)},l(l){re(e.$$.fragment,l)},m(l,i){ie(e,l,i),t=!0},p(l,i){const s={};i&8&&(s.stage=l[12].srs.stage),i&8&&(s.srs=l[12].srs),e.$set(s)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){X(e.$$.fragment,l),t=!1},d(l){oe(e,l)}}}function Fe(a){let e=Ce(a[12].srs)+"",t;return{c(){t=F(e)},l(l){t=Y(l,e)},m(l,i){J(l,t,i)},p(l,i){i&8&&e!==(e=Ce(l[12].srs)+"")&&le(t,e)},d(l){l&&g(t)}}}function Ye(a,e){let t,l,i=e[12].translation+"",s,n,o,r,d,h,f=e[12].note+"",C,S,T,w=e[12].hint+"",A,R,b,k,_,v,j,u,E="Edit",M,U,I,W;r=new st({props:{readings:e[12].reading,furigana:e[12].furigana,colors:e[12].optional.map(Je)}});let V=e[12].srs&&ze(e),O=e[12].srs&&Fe(e);function _e(){return e[10](e[12])}return{key:a,first:null,c(){t=p("tr"),l=p("td"),s=F(i),n=N(),o=p("td"),ae(r.$$.fragment),d=N(),h=p("td"),C=F(f),S=N(),T=p("td"),A=F(w),R=N(),b=p("td"),V&&V.c(),k=N(),_=p("td"),O&&O.c(),v=N(),j=p("td"),u=p("button"),u.textContent=E,M=N(),this.h()},l(H){t=m(H,"TR",{});var B=q(t);l=m(B,"TD",{class:!0});var Q=q(l);s=Y(Q,i),Q.forEach(g),n=L(B),o=m(B,"TD",{class:!0});var se=q(o);re(r.$$.fragment,se),se.forEach(g),d=L(B),h=m(B,"TD",{class:!0});var ce=q(h);C=Y(ce,f),ce.forEach(g),S=L(B),T=m(B,"TD",{class:!0});var x=q(T);A=Y(x,w),x.forEach(g),R=L(B),b=m(B,"TD",{class:!0});var ve=q(b);V&&V.l(ve),ve.forEach(g),k=L(B),_=m(B,"TD",{class:!0});var de=q(_);O&&O.l(de),de.forEach(g),v=L(B),j=m(B,"TD",{class:!0});var ee=q(j);u=m(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),te(u)!=="svelte-dkigzt"&&(u.textContent=E),ee.forEach(g),M=L(B),B.forEach(g),this.h()},h(){D(l,"class","svelte-eaqrys"),D(o,"class","reading svelte-eaqrys"),D(h,"class","svelte-eaqrys"),D(T,"class","svelte-eaqrys"),D(b,"class","srs-container svelte-eaqrys"),D(_,"class","svelte-eaqrys"),D(u,"class","primary svelte-eaqrys"),D(j,"class","svelte-eaqrys"),this.first=t},m(H,B){J(H,t,B),c(t,l),c(l,s),c(t,n),c(t,o),ie(r,o,null),c(t,d),c(t,h),c(h,C),c(t,S),c(t,T),c(T,A),c(t,R),c(t,b),V&&V.m(b,null),c(t,k),c(t,_),O&&O.m(_,null),c(t,v),c(t,j),c(j,u),c(t,M),U=!0,I||(W=z(u,"click",_e),I=!0)},p(H,B){e=H,(!U||B&8)&&i!==(i=e[12].translation+"")&&le(s,i);const Q={};B&8&&(Q.readings=e[12].reading),B&8&&(Q.furigana=e[12].furigana),B&8&&(Q.colors=e[12].optional.map(Je)),r.$set(Q),(!U||B&8)&&f!==(f=e[12].note+"")&&le(C,f),(!U||B&8)&&w!==(w=e[12].hint+"")&&le(A,w),e[12].srs?V?(V.p(e,B),B&8&&$(V,1)):(V=ze(e),V.c(),$(V,1),V.m(b,null)):V&&(fe(),X(V,1,1,()=>{V=null}),he()),e[12].srs?O?O.p(e,B):(O=Fe(e),O.c(),O.m(_,null)):O&&(O.d(1),O=null)},i(H){U||($(r.$$.fragment,H),$(V),U=!0)},o(H){X(r.$$.fragment,H),X(V),U=!1},d(H){H&&g(t),oe(r),V&&V.d(),O&&O.d(),I=!1,W()}}}function bt(a){let e,t,l,i;const s=[mt,pt],n=[];function o(r,d){return r[0]?1:0}return t=o(a),l=n[t]=s[t](a),{c(){e=p("div"),l.c(),this.h()},l(r){e=m(r,"DIV",{class:!0});var d=q(e);l.l(d),d.forEach(g),this.h()},h(){D(e,"class","container svelte-eaqrys")},m(r,d){J(r,e,d),n[t].m(e,null),i=!0},p(r,[d]){let h=t;t=o(r),t===h?n[t].p(r,d):(fe(),X(n[h],1,1,()=>{n[h]=null}),he(),l=n[t],l?l.p(r,d):(l=n[t]=s[t](r),l.c()),$(l,1),l.m(e,null))},i(r){i||($(l),i=!0)},o(r){X(l),i=!1},d(r){r&&g(e),n[t].d()}}}const Je=a=>a?"blue":"black";function wt(a,e,t){let l;const i=Le();let{deckMetadata:s}=e,{storage:n}=e,o=s.name,r=s.description;function d(){t(0,s.sentenceIds=l.map(w=>w.id),s),t(0,s.name=o,s),t(0,s.description=r,s),n.addOrUpdateDeck(s),i("navigate",{to:"decks"})}function h(){const A={id:Math.random().toString(36).substring(7),furigana:[],hint:"",note:"",optional:[],optionalCluster:[],raw:"",reading:[],srs:{stage:it.Apprentice1,nextReview:new Date,lastReview:new Date,streak:0,maxStreak:0},translation:""};i("edit",{deck:s,sentence:A})}function f(){o=this.value,t(1,o)}function C(){r=this.value,t(2,r)}const S=w=>i("edit",{deck:s,sentence:w}),T=w=>w.detail.to==="save"?d():i("cancel");return a.$$set=w=>{"deckMetadata"in w&&t(0,s=w.deckMetadata),"storage"in w&&t(7,n=w.storage)},a.$$.update=()=>{a.$$.dirty&129&&t(3,l=s&&n&&n.getSentencesForDeck(s.id))},[s,o,r,l,i,d,h,n,f,C,S,T]}class Et extends be{constructor(e){super(),we(this,e,wt,bt,me,{deckMetadata:0,storage:7})}}function We(a,e,t){const l=a.slice();return l[8]=e[t],l}function Ze(a,e){let t,l,i=e[8].name+"",s,n,o=e[8].sentenceIds.length+"",r,d,h,f,C=e[8].description+"",S,T,w,A,R="Edit",b,k,_="Delete",v,j,u;function E(){return e[5](e[8])}function M(){return e[6](e[8])}return{key:a,first:null,c(){t=p("div"),l=p("h2"),s=F(i),n=F(" ("),r=F(o),d=F(")"),h=N(),f=p("p"),S=F(C),T=N(),w=p("div"),A=p("button"),A.textContent=R,b=N(),k=p("button"),k.textContent=_,v=N(),this.h()},l(U){t=m(U,"DIV",{class:!0});var I=q(t);l=m(I,"H2",{class:!0});var W=q(l);s=Y(W,i),n=Y(W," ("),r=Y(W,o),d=Y(W,")"),W.forEach(g),h=L(I),f=m(I,"P",{});var V=q(f);S=Y(V,C),V.forEach(g),T=L(I),w=m(I,"DIV",{class:!0});var O=q(w);A=m(O,"BUTTON",{class:!0,"data-svelte-h":!0}),te(A)!=="svelte-xkyu9k"&&(A.textContent=R),b=L(O),k=m(O,"BUTTON",{class:!0,"data-svelte-h":!0}),te(k)!=="svelte-1v25wbx"&&(k.textContent=_),O.forEach(g),v=L(I),I.forEach(g),this.h()},h(){D(l,"class","svelte-1jx2618"),D(A,"class","edit-button svelte-1jx2618"),D(k,"class","delete-button svelte-1jx2618"),D(w,"class","deck-actions svelte-1jx2618"),D(t,"class","deck-card svelte-1jx2618"),this.first=t},m(U,I){J(U,t,I),c(t,l),c(l,s),c(l,n),c(l,r),c(l,d),c(t,h),c(t,f),c(f,S),c(t,T),c(t,w),c(w,A),c(w,b),c(w,k),c(t,v),j||(u=[z(A,"click",E),z(k,"click",M)],j=!0)},p(U,I){e=U,I&1&&i!==(i=e[8].name+"")&&le(s,i),I&1&&o!==(o=e[8].sentenceIds.length+"")&&le(r,o),I&1&&C!==(C=e[8].description+"")&&le(S,C)},d(U){U&&g(t),j=!1,Be(u)}}}function Dt(a){let e,t,l="Decks",i,s,n=[],o=new Map,r,d,h="Add Deck",f,C,S,T,w,A=pe(a[0]);const R=b=>b[8].id;for(let b=0;b<A.length;b+=1){let k=We(a,A,b),_=R(k);o.set(_,n[b]=Ze(_,k))}return C=new Ve({props:{view:[{to:"review",label:"Review",active:!0},{to:"decks",label:"Edit Decks",active:!1}]}}),C.$on("navigate",a[7]),{c(){e=p("div"),t=p("h1"),t.textContent=l,i=N(),s=p("div");for(let b=0;b<n.length;b+=1)n[b].c();r=N(),d=p("button"),d.textContent=h,f=N(),ae(C.$$.fragment),this.h()},l(b){e=m(b,"DIV",{class:!0});var k=q(e);t=m(k,"H1",{"data-svelte-h":!0}),te(t)!=="svelte-1txjx0s"&&(t.textContent=l),i=L(k),s=m(k,"DIV",{class:!0});var _=q(s);for(let v=0;v<n.length;v+=1)n[v].l(_);_.forEach(g),r=L(k),d=m(k,"BUTTON",{class:!0,"data-svelte-h":!0}),te(d)!=="svelte-2g2ez9"&&(d.textContent=h),f=L(k),re(C.$$.fragment,k),k.forEach(g),this.h()},h(){D(s,"class","deck-list svelte-1jx2618"),D(d,"class","add-deck-button svelte-1jx2618"),D(e,"class","decks-view svelte-1jx2618")},m(b,k){J(b,e,k),c(e,t),c(e,i),c(e,s);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(s,null);c(e,r),c(e,d),c(e,f),ie(C,e,null),S=!0,T||(w=z(d,"click",a[2]),T=!0)},p(b,[k]){k&11&&(A=pe(b[0]),n=tt(n,k,R,1,b,A,o,s,ct,Ze,null,We))},i(b){S||($(C.$$.fragment,b),S=!0)},o(b){X(C.$$.fragment,b),S=!1},d(b){b&&g(e);for(let k=0;k<n.length;k+=1)n[k].d();oe(C),T=!1,w()}}}function Tt(a,e,t){const l=Le();let{decks:i=[]}=e,{storage:s}=e;function n(){const f=prompt("Enter the name of the deck"),C=prompt("Enter the description of the deck");if(f&&C){const T={id:Math.random().toString(36).substring(7),name:f,description:C,sentenceIds:[]};s.addOrUpdateDeck(T),t(0,i=s.getDecks())}}function o(f){confirm("Are you sure you want to delete this deck?")&&(s.deleteDeck(f),t(0,i=s.getDecks()))}et(()=>{});const r=f=>l("edit",{deck:f}),d=f=>o(f.id),h=f=>l("navigate",{to:f.detail.to});return a.$$set=f=>{"decks"in f&&t(0,i=f.decks),"storage"in f&&t(4,s=f.storage)},[i,l,n,o,s,r,d,h]}class Ct extends be{constructor(e){super(),we(this,e,Tt,Dt,me,{decks:0,storage:4})}}function St(a,e,t){const l=a.slice();return l[18]=e[t],l}function qt(a){let e,t=Ne(a[18])+"",l;return{c(){e=p("option"),l=F(t),this.h()},l(i){e=m(i,"OPTION",{});var s=q(e);l=Y(s,t),s.forEach(g),this.h()},h(){e.__value=a[18],G(e,e.__value)},m(i,s){J(i,e,s),c(e,l)},p:ue,d(i){i&&g(e)}}}function At(a){let e,t,l="Edit Sentence",i,s,n,o,r,d,h,f,C,S,T,w,A,R,b,k,_,v,j,u,E,M,U,I,W,V=Ce(a[0].srs)+"",O,_e,H,B="Reset SRS",Q,se,ce,x,ve="Delete Sentence",de,ee,ge,Se,Oe;r=new st({props:{readings:a[0].reading,furigana:a[0].furigana,colors:a[0].optional.map(Ge)}});let Ue=pe(nt),ne=[];for(let y=0;y<Ue.length;y+=1)ne[y]=qt(St(a,Ue,y));return ee=new Ve({props:{view:[{to:"cancel",label:"Cancel",active:!0},{to:"save",label:"Save",active:!0}]}}),ee.$on("navigate",a[17]),{c(){e=p("div"),t=p("h1"),t.textContent=l,i=N(),s=p("div"),n=p("textarea"),o=N(),ae(r.$$.fragment),d=N(),h=p("div"),f=p("label"),C=F(`Translation\r
            `),S=p("input"),T=N(),w=p("label"),A=F(`Notes\r
            `),R=p("textarea"),b=N(),k=p("label"),_=F(`Hint\r
            `),v=p("textarea"),j=N(),u=p("label"),E=F(`SRS Stage\r
            `),M=p("select");for(let y=0;y<ne.length;y+=1)ne[y].c();U=N(),I=p("label"),W=F("Time until Review: "),O=F(V),_e=N(),H=p("button"),H.textContent=B,Q=N(),se=p("label"),ce=F(`Delete\r
            `),x=p("button"),x.textContent=ve,de=N(),ae(ee.$$.fragment),this.h()},l(y){e=m(y,"DIV",{class:!0});var P=q(e);t=m(P,"H1",{"data-svelte-h":!0}),te(t)!=="svelte-x8bscl"&&(t.textContent=l),i=L(P),s=m(P,"DIV",{class:!0});var Z=q(s);n=m(Z,"TEXTAREA",{class:!0}),q(n).forEach(g),o=L(Z),re(r.$$.fragment,Z),Z.forEach(g),d=L(P),h=m(P,"DIV",{class:!0});var K=q(h);f=m(K,"LABEL",{class:!0});var qe=q(f);C=Y(qe,`Translation\r
            `),S=m(qe,"INPUT",{class:!0}),qe.forEach(g),T=L(K),w=m(K,"LABEL",{class:!0});var Ae=q(w);A=Y(Ae,`Notes\r
            `),R=m(Ae,"TEXTAREA",{class:!0}),q(R).forEach(g),Ae.forEach(g),b=L(K),k=m(K,"LABEL",{class:!0});var Ie=q(k);_=Y(Ie,`Hint\r
            `),v=m(Ie,"TEXTAREA",{class:!0}),q(v).forEach(g),Ie.forEach(g),j=L(K),u=m(K,"LABEL",{class:!0});var Re=q(u);E=Y(Re,`SRS Stage\r
            `),M=m(Re,"SELECT",{class:!0});var $e=q(M);for(let Me=0;Me<ne.length;Me+=1)ne[Me].l($e);$e.forEach(g),Re.forEach(g),U=L(K),I=m(K,"LABEL",{class:!0});var ke=q(I);W=Y(ke,"Time until Review: "),O=Y(ke,V),_e=L(ke),H=m(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),te(H)!=="svelte-1cluvep"&&(H.textContent=B),ke.forEach(g),Q=L(K),se=m(K,"LABEL",{class:!0});var ye=q(se);ce=Y(ye,`Delete\r
            `),x=m(ye,"BUTTON",{class:!0,"data-svelte-h":!0}),te(x)!=="svelte-1kuu88f"&&(x.textContent=ve),ye.forEach(g),K.forEach(g),de=L(P),re(ee.$$.fragment,P),P.forEach(g),this.h()},h(){D(n,"class","svelte-6khvqs"),D(s,"class","sentence-input svelte-6khvqs"),D(S,"class","svelte-6khvqs"),D(f,"class","svelte-6khvqs"),D(R,"class","svelte-6khvqs"),D(w,"class","svelte-6khvqs"),D(v,"class","svelte-6khvqs"),D(k,"class","svelte-6khvqs"),D(M,"class","svelte-6khvqs"),a[0].srs.stage===void 0&&lt(()=>a[16].call(M)),D(u,"class","svelte-6khvqs"),D(H,"class","reset-btn svelte-6khvqs"),D(I,"class","svelte-6khvqs"),D(x,"class","reset-btn svelte-6khvqs"),D(se,"class","svelte-6khvqs"),D(h,"class","form-grid svelte-6khvqs"),D(e,"class","edit-container svelte-6khvqs")},m(y,P){J(y,e,P),c(e,t),c(e,i),c(e,s),c(s,n),G(n,a[0].raw),c(s,o),ie(r,s,null),c(e,d),c(e,h),c(h,f),c(f,C),c(f,S),G(S,a[0].translation),c(h,T),c(h,w),c(w,A),c(w,R),G(R,a[0].note),c(h,b),c(h,k),c(k,_),c(k,v),G(v,a[0].hint),c(h,j),c(h,u),c(u,E),c(u,M);for(let Z=0;Z<ne.length;Z+=1)ne[Z]&&ne[Z].m(M,null);He(M,a[0].srs.stage,!0),c(h,U),c(h,I),c(I,W),c(I,O),c(I,_e),c(I,H),c(h,Q),c(h,se),c(se,ce),c(se,x),c(e,de),ie(ee,e,null),ge=!0,Se||(Oe=[z(n,"input",a[8]),z(n,"input",a[9]),z(S,"input",a[10]),z(S,"input",a[11]),z(R,"input",a[12]),z(R,"input",a[13]),z(v,"input",a[14]),z(v,"input",a[15]),z(M,"change",a[16]),z(H,"click",a[4]),z(x,"click",a[3])],Se=!0)},p(y,[P]){P&1&&G(n,y[0].raw);const Z={};P&1&&(Z.readings=y[0].reading),P&1&&(Z.furigana=y[0].furigana),P&1&&(Z.colors=y[0].optional.map(Ge)),r.$set(Z),P&1&&S.value!==y[0].translation&&G(S,y[0].translation),P&1&&G(R,y[0].note),P&1&&G(v,y[0].hint),P&1&&He(M,y[0].srs.stage),(!ge||P&1)&&V!==(V=Ce(y[0].srs)+"")&&le(O,V)},i(y){ge||($(r.$$.fragment,y),$(ee.$$.fragment,y),ge=!0)},o(y){X(r.$$.fragment,y),X(ee.$$.fragment,y),ge=!1},d(y){y&&g(e),oe(r),at(ne,y),oe(ee),Se=!1,Be(Oe)}}}const Ge=a=>a?"blue":"black";function It(a,e,t){const l=Le();let{deck:i=null}=e,{sentence:s}=e,{storage:n}=e;function o(v,j){if(v==="raw"){const u=j.split("").map(dt).join(""),E=ut(u),{reading:M,furigana:U,optional:I,optionalCluster:W}=ft(E);t(0,s={...s,raw:u,reading:M,furigana:U,optional:I,optionalCluster:W})}else t(0,s={...s,[v]:j})}const r=()=>{confirm("Are you sure you want to delete this sentence?")&&(i&&n.removeSentenceFromDeck(i.id,s.id),n.deleteSentence(s.id),l("cancel"))};function d(){t(0,s.srs={...s.srs,streak:0,maxStreak:0,stage:nt[0],nextReview:new Date},s)}function h(){n.addOrUpdateSentence(s),i&&n.addSentenceToDeck(i.id,s.id),l("edit",{deck:i,sentence:s})}function f(){s.raw=this.value,t(0,s)}const C=v=>o("raw",v.target.value);function S(){s.translation=this.value,t(0,s)}const T=v=>o("translation",v.target.value);function w(){s.note=this.value,t(0,s)}const A=v=>o("note",v.target.value);function R(){s.hint=this.value,t(0,s)}const b=v=>o("hint",v.target.value);function k(){s.srs.stage=rt(this),t(0,s)}const _=v=>v.detail.to==="save"?h():l("cancel");return a.$$set=v=>{"deck"in v&&t(6,i=v.deck),"sentence"in v&&t(0,s=v.sentence),"storage"in v&&t(7,n=v.storage)},[s,l,o,r,d,h,i,n,f,C,S,T,w,A,R,b,k,_]}class Rt extends be{constructor(e){super(),we(this,e,It,At,me,{deck:6,sentence:0,storage:7})}}function Ke(a){let e,t,l;function i(n){a[6](n)}let s={storage:a[0]};return a[1]!==void 0&&(s.decks=a[1]),e=new Ct({props:s}),Ee.push(()=>Te(e,"decks",i)),e.$on("edit",a[7]),e.$on("navigate",a[8]),{c(){ae(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,o){ie(e,n,o),l=!0},p(n,o){const r={};o&1&&(r.storage=n[0]),!t&&o&2&&(t=!0,r.decks=n[1],De(()=>t=!1)),e.$set(r)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){X(e.$$.fragment,n),l=!1},d(n){oe(e,n)}}}function Qe(a){let e,t,l;function i(n){a[9](n)}let s={storage:a[0]};return a[2]!==void 0&&(s.deckMetadata=a[2]),e=new Et({props:s}),Ee.push(()=>Te(e,"deckMetadata",i)),e.$on("edit",a[10]),e.$on("cancel",a[11]),e.$on("navigate",a[12]),{c(){ae(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,o){ie(e,n,o),l=!0},p(n,o){const r={};o&1&&(r.storage=n[0]),!t&&o&4&&(t=!0,r.deckMetadata=n[2],De(()=>t=!1)),e.$set(r)},i(n){l||($(e.$$.fragment,n),l=!0)},o(n){X(e.$$.fragment,n),l=!1},d(n){oe(e,n)}}}function xe(a){let e,t,l,i;function s(r){a[13](r)}function n(r){a[14](r)}let o={storage:a[0]};return a[2]!==void 0&&(o.deck=a[2]),a[3]!==void 0&&(o.sentence=a[3]),e=new Rt({props:o}),Ee.push(()=>Te(e,"deck",s)),Ee.push(()=>Te(e,"sentence",n)),e.$on("edit",a[15]),e.$on("cancel",a[16]),{c(){ae(e.$$.fragment)},l(r){re(e.$$.fragment,r)},m(r,d){ie(e,r,d),i=!0},p(r,d){const h={};d&1&&(h.storage=r[0]),!t&&d&4&&(t=!0,h.deck=r[2],De(()=>t=!1)),!l&&d&8&&(l=!0,h.sentence=r[3],De(()=>l=!1)),e.$set(h)},i(r){i||($(e.$$.fragment,r),i=!0)},o(r){X(e.$$.fragment,r),i=!1},d(r){oe(e,r)}}}function yt(a){let e,t,l,i,s=a[4]==="decks"&&Ke(a),n=a[4]==="edit-deck"&&a[2]&&Qe(a),o=a[4]==="edit-card"&&a[2]&&a[3]&&xe(a);return{c(){e=p("div"),s&&s.c(),t=N(),n&&n.c(),l=N(),o&&o.c(),this.h()},l(r){e=m(r,"DIV",{class:!0});var d=q(e);s&&s.l(d),t=L(d),n&&n.l(d),l=L(d),o&&o.l(d),d.forEach(g),this.h()},h(){D(e,"class","container svelte-1365wnv")},m(r,d){J(r,e,d),s&&s.m(e,null),c(e,t),n&&n.m(e,null),c(e,l),o&&o.m(e,null),i=!0},p(r,[d]){r[4]==="decks"?s?(s.p(r,d),d&16&&$(s,1)):(s=Ke(r),s.c(),$(s,1),s.m(e,t)):s&&(fe(),X(s,1,1,()=>{s=null}),he()),r[4]==="edit-deck"&&r[2]?n?(n.p(r,d),d&20&&$(n,1)):(n=Qe(r),n.c(),$(n,1),n.m(e,l)):n&&(fe(),X(n,1,1,()=>{n=null}),he()),r[4]==="edit-card"&&r[2]&&r[3]?o?(o.p(r,d),d&28&&$(o,1)):(o=xe(r),o.c(),$(o,1),o.m(e,null)):o&&(fe(),X(o,1,1,()=>{o=null}),he())},i(r){i||($(s),$(n),$(o),i=!0)},o(r){X(s),X(n),X(o),i=!1},d(r){r&&g(e),s&&s.d(),n&&n.d(),o&&o.d()}}}function Mt(a,e,t){let l,i=[],s=null,n=null,o="decks";const r=_=>{t(4,o=_),o==="review"&&(window.location.href=`${_t}/`)};et(()=>{t(0,l=ht()),t(1,i=l.getDecks())});function d(_){i=_,t(1,i)}const h=_=>{t(2,s=_.detail.deck),r("edit-deck")},f=_=>{const v=_.detail.to;r(v)};function C(_){s=_,t(2,s)}const S=_=>{t(3,n=_.detail.sentence),r("edit-card")},T=_=>{t(3,n=null),t(2,s=null),r("decks")},w=_=>{const v=_.detail.to;r(v)};function A(_){s=_,t(2,s)}function R(_){n=_,t(3,n)}return[l,i,s,n,o,r,d,h,f,C,S,T,w,A,R,_=>{t(3,n=null),r("edit-deck")},_=>{t(3,n=null),r("edit-deck")}]}class Ot extends be{constructor(e){super(),we(this,e,Mt,yt,me,{})}}export{Ot as component};
