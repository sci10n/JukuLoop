import{s as ft,n as rt,b as pt,o as _t,r as ht}from"../chunks/scheduler.BvLojk_z.js";import{S as gt,i as mt,e as w,s as J,c as S,m as Q,h as U,d as B,g as F,j as $,k as p,n as D,o as st,p as L,q as A,r as at,b as V,f as W,l as X}from"../chunks/index.B6IjQEsh.js";import{e as Y,t as bt}from"../chunks/index.BS81UHqu.js";import{w as vt}from"../chunks/index.BGTSHx9J.js";function Z(t){const n=/([\u3400-\u9FAF]+)[(（](.+?)[)）]|([^\u3400-\u9FAF]+)/g;let u=[],r=[],e;for(;(e=n.exec(t))!==null;)e[1]&&e[2]?(u.push(e[1]),r.push(e[2])):e[3]&&(u.push(e[3]),r.push(""));return{reading:u,furigana:r}}const wt="東京(とうきょう)は日本(にほん)の首都(しゅと)です。",St="私（わたし）は日本語（にほんご）を話（はな）します";console.log(Z(wt));console.log(Z(St));function lt(t,n,u){const r=t.slice();return r[20]=n[u],r[21]=n,r[22]=u,r}function ut(t,n,u){const r=t.slice();return r[23]=n[u],r[25]=u,r}function Ft(t){let n=t[23]+"",u;return{c(){u=V(n)},l(r){u=W(r,n)},m(r,e){$(r,u,e)},p(r,e){e&1&&n!==(n=r[23]+"")&&X(u,n)},d(r){r&&F(u)}}}function Tt(t){let n,u=t[23]+"",r,e,l,_=t[20].furigana[t[25]]+"",T,d;return{c(){n=w("ruby"),r=V(u),e=J(),l=w("rt"),T=V(_),d=J()},l(b){n=S(b,"RUBY",{});var h=B(n);r=W(h,u),e=U(h),l=S(h,"RT",{});var v=B(l);T=W(v,_),v.forEach(F),d=U(h),h.forEach(F)},m(b,h){$(b,n,h),p(n,r),p(n,e),p(n,l),p(l,T),p(n,d)},p(b,h){h&1&&u!==(u=b[23]+"")&&X(r,u),h&1&&_!==(_=b[20].furigana[b[25]]+"")&&X(T,_)},d(b){b&&F(n)}}}function ot(t){let n;function u(l,_){return l[20].furigana[l[25]]?Tt:Ft}let r=u(t),e=r(t);return{c(){e.c(),n=at()},l(l){e.l(l),n=at()},m(l,_){e.m(l,_),$(l,n,_)},p(l,_){r===(r=u(l))&&e?e.p(l,_):(e.d(1),e=r(l),e&&(e.c(),e.m(n.parentNode,n)))},d(l){l&&F(n),e.d(l)}}}function it(t){let n,u,r,e,l,_,T,d,b,h,v,O,f,o,k,s,C,q="Delete",M,z,P=Y(t[20].reading),y=[];for(let c=0;c<P.length;c+=1)y[c]=ot(ut(t,P,c));function a(){t[8].call(l,t[21],t[22])}function i(...c){return t[9](t[20],...c)}function E(...c){return t[10](t[20],...c)}function N(){t[11].call(d,t[21],t[22])}function I(...c){return t[12](t[20],...c)}function H(){t[13].call(v,t[21],t[22])}function R(...c){return t[14](t[20],...c)}function j(){t[15].call(o,t[21],t[22])}function ct(...c){return t[16](t[20],...c)}function dt(){return t[17](t[20])}return{c(){n=w("tr"),u=w("td");for(let c=0;c<y.length;c+=1)y[c].c();r=J(),e=w("td"),l=w("input"),_=J(),T=w("td"),d=w("input"),b=J(),h=w("td"),v=w("input"),O=J(),f=w("td"),o=w("input"),k=J(),s=w("td"),C=w("button"),C.textContent=q,this.h()},l(c){n=S(c,"TR",{});var g=B(n);u=S(g,"TD",{});var m=B(u);for(let G=0;G<y.length;G+=1)y[G].l(m);m.forEach(F),r=U(g),e=S(g,"TD",{});var K=B(e);l=S(K,"INPUT",{type:!0}),K.forEach(F),_=U(g),T=S(g,"TD",{});var x=B(T);d=S(x,"INPUT",{type:!0}),x.forEach(F),b=U(g),h=S(g,"TD",{});var tt=B(h);v=S(tt,"INPUT",{type:!0}),tt.forEach(F),O=U(g),f=S(g,"TD",{});var et=B(f);o=S(et,"INPUT",{type:!0}),et.forEach(F),k=U(g),s=S(g,"TD",{});var nt=B(s);C=S(nt,"BUTTON",{"data-svelte-h":!0}),Q(C)!=="svelte-qy7xxg"&&(C.textContent=q),nt.forEach(F),g.forEach(F),this.h()},h(){L(l,"type","text"),L(d,"type","text"),L(v,"type","text"),L(o,"type","text")},m(c,g){$(c,n,g),p(n,u);for(let m=0;m<y.length;m+=1)y[m]&&y[m].m(u,null);p(n,r),p(n,e),p(e,l),A(l,t[20].raw),p(n,_),p(n,T),p(T,d),A(d,t[20].translation),p(n,b),p(n,h),p(h,v),A(v,t[20].note),p(n,O),p(n,f),p(f,o),A(o,t[20].hint),p(n,k),p(n,s),p(s,C),M||(z=[D(l,"input",a),D(l,"input",i),D(l,"blur",E),D(d,"input",N),D(d,"blur",I),D(v,"input",H),D(v,"blur",R),D(o,"input",j),D(o,"blur",ct),D(C,"click",dt)],M=!0)},p(c,g){if(t=c,g&1){P=Y(t[20].reading);let m;for(m=0;m<P.length;m+=1){const K=ut(t,P,m);y[m]?y[m].p(K,g):(y[m]=ot(K),y[m].c(),y[m].m(u,null))}for(;m<y.length;m+=1)y[m].d(1);y.length=P.length}g&1&&l.value!==t[20].raw&&A(l,t[20].raw),g&1&&d.value!==t[20].translation&&A(d,t[20].translation),g&1&&v.value!==t[20].note&&A(v,t[20].note),g&1&&o.value!==t[20].hint&&A(o,t[20].hint)},d(c){c&&F(n),st(y,c),M=!1,ht(z)}}}function yt(t){let n,u="Stored Sentences",r,e,l,_,T,d,b="Add",h,v,O=Y(t[0]),f=[];for(let o=0;o<O.length;o+=1)f[o]=it(lt(t,O,o));return{c(){n=w("h2"),n.textContent=u,r=J(),e=w("table");for(let o=0;o<f.length;o+=1)f[o].c();l=J(),_=w("tr"),T=w("td"),d=w("button"),d.textContent=b},l(o){n=S(o,"H2",{"data-svelte-h":!0}),Q(n)!=="svelte-1j8t86n"&&(n.textContent=u),r=U(o),e=S(o,"TABLE",{});var k=B(e);for(let q=0;q<f.length;q+=1)f[q].l(k);l=U(k),_=S(k,"TR",{});var s=B(_);T=S(s,"TD",{});var C=B(T);d=S(C,"BUTTON",{"data-svelte-h":!0}),Q(d)!=="svelte-mbqzgr"&&(d.textContent=b),C.forEach(F),s.forEach(F),k.forEach(F)},m(o,k){$(o,n,k),$(o,r,k),$(o,e,k);for(let s=0;s<f.length;s+=1)f[s]&&f[s].m(e,null);p(e,l),p(e,_),p(_,T),p(T,d),h||(v=D(d,"click",t[2]),h=!0)},p(o,[k]){if(k&251){O=Y(o[0]);let s;for(s=0;s<O.length;s+=1){const C=lt(o,O,s);f[s]?f[s].p(C,k):(f[s]=it(C),f[s].c(),f[s].m(e,l))}for(;s<f.length;s+=1)f[s].d(1);f.length=O.length}},i:rt,o:rt,d(o){o&&(F(n),F(r),F(e)),st(f,o),h=!1,v()}}}function kt(t,n,u){let r,e=vt([]);pt(t,e,a=>u(0,r=a));const l=a=>bt(a,{IMEMode:!0}),_=a=>a.replace(/[\s.,\/#!$%\^&\*;:{}=\-_`~\u3000-\u303f]/g,""),T=()=>{e.update(a=>{const i={raw:"私（わたし）は学生（がくせい）です",reading:["私","は","学生","です"],furigana:["わたし","","がくせい",""],translation:"I am a student",note:"This is a note and will be shown with the answer.",hint:"This is a hint and will be shown with the question."},E=[...a,i];return localStorage.setItem("sentences",JSON.stringify(E)),E})};function d(a,i){const E=_(i),N=Z(E);e.update(I=>{const H=I.map(R=>R.raw===a?(console.log(N),{...R,raw:E,reading:N.reading,furigana:N.furigana}):R);return localStorage.setItem("sentences",JSON.stringify(H)),H})}const b=(a,i)=>{e.update(E=>{const N=E.map(I=>I.raw===a?{...I,translation:i}:I);return localStorage.setItem("sentences",JSON.stringify(N)),N})},h=(a,i)=>{e.update(E=>{const N=E.map(I=>I.raw===a?{...I,note:i}:I);return localStorage.setItem("sentences",JSON.stringify(N)),N})},v=(a,i)=>{e.update(E=>{const N=E.map(I=>I.raw===a?{...I,updateHint:i}:I);return localStorage.setItem("sentences",JSON.stringify(N)),N})},O=(a,i)=>{const E=a.target.selectionStart,N=a.target.selectionEnd,I=l(a.target.value);e.update(H=>{const R=H.map(j=>j.raw===i?{...j,raw:I}:j);return localStorage.setItem("sentences",JSON.stringify(R)),R}),a.target.focus(),requestAnimationFrame(()=>{a.target.setSelectionRange(E,N)})};_t(()=>{const a=localStorage.getItem("sentences");a&&e.set(JSON.parse(a))});function f(a,i){a[i].raw=this.value,e.set(r)}const o=(a,i)=>O(i,a.raw),k=(a,i)=>d(a.raw,i.target.value);function s(a,i){a[i].translation=this.value,e.set(r)}const C=(a,i)=>b(a.raw,i.target.value);function q(a,i){a[i].note=this.value,e.set(r)}const M=(a,i)=>h(a.raw,i.target.value);function z(a,i){a[i].hint=this.value,e.set(r)}return[r,e,T,d,b,h,v,O,f,o,k,s,C,q,M,z,(a,i)=>v(a.raw,i.target.value),a=>{e.update(i=>i.filter(E=>E.raw!==a.raw)),localStorage.setItem("sentences",JSON.stringify(r))}]}class Ot extends gt{constructor(n){super(),mt(this,n,kt,yt,ft,{})}}export{Ot as component};
