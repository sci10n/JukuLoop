import{s as fe,e as j,t as ne,d as T,f as I,h as se,i as A,B as J,k as Y,l as c,m as je,n as ue,b as P,z as Te,j as L,S as Re,w as Ie,q as w,r as V,x as K,C as De,p as Z,v as Me,y as _e}from"../chunks/scheduler.CDGtiUFo.js";import{S as he,i as pe,t as z,g as Oe,c as Ue,a as Q,b as re,d as oe,m as ie,e as ce}from"../chunks/index.B5cZ8GrW.js";import{b as Le,t as Ve,e as de}from"../chunks/index.Dh9Un3aJ.js";import{S as O,C as Xe,c as qe,b as Ke}from"../chunks/Srs.BX5E71Bv.js";import{c as ye}from"../chunks/conversionUtils.FHTzGAhE.js";const He={raw:"私（わたし）は学生（がくせい）です",reading:["私","は","学生","です"],furigana:["わたし","","がくせい",""],translation:"I am a student",note:"This is a note and will be shown with the answer.",hint:"This is a hint and will be shown with the question.",srs:{stage:O.Apprentice1,nextReview:new Date,lastReview:new Date,streak:0,maxStreak:0}},Fe={sentences:[He],name:"Placeholder deck",description:"This is a placeholder deck"};function Je(t){let e,n=t[3](t[0])+"",a,s,l;return{c(){e=j("p"),a=ne(n),s=ne(" - "),l=ne(t[1]),this.h()},l(r){e=T(r,"P",{style:!0});var i=I(e);a=se(i,n),s=se(i," - "),l=se(i,t[1]),i.forEach(A),this.h()},h(){J(e,"color",t[2](t[0]))},m(r,i){Y(r,e,i),c(e,a),c(e,s),c(e,l)},p(r,[i]){i&1&&n!==(n=r[3](r[0])+"")&&je(a,n),i&2&&je(l,r[1]),i&1&&J(e,"color",r[2](r[0]))},i:ue,o:ue,d(r){r&&A(e)}}}function ze(t,e,n){let a,s;const l=D=>{switch(D){case O.Apprentice1:return"#D81B60";case O.Apprentice2:return"#D81B60";case O.Apprentice3:return"#D81B60";case O.Apprentice4:return"#D81B60";case O.Guru1:return"#1E88E5";case O.Guru2:return"#1E88E5";case O.Master:return"#004D40";case O.Enlightened:return"#EBDACC";case O.Burned:return"#360C2D"}},r=D=>{switch(D){case O.Apprentice1:return"Apprentice 1";case O.Apprentice2:return"Apprentice 2";case O.Apprentice3:return"Apprentice 3";case O.Apprentice4:return"Apprentice 4";case O.Guru1:return"Guru 1";case O.Guru2:return"Guru 2";case O.Master:return"Master";case O.Enlightened:return"Enlightened";case O.Burned:return"Burned"}};let{stage:i=O.Apprentice1}=e,{srs:_}=e;return t.$$set=D=>{"stage"in D&&n(0,i=D.stage),"srs"in D&&n(4,_=D.srs)},t.$$.update=()=>{t.$$.dirty&16&&n(5,a=Math.round((new Date(_.nextReview)-Date.now())/1e3/60)),t.$$.dirty&32&&n(1,s=a>0?`${a} minutes`:"Now")},[i,s,l,r,_,a]}class Ye extends he{constructor(e){super(),pe(this,e,ze,Je,fe,{stage:0,srs:4})}}function Ee(t){let e,n,a;return{c(){e=j("input"),this.h()},l(s){e=T(s,"INPUT",{class:!0}),this.h()},h(){e.value=t[1],w(e,"class","svelte-18pxfbr")},m(s,l){Y(s,e,l),t[5](e),n||(a=V(e,"input",t[6]),n=!0)},p(s,l){l&2&&e.value!==s[1]&&(e.value=s[1])},d(s){s&&A(e),t[5](null),n=!1,a()}}}function we(t){let e,n,a;return{c(){e=j("textarea"),this.h()},l(s){e=T(s,"TEXTAREA",{class:!0}),I(e).forEach(A),this.h()},h(){w(e,"class","svelte-18pxfbr")},m(s,l){Y(s,e,l),K(e,t[1]),t[8](e),n||(a=V(e,"input",t[7]),n=!0)},p(s,l){l&2&&K(e,s[1])},d(s){s&&A(e),t[8](null),n=!1,a()}}}function Qe(t){let e,n,a=t[0]==="input"&&Ee(t),s=t[0]==="textarea"&&we(t);return{c(){a&&a.c(),e=P(),s&&s.c(),n=Te()},l(l){a&&a.l(l),e=L(l),s&&s.l(l),n=Te()},m(l,r){a&&a.m(l,r),Y(l,e,r),s&&s.m(l,r),Y(l,n,r)},p(l,[r]){l[0]==="input"?a?a.p(l,r):(a=Ee(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),l[0]==="textarea"?s?s.p(l,r):(s=we(l),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:ue,o:ue,d(l){l&&(A(e),A(n)),a&&a.d(l),s&&s.d(l)}}}function We(t,e,n){let{type:a="input"}=e,{value:s=""}=e,l=s,r;const i=Re(),_=h=>{i("input",Ve(h,{IMEMode:!0}))};Ie(()=>{Le(r)});function D(h){De[h?"unshift":"push"](()=>{r=h,n(2,r)})}const d=h=>_(h.target.value);function S(){l=this.value,n(1,l)}function C(h){De[h?"unshift":"push"](()=>{r=h,n(2,r)})}return t.$$set=h=>{"type"in h&&n(0,a=h.type),"value"in h&&n(4,s=h.value)},t.$$.update=()=>{t.$$.dirty&2&&l&&i("input",l)},[a,l,r,_,s,D,d,S,C]}class Ze extends he{constructor(e){super(),pe(this,e,We,Qe,fe,{type:0,value:4})}}function Ae(t,e,n){const a=t.slice();return a[24]=e[n],a[25]=e,a[26]=n,a}function Se(t){let e,n,a,s,l,r,i,_,D,d,S,C,h,M,U,f,X,u,p,v,B,q,F,H,o,b="Delete",G,m,$,g;a=new Xe({props:{readings:t[24].reading,furigana:t[24].furigana,colors:t[24].reading.map(Ce)}});function k(...R){return t[11](t[26],...R)}r=new Ze({props:{value:t[24].raw}}),r.$on("input",k);function N(){t[12].call(d,t[25],t[26])}function y(...R){return t[13](t[26],...R)}function ae(){t[14].call(M,t[25],t[26])}function le(...R){return t[15](t[26],...R)}function x(){t[16].call(u,t[25],t[26])}function Ge(...R){return t[17](t[26],...R)}q=new Ye({props:{stage:t[24].srs.stage,srs:t[24].srs}});function Pe(){return t[18](t[26])}return{c(){e=j("tr"),n=j("td"),re(a.$$.fragment),s=P(),l=j("td"),i=j("div"),re(r.$$.fragment),_=P(),D=j("td"),d=j("textarea"),C=P(),h=j("td"),M=j("textarea"),f=P(),X=j("td"),u=j("textarea"),v=P(),B=j("td"),re(q.$$.fragment),F=P(),H=j("td"),o=j("button"),o.textContent=b,G=P(),this.h()},l(R){e=T(R,"TR",{class:!0});var E=I(e);n=T(E,"TD",{class:!0,"data-label":!0});var W=I(n);oe(a.$$.fragment,W),W.forEach(A),s=L(E),l=T(E,"TD",{"data-label":!0,class:!0});var ee=I(l);i=T(ee,"DIV",{style:!0});var te=I(i);oe(r.$$.fragment,te),ee.forEach(A),_=L(E),D=T(E,"TD",{"data-label":!0,class:!0});var me=I(D);d=T(me,"TEXTAREA",{class:!0}),I(d).forEach(A),me.forEach(A),C=L(E),h=T(E,"TD",{"data-label":!0,class:!0});var ge=I(h);M=T(ge,"TEXTAREA",{class:!0}),I(M).forEach(A),ge.forEach(A),f=L(E),X=T(E,"TD",{"data-label":!0,class:!0});var ve=I(X);u=T(ve,"TEXTAREA",{class:!0}),I(u).forEach(A),ve.forEach(A),v=L(E),B=T(E,"TD",{"data-label":!0,class:!0});var be=I(B);oe(q.$$.fragment,be),be.forEach(A),F=L(E),H=T(E,"TD",{"data-label":!0,class:!0});var ke=I(H);o=T(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-c7u7nw"&&(o.textContent=b),ke.forEach(A),G=L(E),E.forEach(A),this.h()},h(){w(n,"class","reading svelte-3j1jom"),w(n,"data-label","Sentence"),J(i,"display","contents"),J(i,"--background-color","var(--deck-color)"),J(i,"--font-color","white"),J(i,"--border-color","var(--deck-color)"),w(l,"data-label","Raw"),w(l,"class","svelte-3j1jom"),d.disabled=S=!t[1],w(d,"class","svelte-3j1jom"),w(D,"data-label","Translation"),w(D,"class","svelte-3j1jom"),M.disabled=U=!t[1],w(M,"class","svelte-3j1jom"),w(h,"data-label","Notes"),w(h,"class","svelte-3j1jom"),u.disabled=p=!t[1],w(u,"class","svelte-3j1jom"),w(X,"data-label","Hint"),w(X,"class","svelte-3j1jom"),w(B,"data-label","SRS Stage"),w(B,"class","srs-container svelte-3j1jom"),w(o,"class","align-button"),w(H,"data-label","Actions"),w(H,"class","svelte-3j1jom"),w(e,"class","svelte-3j1jom")},m(R,E){Y(R,e,E),c(e,n),ie(a,n,null),c(e,s),c(e,l),c(l,i),ie(r,i,null),c(e,_),c(e,D),c(D,d),K(d,t[24].translation),c(e,C),c(e,h),c(h,M),K(M,t[24].note),c(e,f),c(e,X),c(X,u),K(u,t[24].hint),c(e,v),c(e,B),ie(q,B,null),c(e,F),c(e,H),c(H,o),c(e,G),m=!0,$||(g=[V(d,"input",N),V(d,"input",y),V(M,"input",ae),V(M,"input",le),V(u,"input",x),V(u,"input",Ge),V(o,"click",Pe)],$=!0)},p(R,E){t=R;const W={};E&1&&(W.readings=t[24].reading),E&1&&(W.furigana=t[24].furigana),E&1&&(W.colors=t[24].reading.map(Ce)),a.$set(W);const ee={};E&1&&(ee.value=t[24].raw),r.$set(ee),(!m||E&2&&S!==(S=!t[1]))&&(d.disabled=S),E&1&&K(d,t[24].translation),(!m||E&2&&U!==(U=!t[1]))&&(M.disabled=U),E&1&&K(M,t[24].note),(!m||E&2&&p!==(p=!t[1]))&&(u.disabled=p),E&1&&K(u,t[24].hint);const te={};E&1&&(te.stage=t[24].srs.stage),E&1&&(te.srs=t[24].srs),q.$set(te)},i(R){m||(z(a.$$.fragment,R),z(r.$$.fragment,R),z(q.$$.fragment,R),m=!0)},o(R){Q(a.$$.fragment,R),Q(r.$$.fragment,R),Q(q.$$.fragment,R),m=!1},d(R){R&&A(e),ce(a),ce(r),ce(q),$=!1,_e(g)}}}function $e(t){let e,n,a,s,l,r,i,_,D,d,S,C,h,M='<col class="reading svelte-3j1jom"/> <col class="raw"/> <col class="translation"/> <col class="note"/> <col class="hint"/> <col class="srs"/> <col class="actions"/>',U,f,X='<tr class="svelte-3j1jom"><th class="svelte-3j1jom">Sentence</th> <th class="svelte-3j1jom">Raw</th> <th class="svelte-3j1jom">Translation</th> <th class="svelte-3j1jom">Notes</th> <th class="svelte-3j1jom">Hint</th> <th class="svelte-3j1jom">SRS Stage</th> <th class="svelte-3j1jom">Actions</th></tr>',u,p,v,B,q,F,H,o,b,G=de(t[0].sentences),m=[];for(let g=0;g<G.length;g+=1)m[g]=Se(Ae(t,G,g));const $=g=>Q(m[g],1,1,()=>{m[g]=null});return{c(){e=j("div"),n=j("input"),s=P(),l=j("input"),i=P(),_=j("button"),D=ne("Delete Deck"),S=P(),C=j("table"),h=j("colgroup"),h.innerHTML=M,U=P(),f=j("thead"),f.innerHTML=X,u=P(),p=j("tbody");for(let g=0;g<m.length;g+=1)m[g].c();v=P(),B=j("button"),q=ne("Add Sentence"),this.h()},l(g){e=T(g,"DIV",{class:!0});var k=I(e);n=T(k,"INPUT",{class:!0}),s=L(k),l=T(k,"INPUT",{class:!0}),i=L(k),_=T(k,"BUTTON",{});var N=I(_);D=se(N,"Delete Deck"),N.forEach(A),S=L(k),C=T(k,"TABLE",{class:!0});var y=I(C);h=T(y,"COLGROUP",{"data-svelte-h":!0}),Z(h)!=="svelte-s6o00j"&&(h.innerHTML=M),U=L(y),f=T(y,"THEAD",{class:!0,"data-svelte-h":!0}),Z(f)!=="svelte-57kxnx"&&(f.innerHTML=X),u=L(y),p=T(y,"TBODY",{class:!0});var ae=I(p);for(let x=0;x<m.length;x+=1)m[x].l(ae);ae.forEach(A),y.forEach(A),v=L(k),B=T(k,"BUTTON",{});var le=I(B);q=se(le,"Add Sentence"),le.forEach(A),k.forEach(A),this.h()},h(){n.disabled=a=!t[1],w(n,"class","title svelte-3j1jom"),l.disabled=r=!t[1],w(l,"class","description svelte-3j1jom"),_.disabled=d=!t[1],w(f,"class","svelte-3j1jom"),w(p,"class","svelte-3j1jom"),w(C,"class","deck-table svelte-3j1jom"),B.disabled=F=!t[1],w(e,"class","container svelte-3j1jom")},m(g,k){Y(g,e,k),c(e,n),K(n,t[0].name),c(e,s),c(e,l),K(l,t[0].description),c(e,i),c(e,_),c(_,D),c(e,S),c(e,C),c(C,h),c(C,U),c(C,f),c(C,u),c(C,p);for(let N=0;N<m.length;N+=1)m[N]&&m[N].m(p,null);c(e,v),c(e,B),c(B,q),H=!0,o||(b=[V(n,"input",t[9]),V(l,"input",t[10]),V(_,"click",t[2]),V(B,"click",t[7])],o=!0)},p(g,[k]){if((!H||k&2&&a!==(a=!g[1]))&&(n.disabled=a),k&1&&n.value!==g[0].name&&K(n,g[0].name),(!H||k&2&&r!==(r=!g[1]))&&(l.disabled=r),k&1&&l.value!==g[0].description&&K(l,g[0].description),(!H||k&2&&d!==(d=!g[1]))&&(_.disabled=d),k&379){G=de(g[0].sentences);let N;for(N=0;N<G.length;N+=1){const y=Ae(g,G,N);m[N]?(m[N].p(y,k),z(m[N],1)):(m[N]=Se(y),m[N].c(),z(m[N],1),m[N].m(p,null))}for(Oe(),N=G.length;N<m.length;N+=1)$(N);Ue()}(!H||k&2&&F!==(F=!g[1]))&&(B.disabled=F)},i(g){if(!H){for(let k=0;k<G.length;k+=1)z(m[k]);H=!0}},o(g){m=m.filter(Boolean);for(let k=0;k<m.length;k+=1)Q(m[k]);H=!1},d(g){g&&A(e),Me(m,g),o=!1,_e(b)}}}const Ce=t=>"#94f77e";function xe(t,e,n){let{editable:a=!1}=e,{deck:s}=e;const l=Re(),r=o=>l("message",{deck:o}),i=()=>{l("delete")},_=(o,b)=>{const G=qe(Ke(o));n(0,s.sentences[b].raw=G,s),n(0,s.sentences[b]=M(G,s.sentences[b]),s)},D=(o,b)=>{n(0,s.sentences[b].translation=o,s)},d=(o,b)=>{n(0,s.sentences[b].note=o,s)},S=(o,b)=>{n(0,s.sentences[b].hint=o,s)},C=()=>{const o={...s,sentences:[...s.sentences,He]};r(o)},h=o=>{const b={...s,sentences:s.sentences.filter((G,m)=>m!==o)};r(b)},M=(o,b)=>{const G=ye(o);return{...b,reading:G.reading,furigana:G.furigana}};function U(){s.name=this.value,n(0,s)}function f(){s.description=this.value,n(0,s)}const X=(o,b)=>_(b.detail,o);function u(o,b){o[b].translation=this.value,n(0,s)}const p=(o,b)=>D(b.target.value,o);function v(o,b){o[b].note=this.value,n(0,s)}const B=(o,b)=>d(b.target.value,o);function q(o,b){o[b].hint=this.value,n(0,s)}const F=(o,b)=>S(b.target.value,o),H=o=>h(o);return t.$$set=o=>{"editable"in o&&n(1,a=o.editable),"deck"in o&&n(0,s=o.deck)},[s,a,i,_,D,d,S,C,h,U,f,X,u,p,v,B,q,F,H]}class et extends he{constructor(e){super(),pe(this,e,xe,$e,fe,{editable:1,deck:0})}}function Be(t,e,n){const a=t.slice();return a[7]=e[n],a[9]=n,a}function Ne(t){let e,n,a;function s(...r){return t[5](t[9],...r)}function l(...r){return t[6](t[9],...r)}return e=new et({props:{deck:t[7],editable:!0}}),e.$on("message",s),e.$on("delete",l),{c(){n=j("div"),re(e.$$.fragment),this.h()},l(r){n=T(r,"DIV",{style:!0});var i=I(n);oe(e.$$.fragment,i),this.h()},h(){J(n,"display","contents"),J(n,"--border-color","#22221f"),J(n,"--deck-color","#22221f"),J(n,"--background-color","#2c2b29")},m(r,i){Y(r,n,i),ie(e,n,null),a=!0},p(r,i){t=r;const _={};i&1&&(_.deck=t[7]),e.$set(_)},i(r){a||(z(e.$$.fragment,r),a=!0)},o(r){Q(e.$$.fragment,r),a=!1},d(r){r&&e&&A(n),ce(e,r)}}}function tt(t){let e,n,a="Decks",s,l,r="Add Deck",i,_,D="Save Decks",d,S,C,h,M,U=de(t[0]),f=[];for(let u=0;u<U.length;u+=1)f[u]=Ne(Be(t,U,u));const X=u=>Q(f[u],1,1,()=>{f[u]=null});return{c(){e=j("div"),n=j("h1"),n.textContent=a,s=P(),l=j("button"),l.textContent=r,i=P(),_=j("button"),_.textContent=D,d=P(),S=j("div");for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=T(u,"DIV",{class:!0});var p=I(e);n=T(p,"H1",{"data-svelte-h":!0}),Z(n)!=="svelte-1txjx0s"&&(n.textContent=a),s=L(p),l=T(p,"BUTTON",{"data-svelte-h":!0}),Z(l)!=="svelte-dfk3og"&&(l.textContent=r),i=L(p),_=T(p,"BUTTON",{"data-svelte-h":!0}),Z(_)!=="svelte-fajpc"&&(_.textContent=D),d=L(p),S=T(p,"DIV",{class:!0});var v=I(S);for(let B=0;B<f.length;B+=1)f[B].l(v);v.forEach(A),p.forEach(A),this.h()},h(){w(S,"class","decks"),w(e,"class","container")},m(u,p){Y(u,e,p),c(e,n),c(e,s),c(e,l),c(e,i),c(e,_),c(e,d),c(e,S);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(S,null);C=!0,h||(M=[V(l,"click",t[1]),V(_,"click",t[2])],h=!0)},p(u,[p]){if(p&25){U=de(u[0]);let v;for(v=0;v<U.length;v+=1){const B=Be(u,U,v);f[v]?(f[v].p(B,p),z(f[v],1)):(f[v]=Ne(B),f[v].c(),z(f[v],1),f[v].m(S,null))}for(Oe(),v=U.length;v<f.length;v+=1)X(v);Ue()}},i(u){if(!C){for(let p=0;p<U.length;p+=1)z(f[p]);C=!0}},o(u){f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)Q(f[p]);C=!1},d(u){u&&A(e),Me(f,u),h=!1,_e(M)}}}function nt(t,e,n){let{decks:a=[]}=e;const s=()=>{n(0,a=[...a,Fe])},l=()=>{localStorage.setItem("decks",JSON.stringify(a))},r=d=>{n(0,a=a.filter((S,C)=>C!==d))},i=(d,S)=>{n(0,a[S]=d,a)};Ie(()=>{const d=localStorage.getItem("decks");n(0,a=d?JSON.parse(d):[]),console.log(a)});const _=(d,S)=>i(S.detail.deck,d),D=(d,S)=>r(d);return t.$$set=d=>{"decks"in d&&n(0,a=d.decks)},[a,s,l,r,i,_,D]}class it extends he{constructor(e){super(),pe(this,e,nt,tt,fe,{decks:0})}}export{it as component};
