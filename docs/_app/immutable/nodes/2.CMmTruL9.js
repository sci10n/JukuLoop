import{S as ie,s as K,e as b,t as L,d as D,f as P,h as M,i as h,w as re,v as w,k as v,l as E,m as R,E as Ve,T as te,b as T,p as A,j as U,r as se,U as H,x as Se,V as ae,W as Te,X as Ue,Y as oe,Z as Le,_ as Me}from"../chunks/scheduler.BGfZ2OPz.js";import{S as Q,i as $,f as fe,t as V,g as O,a as q,c as Z,b as W,d as X,m as Y,e as B,h as Re}from"../chunks/index.CBGtRaXf.js";import{s as ce,a as ue,S as je,p as ee,c as Ae,C as He,b as Fe,d as Oe,N as Ze,e as de,f as We}from"../chunks/crud.3eonXhL3.js";import{b as ze}from"../chunks/paths.BIyN5MlR.js";function Xe(i){const e=i-1;return e*e*e+1}function _e(i,{delay:e=0,duration:t=400,easing:s=Xe,x:n=0,y:r=0,opacity:l=0}={}){const a=getComputedStyle(i),u=+a.opacity,c=a.transform==="none"?"":a.transform,f=u*(1-l),[o,d]=ie(n),[_,I]=ie(r);return{delay:e,duration:t,easing:s,css:(S,k)=>`
			transform: ${c} translate(${(1-S)*o}${d}, ${(1-S)*_}${I});
			opacity: ${u-f*k}`}}function Ye(i){let e,t,s=ce(i[0])+"",n,r,l;return{c(){e=b("div"),t=b("p"),n=L(s),this.h()},l(a){e=D(a,"DIV",{class:!0});var u=P(e);t=D(u,"P",{style:!0});var c=P(t);n=M(c,s),c.forEach(h),u.forEach(h),this.h()},h(){re(t,"color",ue(i[0])),w(e,"class","popup svelte-78kmxn")},m(a,u){v(a,e,u),E(e,t),E(t,n),l=!0},p(a,[u]){i=a,(!l||u&1)&&s!==(s=ce(i[0])+"")&&R(n,s),(!l||u&1)&&re(t,"color",ue(i[0]))},i(a){l||(a&&Ve(()=>{l&&(r||(r=fe(e,_e,i[1]?{y:50}:{y:-50},!0)),r.run(1))}),l=!0)},o(a){a&&(r||(r=fe(e,_e,i[1]?{y:50}:{y:-50},!1)),r.run(0)),l=!1},d(a){a&&h(e),a&&r&&r.end()}}}function Be(i,e,t){const s=te();let{stage:n}=e,{animateUp:r=!1}=e;return setTimeout(()=>{s("hide")},1e3),i.$$set=a=>{"stage"in a&&t(0,n=a.stage),"animateUp"in a&&t(1,r=a.animateUp)},[n,r]}class Ge extends Q{constructor(e){super(),$(this,e,Be,Ye,K,{stage:0,animateUp:1})}}const Je=i=>{const e=[];for(let t=0;t<i.reading.length;t++)e.push({reading:i.reading[t],furigana:i.furigana[t],optional:i.optional[t],cluster:i.optionalCluster[t]});return e};je.Apprentice1;function he(i){let e,t="No sentences to review",s,n,r="Try adding some sentences to the deck or select a different deck";return{c(){e=b("h1"),e.textContent=t,s=T(),n=b("p"),n.textContent=r,this.h()},l(l){e=D(l,"H1",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1bxwpcq"&&(e.textContent=t),s=U(l),n=D(l,"P",{class:!0,"data-svelte-h":!0}),H(n)!=="svelte-eiv2gi"&&(n.textContent=r),this.h()},h(){w(e,"class","svelte-7ukrcz"),w(n,"class","centered svelte-7ukrcz")},m(l,a){v(l,e,a),v(l,s,a),v(l,n,a)},d(l){l&&(h(e),h(s),h(n))}}}function pe(i){let e,t=i[1].translation+"",s,n,r,l,a=i[1].hint+"",u,c,f,o,d,_,I,S,k,m=i[5]&&me(i),z=i[4]&&ve(i),C=i[3]&&ke(i);return{c(){e=b("h1"),s=L(t),n=T(),r=b("div"),l=b("p"),u=L(a),c=T(),m&&m.c(),f=T(),o=b("div"),d=b("input"),_=T(),z&&z.c(),I=T(),C&&C.c(),S=A(),this.h()},l(p){e=D(p,"H1",{class:!0});var g=P(e);s=M(g,t),g.forEach(h),n=U(p),r=D(p,"DIV",{class:!0});var G=P(r);l=D(G,"P",{class:!0});var F=P(l);u=M(F,a),F.forEach(h),G.forEach(h),c=U(p),m&&m.l(p),f=U(p),o=D(p,"DIV",{class:!0});var J=P(o);d=D(J,"INPUT",{type:!0,class:!0}),J.forEach(h),_=U(p),z&&z.l(p),I=U(p),C&&C.l(p),S=A(),this.h()},h(){w(e,"class","svelte-7ukrcz"),w(l,"class","svelte-7ukrcz"),w(r,"class","hint-container svelte-7ukrcz"),w(d,"type","text"),w(d,"class","svelte-7ukrcz"),w(o,"class","input-container svelte-7ukrcz")},m(p,g){v(p,e,g),E(e,s),v(p,n,g),v(p,r,g),E(r,l),E(l,u),v(p,c,g),m&&m.m(p,g),v(p,f,g),v(p,o,g),E(o,d),i[14](d),v(p,_,g),z&&z.m(p,g),v(p,I,g),C&&C.m(p,g),v(p,S,g),k=!0},p(p,g){(!k||g&2)&&t!==(t=p[1].translation+"")&&R(s,t),(!k||g&2)&&a!==(a=p[1].hint+"")&&R(u,a),p[5]?m?(m.p(p,g),g&32&&V(m,1)):(m=me(p),m.c(),V(m,1),m.m(f.parentNode,f)):m&&(O(),q(m,1,1,()=>{m=null}),Z()),p[4]?z?z.p(p,g):(z=ve(p),z.c(),z.m(I.parentNode,I)):z&&(z.d(1),z=null),p[3]?C?(C.p(p,g),g&8&&V(C,1)):(C=ke(p),C.c(),V(C,1),C.m(S.parentNode,S)):C&&(O(),q(C,1,1,()=>{C=null}),Z())},i(p){k||(V(m),V(C),k=!0)},o(p){q(m),q(C),k=!1},d(p){p&&(h(e),h(n),h(r),h(c),h(f),h(o),h(_),h(I),h(S)),m&&m.d(p),i[14](null),z&&z.d(p),C&&C.d(p)}}}function me(i){let e,t;return e=new Ge({props:{stage:i[6],animateUp:i[6]>i[7]}}),e.$on("hide",i[13]),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){Y(e,s,n),t=!0},p(s,n){const r={};n&64&&(r.stage=s[6]),n&192&&(r.animateUp=s[6]>s[7]),e.$set(r)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){B(e,s)}}}function ve(i){let e,t;return{c(){e=b("div"),t=L(i[4]),this.h()},l(s){e=D(s,"DIV",{class:!0});var n=P(e);t=M(n,i[4]),n.forEach(h),this.h()},h(){w(e,"class","notification svelte-7ukrcz")},m(s,n){v(s,e,n),E(e,t)},p(s,n){n&16&&R(t,s[4])},d(s){s&&h(e)}}}function ke(i){let e,t,s,n,r,l=i[1]&&ge(i),a=i[1].note&&we(i),u=i[2]&&be(i);return{c(){e=b("div"),l&&l.c(),t=T(),a&&a.c(),s=T(),n=b("div"),u&&u.c(),this.h()},l(c){e=D(c,"DIV",{class:!0});var f=P(e);l&&l.l(f),f.forEach(h),t=U(c),a&&a.l(c),s=U(c),n=D(c,"DIV",{class:!0});var o=P(n);u&&u.l(o),o.forEach(h),this.h()},h(){w(e,"class","sentence-container svelte-7ukrcz"),w(n,"class","result-container svelte-7ukrcz")},m(c,f){v(c,e,f),l&&l.m(e,null),v(c,t,f),a&&a.m(c,f),v(c,s,f),v(c,n,f),u&&u.m(n,null),r=!0},p(c,f){c[1]?l?(l.p(c,f),f&2&&V(l,1)):(l=ge(c),l.c(),V(l,1),l.m(e,null)):l&&(O(),q(l,1,1,()=>{l=null}),Z()),c[1].note?a?a.p(c,f):(a=we(c),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),c[2]?u?u.p(c,f):(u=be(c),u.c(),u.m(n,null)):u&&(u.d(1),u=null)},i(c){r||(V(l),r=!0)},o(c){q(l),r=!1},d(c){c&&(h(e),h(t),h(s),h(n)),l&&l.d(),a&&a.d(c),u&&u.d()}}}function ge(i){let e,t;return e=new He({props:{readings:i[1].reading,furigana:i[1].furigana,colors:i[8]}}),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){Y(e,s,n),t=!0},p(s,n){const r={};n&2&&(r.readings=s[1].reading),n&2&&(r.furigana=s[1].furigana),n&256&&(r.colors=s[8]),e.$set(r)},i(s){t||(V(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){B(e,s)}}}function we(i){let e,t,s=i[1].note+"",n;return{c(){e=b("div"),t=b("p"),n=L(s),this.h()},l(r){e=D(r,"DIV",{class:!0});var l=P(e);t=D(l,"P",{class:!0});var a=P(t);n=M(a,s),a.forEach(h),l.forEach(h),this.h()},h(){w(t,"class","svelte-7ukrcz"),w(e,"class","note-container svelte-7ukrcz")},m(r,l){v(r,e,l),E(e,t),E(t,n)},p(r,l){l&2&&s!==(s=r[1].note+"")&&R(n,s)},d(r){r&&h(e)}}}function be(i){let e;function t(r,l){return r[2].answerCorrect?Qe:Ke}let s=t(i),n=s(i);return{c(){n.c(),e=A()},l(r){n.l(r),e=A()},m(r,l){n.m(r,l),v(r,e,l)},p(r,l){s!==(s=t(r))&&(n.d(1),n=s(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Ke(i){let e,t="Incorrect!";return{c(){e=b("p"),e.textContent=t,this.h()},l(s){e=D(s,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1fqq2sa"&&(e.textContent=t),this.h()},h(){w(e,"class","incorrect svelte-7ukrcz")},m(s,n){v(s,e,n)},d(s){s&&h(e)}}}function Qe(i){let e,t="Correct!";return{c(){e=b("p"),e.textContent=t,this.h()},l(s){e=D(s,"P",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-cw2fzg"&&(e.textContent=t),this.h()},h(){w(e,"class","correct svelte-7ukrcz")},m(s,n){v(s,e,n)},d(s){s&&h(e)}}}function $e(i){let e,t,s,n=i[1]===null&&he(),r=i[1]&&pe(i);return{c(){n&&n.c(),e=T(),r&&r.c(),t=A()},l(l){n&&n.l(l),e=U(l),r&&r.l(l),t=A()},m(l,a){n&&n.m(l,a),v(l,e,a),r&&r.m(l,a),v(l,t,a),s=!0},p(l,[a]){l[1]===null?n||(n=he(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l[1]?r?(r.p(l,a),a&2&&V(r,1)):(r=pe(l),r.c(),V(r,1),r.m(t.parentNode,t)):r&&(O(),q(r,1,1,()=>{r=null}),Z())},i(l){s||(V(r),s=!0)},o(l){q(r),s=!1},d(l){l&&(h(e),h(t)),n&&n.d(l),r&&r.d(l)}}}function xe(i,e,t){let s,n,r,l,a,{storage:u}=e,{selectedDeck:c}=e;const f=te();let o,d="",_=!1,I=!1,S="",k=!1,m,z,C=!1;const p=()=>{if(n.length>0){if(n=s?ee(s):[],console.log("Number of sentences: "+n.length),n.length===0){t(1,N=null);return}t(1,N=n[Math.floor(Math.random()*n.length)])}F()},g=()=>{t(11,d=""),o&&t(0,o.value="",o),t(3,_=!1)},G=()=>{t(3,_=!0);const y=N==null?void 0:N.srs;if(y&&!C){const j=Fe(y,l);t(6,m=j.stage),t(7,z=y.stage),t(5,k=!0),f("srs",{sentence:N,srs:j})}},F=()=>{o&&o.focus()},J=y=>{if(y===""){I=!0,t(4,S="Input cannot be empty!");return}I=/[a-zA-Z0-9]/.test(y),t(4,S=I?"Invalid characters in input!":"")};let N=null;const Pe=(y,j)=>{let x=j.reading.map(()=>"black");return y.forEach((le,ne)=>{le===!0&&(x[ne]=" #94f77e"),le===!1&&(x[ne]="#f25f44")}),x};se(()=>{p(),window.addEventListener("keydown",y=>{if(y.key==="Enter"){if(J(d),I)return;c&&N&&_?(g(),p()):G()}})});const Ne=()=>t(5,k=!1);function qe(y){Se[y?"unshift":"push"](()=>{o=y,t(0,o)})}return i.$$set=y=>{"storage"in y&&t(9,u=y.storage),"selectedDeck"in y&&t(10,c=y.selectedDeck)},i.$$.update=()=>{i.$$.dirty&1536&&t(12,s=u&&c&&u.getSentencesForDeck(c.id)),i.$$.dirty&4096&&(n=s?ee(s):[]),i.$$.dirty&1024&&c&&p(),i.$$.dirty&2&&N&&(C=!1),i.$$.dirty&1&&o&&(t(0,o.value="",o),o&&Oe(o),o.addEventListener("input",y=>{t(11,d=y.target.value.split("").filter(j=>j!==" ").join(""))}),F()),i.$$.dirty&2050&&t(2,r=d&&N&&Ae(d,N,Je(N))),i.$$.dirty&4&&(l=r&&r.answerCorrect),i.$$.dirty&2054&&t(8,a=N&&d&&N&&Pe(r.readingCorrectness,N))},[o,N,r,_,S,k,m,z,a,u,c,d,s,Ne,qe]}class et extends Q{constructor(e){super(),$(this,e,xe,$e,K,{storage:9,selectedDeck:10})}}function De(i,e,t){const s=i.slice();return s[13]=e[t],s[15]=t,s}function Ce(i){let e,t=`No decks found. <a href="${ze}/edit">Create a deck</a>`;return{c(){e=b("h1"),e.innerHTML=t,this.h()},l(s){e=D(s,"H1",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1qavf9u"&&(e.innerHTML=t),this.h()},h(){w(e,"class","svelte-1rqg1h6")},m(s,n){v(s,e,n)},d(s){s&&h(e)}}}function Ee(i){let e,t,s="Choose a deck",n,r,l,a,u,c=de(i[0]),f=[];for(let o=0;o<c.length;o+=1)f[o]=Ie(De(i,c,o));return{c(){e=b("div"),t=b("h1"),t.textContent=s,n=T(),r=b("form"),l=b("select");for(let o=0;o<f.length;o+=1)f[o].c();this.h()},l(o){e=D(o,"DIV",{class:!0});var d=P(e);t=D(d,"H1",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-1mswgjr"&&(t.textContent=s),n=U(d),r=D(d,"FORM",{});var _=P(r);l=D(_,"SELECT",{name:!0,id:!0,class:!0});var I=P(l);for(let S=0;S<f.length;S+=1)f[S].l(I);I.forEach(h),_.forEach(h),d.forEach(h),this.h()},h(){w(t,"class","svelte-1rqg1h6"),w(l,"name","decks"),w(l,"id","decks"),w(l,"class","svelte-1rqg1h6"),i[2]===void 0&&Ve(()=>i[10].call(l)),w(e,"class","pick-decks-container svelte-1rqg1h6")},m(o,d){v(o,e,d),E(e,t),E(e,n),E(e,r),E(r,l);for(let _=0;_<f.length;_+=1)f[_]&&f[_].m(l,null);ae(l,i[2],!0),a||(u=Te(l,"change",i[10]),a=!0)},p(o,d){if(d&193){c=de(o[0]);let _;for(_=0;_<c.length;_+=1){const I=De(o,c,_);f[_]?f[_].p(I,d):(f[_]=Ie(I),f[_].c(),f[_].m(l,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=c.length}d&5&&ae(l,o[2])},d(o){o&&h(e),Ue(f,o),a=!1,u()}}}function Ie(i){let e,t=i[13].name+"",s,n,r=i[7][i[15]]+"",l,a,u=i[6][i[15]]+"",c,f,o;return{c(){e=b("option"),s=L(t),n=L("  ("),l=L(r),a=L("/"),c=L(u),f=L(")"),this.h()},l(d){e=D(d,"OPTION",{});var _=P(e);s=M(_,t),n=M(_,"  ("),l=M(_,r),a=M(_,"/"),c=M(_,u),f=M(_,")"),_.forEach(h),this.h()},h(){e.__value=o=i[13],oe(e,e.__value)},m(d,_){v(d,e,_),E(e,s),E(e,n),E(e,l),E(e,a),E(e,c),E(e,f)},p(d,_){_&1&&t!==(t=d[13].name+"")&&R(s,t),_&128&&r!==(r=d[7][d[15]]+"")&&R(l,r),_&64&&u!==(u=d[6][d[15]]+"")&&R(c,u),_&1&&o!==(o=d[13])&&(e.__value=o,oe(e,e.__value))},d(d){d&&h(e)}}}function ye(i){let e,t,s;function n(l){i[11](l)}let r={storage:i[1]};return i[2]!==void 0&&(r.selectedDeck=i[2]),e=new et({props:r}),Se.push(()=>Re(e,"selectedDeck",n)),{c(){W(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){Y(e,l,a),s=!0},p(l,a){const u={};a&2&&(u.storage=l[1]),!t&&a&4&&(t=!0,u.selectedDeck=l[2],Le(()=>t=!1)),e.$set(u)},i(l){s||(V(e.$$.fragment,l),s=!0)},o(l){q(e.$$.fragment,l),s=!1},d(l){B(e,l)}}}function tt(i){let e,t,s,n,r,l,a,u=i[5]&&Ce(),c=i[4]&&Ee(i),f=i[3]&&i[2]&&ye(i);return l=new Ze({props:{view:[{to:" ",label:" ",active:!1},{to:"decks",label:"Edit Decks",active:!0}]}}),l.$on("navigate",i[12]),{c(){e=b("div"),t=b("div"),u&&u.c(),s=T(),c&&c.c(),n=T(),f&&f.c(),r=T(),W(l.$$.fragment),this.h()},l(o){e=D(o,"DIV",{class:!0});var d=P(e);t=D(d,"DIV",{class:!0});var _=P(t);u&&u.l(_),s=U(_),c&&c.l(_),n=U(_),f&&f.l(_),_.forEach(h),d.forEach(h),r=U(o),X(l.$$.fragment,o),this.h()},h(){w(t,"class","container svelte-1rqg1h6"),w(e,"class","page")},m(o,d){v(o,e,d),E(e,t),u&&u.m(t,null),E(t,s),c&&c.m(t,null),E(t,n),f&&f.m(t,null),v(o,r,d),Y(l,o,d),a=!0},p(o,[d]){o[5]?u||(u=Ce(),u.c(),u.m(t,s)):u&&(u.d(1),u=null),o[4]?c?c.p(o,d):(c=Ee(o),c.c(),c.m(t,n)):c&&(c.d(1),c=null),o[3]&&o[2]?f?(f.p(o,d),d&12&&V(f,1)):(f=ye(o),f.c(),V(f,1),f.m(t,null)):f&&(O(),q(f,1,1,()=>{f=null}),Z())},i(o){a||(V(f),V(l.$$.fragment,o),a=!0)},o(o){q(f),q(l.$$.fragment,o),a=!1},d(o){o&&(h(e),h(r)),u&&u.d(),c&&c.d(),f&&f.d(),B(l,o)}}}function st(i,e,t){let s,n,r,l,a,u;const c=te();let{decks:f=[]}=e,{storage:o}=e,d=null;se(()=>{});function _(){d=Me(this),t(2,d),t(0,f)}function I(k){d=k,t(2,d)}const S=k=>{const m=k.detail.to;m==="review"||m==="decks"&&c("navigate",{to:m})};return i.$$set=k=>{"decks"in k&&t(0,f=k.decks),"storage"in k&&t(1,o=k.storage)},i.$$.update=()=>{i.$$.dirty&5&&f&&(console.log("Deck",f),console.log("Selected Deck",d)),i.$$.dirty&3&&t(9,s=f&&o&&f.map(k=>o.getSentencesForDeck(k.id))),i.$$.dirty&513&&t(7,n=f.map((k,m)=>ee(s[m]).length)),i.$$.dirty&513&&t(6,r=f.map((k,m)=>s[m].length)),i.$$.dirty&1&&t(5,l=f.length===0),i.$$.dirty&5&&t(4,a=f.length>0&&!d),i.$$.dirty&4&&t(3,u=d)},[f,o,d,u,a,l,r,n,c,s,_,I,S]}class lt extends Q{constructor(e){super(),$(this,e,st,tt,K,{decks:0,storage:1})}}function nt(i){let e,t,s;return t=new lt({props:{storage:i[0],decks:i[1]}}),t.$on("navigate",i[3]),{c(){e=b("div"),W(t.$$.fragment),this.h()},l(n){e=D(n,"DIV",{class:!0});var r=P(e);X(t.$$.fragment,r),r.forEach(h),this.h()},h(){w(e,"class","container svelte-1365wnv")},m(n,r){v(n,e,r),Y(t,e,null),s=!0},p(n,[r]){const l={};r&1&&(l.storage=n[0]),r&2&&(l.decks=n[1]),t.$set(l)},i(n){s||(V(t.$$.fragment,n),s=!0)},o(n){q(t.$$.fragment,n),s=!1},d(n){n&&h(e),B(t)}}}function it(i,e,t){let s,n=[],r="review";const l=u=>{r=u,r!=="review"&&window&&(window.location.href=`${ze}/edit`)};return se(()=>{t(0,s=We()),t(1,n=s.getDecks()),console.log(n)}),[s,n,l,u=>{const c=u.detail.to;l(c)}]}class ct extends Q{constructor(e){super(),$(this,e,it,nt,K,{})}}export{ct as component};
