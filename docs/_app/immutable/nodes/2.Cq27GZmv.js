import{S as ie,s as K,e as w,t as L,d as b,f as P,h as R,i as h,w as re,v as g,k as v,l as I,m as j,E as ye,T as te,b as q,p as M,j as T,r as se,U as O,x as Ve,V as ae,W as Ne,X as Ue,Y as oe,Z as qe,_ as Te}from"../chunks/scheduler.BGfZ2OPz.js";import{S as Q,i as $,f as ce,t as S,g as H,a as U,c as Z,b as W,d as X,m as Y,e as B,h as Le}from"../chunks/index.CBGtRaXf.js";import{s as fe,a as ue,S as Re,p as ee,c as je,C as Ae,b as Me,d as Fe,N as Oe,e as de,f as He}from"../chunks/crud.3eonXhL3.js";import{b as Ze}from"../chunks/paths.BpLXwe-_.js";function We(r){const e=r-1;return e*e*e+1}function _e(r,{delay:e=0,duration:t=400,easing:s=We,x:n=0,y:i=0,opacity:l=0}={}){const a=getComputedStyle(r),c=+a.opacity,o=a.transform==="none"?"":a.transform,u=c*(1-l),[f,p]=ie(n),[d,E]=ie(i);return{delay:e,duration:t,easing:s,css:(m,y)=>`
			transform: ${o} translate(${(1-m)*f}${p}, ${(1-m)*d}${E});
			opacity: ${c-u*y}`}}function Xe(r){let e,t,s=fe(r[0])+"",n,i,l;return{c(){e=w("div"),t=w("p"),n=L(s),this.h()},l(a){e=b(a,"DIV",{class:!0});var c=P(e);t=b(c,"P",{style:!0});var o=P(t);n=R(o,s),o.forEach(h),c.forEach(h),this.h()},h(){re(t,"color",ue(r[0])),g(e,"class","popup svelte-78kmxn")},m(a,c){v(a,e,c),I(e,t),I(t,n),l=!0},p(a,[c]){r=a,(!l||c&1)&&s!==(s=fe(r[0])+"")&&j(n,s),(!l||c&1)&&re(t,"color",ue(r[0]))},i(a){l||(a&&ye(()=>{l&&(i||(i=ce(e,_e,r[1]?{y:50}:{y:-50},!0)),i.run(1))}),l=!0)},o(a){a&&(i||(i=ce(e,_e,r[1]?{y:50}:{y:-50},!1)),i.run(0)),l=!1},d(a){a&&h(e),a&&i&&i.end()}}}function Ye(r,e,t){const s=te();let{stage:n}=e,{animateUp:i=!1}=e;return setTimeout(()=>{s("hide")},1e3),r.$$set=a=>{"stage"in a&&t(0,n=a.stage),"animateUp"in a&&t(1,i=a.animateUp)},[n,i]}class Be extends Q{constructor(e){super(),$(this,e,Ye,Xe,K,{stage:0,animateUp:1})}}const Ge=r=>{const e=[];for(let t=0;t<r.reading.length;t++)e.push({reading:r.reading[t],furigana:r.furigana[t],optional:r.optional[t],cluster:r.optionalCluster[t]});return e};Re.Apprentice1;function he(r){let e,t="No sentences to review",s,n,i="Try adding some sentences to the deck or select a different deck";return{c(){e=w("h1"),e.textContent=t,s=q(),n=w("p"),n.textContent=i,this.h()},l(l){e=b(l,"H1",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1bxwpcq"&&(e.textContent=t),s=T(l),n=b(l,"P",{class:!0,"data-svelte-h":!0}),O(n)!=="svelte-eiv2gi"&&(n.textContent=i),this.h()},h(){g(e,"class","svelte-7ukrcz"),g(n,"class","centered svelte-7ukrcz")},m(l,a){v(l,e,a),v(l,s,a),v(l,n,a)},d(l){l&&(h(e),h(s),h(n))}}}function pe(r){let e,t=r[1].translation+"",s,n,i,l,a=r[1].hint+"",c,o,u,f,p,d,E,m,y,D=r[5]&&me(r),z=r[4]&&ve(r),C=r[3]&&ke(r);return{c(){e=w("h1"),s=L(t),n=q(),i=w("div"),l=w("p"),c=L(a),o=q(),D&&D.c(),u=q(),f=w("div"),p=w("input"),d=q(),z&&z.c(),E=q(),C&&C.c(),m=M(),this.h()},l(_){e=b(_,"H1",{class:!0});var k=P(e);s=R(k,t),k.forEach(h),n=T(_),i=b(_,"DIV",{class:!0});var G=P(i);l=b(G,"P",{class:!0});var F=P(l);c=R(F,a),F.forEach(h),G.forEach(h),o=T(_),D&&D.l(_),u=T(_),f=b(_,"DIV",{class:!0});var J=P(f);p=b(J,"INPUT",{type:!0,class:!0}),J.forEach(h),d=T(_),z&&z.l(_),E=T(_),C&&C.l(_),m=M(),this.h()},h(){g(e,"class","svelte-7ukrcz"),g(l,"class","svelte-7ukrcz"),g(i,"class","hint-container svelte-7ukrcz"),g(p,"type","text"),g(p,"class","svelte-7ukrcz"),g(f,"class","input-container svelte-7ukrcz")},m(_,k){v(_,e,k),I(e,s),v(_,n,k),v(_,i,k),I(i,l),I(l,c),v(_,o,k),D&&D.m(_,k),v(_,u,k),v(_,f,k),I(f,p),r[14](p),v(_,d,k),z&&z.m(_,k),v(_,E,k),C&&C.m(_,k),v(_,m,k),y=!0},p(_,k){(!y||k&2)&&t!==(t=_[1].translation+"")&&j(s,t),(!y||k&2)&&a!==(a=_[1].hint+"")&&j(c,a),_[5]?D?(D.p(_,k),k&32&&S(D,1)):(D=me(_),D.c(),S(D,1),D.m(u.parentNode,u)):D&&(H(),U(D,1,1,()=>{D=null}),Z()),_[4]?z?z.p(_,k):(z=ve(_),z.c(),z.m(E.parentNode,E)):z&&(z.d(1),z=null),_[3]?C?(C.p(_,k),k&8&&S(C,1)):(C=ke(_),C.c(),S(C,1),C.m(m.parentNode,m)):C&&(H(),U(C,1,1,()=>{C=null}),Z())},i(_){y||(S(D),S(C),y=!0)},o(_){U(D),U(C),y=!1},d(_){_&&(h(e),h(n),h(i),h(o),h(u),h(f),h(d),h(E),h(m)),D&&D.d(_),r[14](null),z&&z.d(_),C&&C.d(_)}}}function me(r){let e,t;return e=new Be({props:{stage:r[6],animateUp:r[6]>r[7]}}),e.$on("hide",r[13]),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){Y(e,s,n),t=!0},p(s,n){const i={};n&64&&(i.stage=s[6]),n&192&&(i.animateUp=s[6]>s[7]),e.$set(i)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){B(e,s)}}}function ve(r){let e,t;return{c(){e=w("div"),t=L(r[4]),this.h()},l(s){e=b(s,"DIV",{class:!0});var n=P(e);t=R(n,r[4]),n.forEach(h),this.h()},h(){g(e,"class","notification svelte-7ukrcz")},m(s,n){v(s,e,n),I(e,t)},p(s,n){n&16&&j(t,s[4])},d(s){s&&h(e)}}}function ke(r){let e,t,s,n,i,l=r[1]&&ge(r),a=r[1].note&&we(r),c=r[2]&&be(r);return{c(){e=w("div"),l&&l.c(),t=q(),a&&a.c(),s=q(),n=w("div"),c&&c.c(),this.h()},l(o){e=b(o,"DIV",{class:!0});var u=P(e);l&&l.l(u),u.forEach(h),t=T(o),a&&a.l(o),s=T(o),n=b(o,"DIV",{class:!0});var f=P(n);c&&c.l(f),f.forEach(h),this.h()},h(){g(e,"class","sentence-container svelte-7ukrcz"),g(n,"class","result-container svelte-7ukrcz")},m(o,u){v(o,e,u),l&&l.m(e,null),v(o,t,u),a&&a.m(o,u),v(o,s,u),v(o,n,u),c&&c.m(n,null),i=!0},p(o,u){o[1]?l?(l.p(o,u),u&2&&S(l,1)):(l=ge(o),l.c(),S(l,1),l.m(e,null)):l&&(H(),U(l,1,1,()=>{l=null}),Z()),o[1].note?a?a.p(o,u):(a=we(o),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null),o[2]?c?c.p(o,u):(c=be(o),c.c(),c.m(n,null)):c&&(c.d(1),c=null)},i(o){i||(S(l),i=!0)},o(o){U(l),i=!1},d(o){o&&(h(e),h(t),h(s),h(n)),l&&l.d(),a&&a.d(o),c&&c.d()}}}function ge(r){let e,t;return e=new Ae({props:{readings:r[1].reading,furigana:r[1].furigana,colors:r[8]}}),{c(){W(e.$$.fragment)},l(s){X(e.$$.fragment,s)},m(s,n){Y(e,s,n),t=!0},p(s,n){const i={};n&2&&(i.readings=s[1].reading),n&2&&(i.furigana=s[1].furigana),n&256&&(i.colors=s[8]),e.$set(i)},i(s){t||(S(e.$$.fragment,s),t=!0)},o(s){U(e.$$.fragment,s),t=!1},d(s){B(e,s)}}}function we(r){let e,t,s=r[1].note+"",n;return{c(){e=w("div"),t=w("p"),n=L(s),this.h()},l(i){e=b(i,"DIV",{class:!0});var l=P(e);t=b(l,"P",{class:!0});var a=P(t);n=R(a,s),a.forEach(h),l.forEach(h),this.h()},h(){g(t,"class","svelte-7ukrcz"),g(e,"class","note-container svelte-7ukrcz")},m(i,l){v(i,e,l),I(e,t),I(t,n)},p(i,l){l&2&&s!==(s=i[1].note+"")&&j(n,s)},d(i){i&&h(e)}}}function be(r){let e;function t(i,l){return i[2].answerCorrect?Ke:Je}let s=t(r),n=s(r);return{c(){n.c(),e=M()},l(i){n.l(i),e=M()},m(i,l){n.m(i,l),v(i,e,l)},p(i,l){s!==(s=t(i))&&(n.d(1),n=s(i),n&&(n.c(),n.m(e.parentNode,e)))},d(i){i&&h(e),n.d(i)}}}function Je(r){let e,t="Incorrect!";return{c(){e=w("p"),e.textContent=t,this.h()},l(s){e=b(s,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1fqq2sa"&&(e.textContent=t),this.h()},h(){g(e,"class","incorrect svelte-7ukrcz")},m(s,n){v(s,e,n)},d(s){s&&h(e)}}}function Ke(r){let e,t="Correct!";return{c(){e=w("p"),e.textContent=t,this.h()},l(s){e=b(s,"P",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-cw2fzg"&&(e.textContent=t),this.h()},h(){g(e,"class","correct svelte-7ukrcz")},m(s,n){v(s,e,n)},d(s){s&&h(e)}}}function Qe(r){let e,t,s,n=r[1]===null&&he(),i=r[1]&&pe(r);return{c(){n&&n.c(),e=q(),i&&i.c(),t=M()},l(l){n&&n.l(l),e=T(l),i&&i.l(l),t=M()},m(l,a){n&&n.m(l,a),v(l,e,a),i&&i.m(l,a),v(l,t,a),s=!0},p(l,[a]){l[1]===null?n||(n=he(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),l[1]?i?(i.p(l,a),a&2&&S(i,1)):(i=pe(l),i.c(),S(i,1),i.m(t.parentNode,t)):i&&(H(),U(i,1,1,()=>{i=null}),Z())},i(l){s||(S(i),s=!0)},o(l){U(i),s=!1},d(l){l&&(h(e),h(t)),n&&n.d(l),i&&i.d(l)}}}function $e(r,e,t){let s,n,i,l,a,{storage:c}=e,{selectedDeck:o}=e;const u=te();let f,p="",d=!1,E=!1,m="",y=!1,D,z,C=!1;const _=()=>{if(n.length>0){if(n=s?ee(s):[],console.log("Number of sentences: "+n.length),n.length===0){t(1,N=null);return}t(1,N=n[Math.floor(Math.random()*n.length)])}F()},k=()=>{t(11,p=""),f&&t(0,f.value="",f),t(3,d=!1)},G=()=>{t(3,d=!0);const V=N==null?void 0:N.srs;if(V&&!C){const A=Me(V,l);t(6,D=A.stage),t(7,z=V.stage),t(5,y=!0),u("srs",{sentence:N,srs:A})}},F=()=>{f&&f.focus()},J=V=>{if(V===""){E=!0,t(4,m="Input cannot be empty!");return}E=/[a-zA-Z0-9]/.test(V),t(4,m=E?"Invalid characters in input!":"")};let N=null;const Se=(V,A)=>{let x=A.reading.map(()=>"black");return V.forEach((le,ne)=>{le===!0&&(x[ne]=" #94f77e"),le===!1&&(x[ne]="#f25f44")}),x};se(()=>{_(),window.addEventListener("keydown",V=>{if(V.key==="Enter"){if(J(p),E)return;o&&N&&d?(k(),_()):G()}})});const ze=()=>t(5,y=!1);function Pe(V){Ve[V?"unshift":"push"](()=>{f=V,t(0,f)})}return r.$$set=V=>{"storage"in V&&t(9,c=V.storage),"selectedDeck"in V&&t(10,o=V.selectedDeck)},r.$$.update=()=>{r.$$.dirty&1536&&t(12,s=c&&o&&c.getSentencesForDeck(o.id)),r.$$.dirty&4096&&(n=s?ee(s):[]),r.$$.dirty&1024&&o&&_(),r.$$.dirty&2&&N&&(C=!1),r.$$.dirty&1&&f&&(t(0,f.value="",f),f&&Fe(f),f.addEventListener("input",V=>{t(11,p=V.target.value.split("").filter(A=>A!==" ").join(""))}),F()),r.$$.dirty&2050&&t(2,i=p&&N&&je(p,N,Ge(N))),r.$$.dirty&4&&(l=i&&i.answerCorrect),r.$$.dirty&2054&&t(8,a=N&&p&&N&&Se(i.readingCorrectness,N))},[f,N,i,d,m,y,D,z,a,c,o,p,s,ze,Pe]}class xe extends Q{constructor(e){super(),$(this,e,$e,Qe,K,{storage:9,selectedDeck:10})}}function De(r,e,t){const s=r.slice();return s[13]=e[t],s[15]=t,s}function Ce(r){let e,t,s="Choose a deck",n,i,l,a,c,o=de(r[0]),u=[];for(let f=0;f<o.length;f+=1)u[f]=Ee(De(r,o,f));return{c(){e=w("div"),t=w("h1"),t.textContent=s,n=q(),i=w("form"),l=w("select");for(let f=0;f<u.length;f+=1)u[f].c();this.h()},l(f){e=b(f,"DIV",{class:!0});var p=P(e);t=b(p,"H1",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1mswgjr"&&(t.textContent=s),n=T(p),i=b(p,"FORM",{});var d=P(i);l=b(d,"SELECT",{name:!0,id:!0,class:!0});var E=P(l);for(let m=0;m<u.length;m+=1)u[m].l(E);E.forEach(h),d.forEach(h),p.forEach(h),this.h()},h(){g(t,"class","svelte-1rqg1h6"),g(l,"name","decks"),g(l,"id","decks"),g(l,"class","svelte-1rqg1h6"),r[2]===void 0&&ye(()=>r[9].call(l)),g(e,"class","pick-decks-container svelte-1rqg1h6")},m(f,p){v(f,e,p),I(e,t),I(e,n),I(e,i),I(i,l);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(l,null);ae(l,r[2],!0),a||(c=Ne(l,"change",r[9]),a=!0)},p(f,p){if(p&97){o=de(f[0]);let d;for(d=0;d<o.length;d+=1){const E=De(f,o,d);u[d]?u[d].p(E,p):(u[d]=Ee(E),u[d].c(),u[d].m(l,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=o.length}p&5&&ae(l,f[2])},d(f){f&&h(e),Ue(u,f),a=!1,c()}}}function Ee(r){let e,t=r[13].name+"",s,n,i=r[6][r[15]]+"",l,a,c=r[5][r[15]]+"",o,u,f;return{c(){e=w("option"),s=L(t),n=L("  ("),l=L(i),a=L("/"),o=L(c),u=L(")"),this.h()},l(p){e=b(p,"OPTION",{});var d=P(e);s=R(d,t),n=R(d,"  ("),l=R(d,i),a=R(d,"/"),o=R(d,c),u=R(d,")"),d.forEach(h),this.h()},h(){e.__value=f=r[13],oe(e,e.__value)},m(p,d){v(p,e,d),I(e,s),I(e,n),I(e,l),I(e,a),I(e,o),I(e,u)},p(p,d){d&1&&t!==(t=p[13].name+"")&&j(s,t),d&64&&i!==(i=p[6][p[15]]+"")&&j(l,i),d&32&&c!==(c=p[5][p[15]]+"")&&j(o,c),d&1&&f!==(f=p[13])&&(e.__value=f,oe(e,e.__value))},d(p){p&&h(e)}}}function Ie(r){let e,t,s;function n(l){r[10](l)}let i={storage:r[1]};return r[2]!==void 0&&(i.selectedDeck=r[2]),e=new xe({props:i}),Ve.push(()=>Le(e,"selectedDeck",n)),{c(){W(e.$$.fragment)},l(l){X(e.$$.fragment,l)},m(l,a){Y(e,l,a),s=!0},p(l,a){const c={};a&2&&(c.storage=l[1]),!t&&a&4&&(t=!0,c.selectedDeck=l[2],qe(()=>t=!1)),e.$set(c)},i(l){s||(S(e.$$.fragment,l),s=!0)},o(l){U(e.$$.fragment,l),s=!1},d(l){B(e,l)}}}function et(r){let e,t,s,n,i,l,a=r[4]&&Ce(r),c=r[3]&&r[2]&&Ie(r);return i=new Oe({props:{view:[{to:" ",label:" ",active:!1},{to:"decks",label:"Edit Decks",active:!0}]}}),i.$on("navigate",r[11]),{c(){e=w("div"),t=w("div"),a&&a.c(),s=q(),c&&c.c(),n=q(),W(i.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0});var u=P(e);t=b(u,"DIV",{class:!0});var f=P(t);a&&a.l(f),s=T(f),c&&c.l(f),f.forEach(h),u.forEach(h),n=T(o),X(i.$$.fragment,o),this.h()},h(){g(t,"class","container svelte-1rqg1h6"),g(e,"class","page")},m(o,u){v(o,e,u),I(e,t),a&&a.m(t,null),I(t,s),c&&c.m(t,null),v(o,n,u),Y(i,o,u),l=!0},p(o,[u]){o[4]?a?a.p(o,u):(a=Ce(o),a.c(),a.m(t,s)):a&&(a.d(1),a=null),o[3]&&o[2]?c?(c.p(o,u),u&12&&S(c,1)):(c=Ie(o),c.c(),S(c,1),c.m(t,null)):c&&(H(),U(c,1,1,()=>{c=null}),Z())},i(o){l||(S(c),S(i.$$.fragment,o),l=!0)},o(o){U(c),U(i.$$.fragment,o),l=!1},d(o){o&&(h(e),h(n)),a&&a.d(),c&&c.d(),B(i,o)}}}function tt(r,e,t){let s,n,i,l,a;const c=te();let{decks:o=[]}=e,{storage:u}=e,f=null;se(()=>{});function p(){f=Te(this),t(2,f),t(0,o)}function d(m){f=m,t(2,f)}const E=m=>{const y=m.detail.to;y==="review"||y==="decks"&&c("navigate",{to:y})};return r.$$set=m=>{"decks"in m&&t(0,o=m.decks),"storage"in m&&t(1,u=m.storage)},r.$$.update=()=>{r.$$.dirty&5&&o&&(console.log("Deck",o),console.log("Selected Deck",f)),r.$$.dirty&3&&t(8,s=o&&u&&o.map(m=>u.getSentencesForDeck(m.id))),r.$$.dirty&257&&t(6,n=o.map((m,y)=>ee(s[y]).length)),r.$$.dirty&257&&t(5,i=o.map((m,y)=>s[y].length)),r.$$.dirty&1&&o.length,r.$$.dirty&5&&t(4,l=o.length>0&&!f),r.$$.dirty&4&&t(3,a=f)},[o,u,f,a,l,i,n,c,s,p,d,E]}class st extends Q{constructor(e){super(),$(this,e,tt,et,K,{decks:0,storage:1})}}function lt(r){let e,t,s;return t=new st({props:{storage:r[0],decks:r[1]}}),t.$on("navigate",r[3]),{c(){e=w("div"),W(t.$$.fragment),this.h()},l(n){e=b(n,"DIV",{class:!0});var i=P(e);X(t.$$.fragment,i),i.forEach(h),this.h()},h(){g(e,"class","container svelte-1365wnv")},m(n,i){v(n,e,i),Y(t,e,null),s=!0},p(n,[i]){const l={};i&1&&(l.storage=n[0]),i&2&&(l.decks=n[1]),t.$set(l)},i(n){s||(S(t.$$.fragment,n),s=!0)},o(n){U(t.$$.fragment,n),s=!1},d(n){n&&h(e),B(t)}}}function nt(r,e,t){let s,n=[],i="review";const l=c=>{i=c,i!=="review"&&window&&(window.location.href=`${Ze}/edit`)};return se(()=>{t(0,s=He()),t(1,n=s.getDecks()),console.log(n)}),[s,n,l,c=>{const o=c.detail.to;l(o)}]}class ct extends Q{constructor(e){super(),$(this,e,nt,lt,K,{})}}export{ct as component};
