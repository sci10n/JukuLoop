import{s as ft,n as lt,b as ht,o as pt,r as _t}from"../chunks/scheduler.BvLojk_z.js";import{S as vt,i as gt,e as F,s as J,c as T,m as Q,h as U,d as B,g as q,n as S,j as H,k as h,o as D,p as it,q as P,r as at,b as V,f as W,l as X}from"../chunks/index.BORNZebv.js";import{e as Y,t as mt}from"../chunks/index.BS81UHqu.js";import{w as wt}from"../chunks/index.BGTSHx9J.js";function Z(t){const n=/([\u3400-\u9FAF]+)[(（](.+?)[)）]|([^\u3400-\u9FAF]+)/g;let s=[],l=[],e;for(;(e=n.exec(t))!==null;)e[1]&&e[2]?(s.push(e[1]),l.push(e[2])):e[3]&&(s.push(e[3]),l.push(""));return{reading:s,furigana:l}}const bt="東京(とうきょう)は日本(にほん)の首都(しゅと)です。",St="私（わたし）は日本語（にほんご）を話（はな）します";console.log(Z(bt));console.log(Z(St));function rt(t,n,s){const l=t.slice();return l[20]=n[s],l[21]=n,l[22]=s,l}function st(t,n,s){const l=t.slice();return l[23]=n[s],l[25]=s,l}function Ft(t){let n=t[23]+"",s;return{c(){s=V(n)},l(l){s=W(l,n)},m(l,e){H(l,s,e)},p(l,e){e&1&&n!==(n=l[23]+"")&&X(s,n)},d(l){l&&q(s)}}}function Tt(t){let n,s=t[23]+"",l,e,r,_=t[20].furigana[t[25]]+"",g,c;return{c(){n=F("ruby"),l=V(s),e=J(),r=F("rt"),g=V(_),c=J(),this.h()},l(b){n=T(b,"RUBY",{class:!0});var p=B(n);l=W(p,s),e=U(p),r=T(p,"RT",{});var m=B(r);g=W(m,_),m.forEach(q),c=U(p),p.forEach(q),this.h()},h(){S(n,"class","svelte-dv2weq")},m(b,p){H(b,n,p),h(n,l),h(n,e),h(n,r),h(r,g),h(n,c)},p(b,p){p&1&&s!==(s=b[23]+"")&&X(l,s),p&1&&_!==(_=b[20].furigana[b[25]]+"")&&X(g,_)},d(b){b&&q(n)}}}function ut(t){let n;function s(r,_){return r[20].furigana[r[25]]?Tt:Ft}let l=s(t),e=l(t);return{c(){e.c(),n=at()},l(r){e.l(r),n=at()},m(r,_){e.m(r,_),H(r,n,_)},p(r,_){l===(l=s(r))&&e?e.p(r,_):(e.d(1),e=l(r),e&&(e.c(),e.m(n.parentNode,n)))},d(r){r&&q(n),e.d(r)}}}function ot(t){let n,s,l,e,r,_,g,c,b,p,m,O,f,u,k,i,N,R="Delete",j,L,$=Y(t[20].reading),y=[];for(let d=0;d<$.length;d+=1)y[d]=ut(st(t,$,d));function a(){t[8].call(r,t[21],t[22])}function o(...d){return t[9](t[20],...d)}function E(...d){return t[10](t[20],...d)}function C(){t[11].call(c,t[21],t[22])}function I(...d){return t[12](t[20],...d)}function M(){t[13].call(m,t[21],t[22])}function A(...d){return t[14](t[20],...d)}function K(){t[15].call(u,t[21],t[22])}function ct(...d){return t[16](t[20],...d)}function dt(){return t[17](t[20])}return{c(){n=F("tr"),s=F("td");for(let d=0;d<y.length;d+=1)y[d].c();l=J(),e=F("td"),r=F("input"),_=J(),g=F("td"),c=F("input"),b=J(),p=F("td"),m=F("input"),O=J(),f=F("td"),u=F("input"),k=J(),i=F("td"),N=F("button"),N.textContent=R,this.h()},l(d){n=T(d,"TR",{});var v=B(n);s=T(v,"TD",{class:!0});var w=B(s);for(let G=0;G<y.length;G+=1)y[G].l(w);w.forEach(q),l=U(v),e=T(v,"TD",{class:!0});var z=B(e);r=T(z,"INPUT",{type:!0,class:!0}),z.forEach(q),_=U(v),g=T(v,"TD",{class:!0});var x=B(g);c=T(x,"INPUT",{type:!0,class:!0}),x.forEach(q),b=U(v),p=T(v,"TD",{class:!0});var tt=B(p);m=T(tt,"INPUT",{type:!0,class:!0}),tt.forEach(q),O=U(v),f=T(v,"TD",{class:!0});var et=B(f);u=T(et,"INPUT",{type:!0,class:!0}),et.forEach(q),k=U(v),i=T(v,"TD",{class:!0});var nt=B(i);N=T(nt,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(N)!=="svelte-qy7xxg"&&(N.textContent=R),nt.forEach(q),v.forEach(q),this.h()},h(){S(s,"class","reading svelte-dv2weq"),S(r,"type","text"),S(r,"class","svelte-dv2weq"),S(e,"class","svelte-dv2weq"),S(c,"type","text"),S(c,"class","svelte-dv2weq"),S(g,"class","svelte-dv2weq"),S(m,"type","text"),S(m,"class","svelte-dv2weq"),S(p,"class","svelte-dv2weq"),S(u,"type","text"),S(u,"class","svelte-dv2weq"),S(f,"class","svelte-dv2weq"),S(N,"class","svelte-dv2weq"),S(i,"class","svelte-dv2weq")},m(d,v){H(d,n,v),h(n,s);for(let w=0;w<y.length;w+=1)y[w]&&y[w].m(s,null);h(n,l),h(n,e),h(e,r),P(r,t[20].raw),h(n,_),h(n,g),h(g,c),P(c,t[20].translation),h(n,b),h(n,p),h(p,m),P(m,t[20].note),h(n,O),h(n,f),h(f,u),P(u,t[20].hint),h(n,k),h(n,i),h(i,N),j||(L=[D(r,"input",a),D(r,"input",o),D(r,"blur",E),D(c,"input",C),D(c,"blur",I),D(m,"input",M),D(m,"blur",A),D(u,"input",K),D(u,"blur",ct),D(N,"click",dt)],j=!0)},p(d,v){if(t=d,v&1){$=Y(t[20].reading);let w;for(w=0;w<$.length;w+=1){const z=st(t,$,w);y[w]?y[w].p(z,v):(y[w]=ut(z),y[w].c(),y[w].m(s,null))}for(;w<y.length;w+=1)y[w].d(1);y.length=$.length}v&1&&r.value!==t[20].raw&&P(r,t[20].raw),v&1&&c.value!==t[20].translation&&P(c,t[20].translation),v&1&&m.value!==t[20].note&&P(m,t[20].note),v&1&&u.value!==t[20].hint&&P(u,t[20].hint)},d(d){d&&q(n),it(y,d),j=!1,_t(L)}}}function qt(t){let n,s="Stored Sentences",l,e,r,_,g,c,b="Add",p,m,O=Y(t[0]),f=[];for(let u=0;u<O.length;u+=1)f[u]=ot(rt(t,O,u));return{c(){n=F("h2"),n.textContent=s,l=J(),e=F("table");for(let u=0;u<f.length;u+=1)f[u].c();r=J(),_=F("tr"),g=F("td"),c=F("button"),c.textContent=b,this.h()},l(u){n=T(u,"H2",{"data-svelte-h":!0}),Q(n)!=="svelte-1j8t86n"&&(n.textContent=s),l=U(u),e=T(u,"TABLE",{class:!0});var k=B(e);for(let R=0;R<f.length;R+=1)f[R].l(k);r=U(k),_=T(k,"TR",{});var i=B(_);g=T(i,"TD",{class:!0});var N=B(g);c=T(N,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-mbqzgr"&&(c.textContent=b),N.forEach(q),i.forEach(q),k.forEach(q),this.h()},h(){S(c,"class","svelte-dv2weq"),S(g,"class","svelte-dv2weq"),S(e,"class","svelte-dv2weq")},m(u,k){H(u,n,k),H(u,l,k),H(u,e,k);for(let i=0;i<f.length;i+=1)f[i]&&f[i].m(e,null);h(e,r),h(e,_),h(_,g),h(g,c),p||(m=D(c,"click",t[2]),p=!0)},p(u,[k]){if(k&251){O=Y(u[0]);let i;for(i=0;i<O.length;i+=1){const N=rt(u,O,i);f[i]?f[i].p(N,k):(f[i]=ot(N),f[i].c(),f[i].m(e,r))}for(;i<f.length;i+=1)f[i].d(1);f.length=O.length}},i:lt,o:lt,d(u){u&&(q(n),q(l),q(e)),it(f,u),p=!1,m()}}}function yt(t,n,s){let l,e=wt([]);ht(t,e,a=>s(0,l=a));const r=a=>mt(a,{IMEMode:!0}),_=a=>a.replace(/[\s.,\/#!$%\^&\*;:{}=\-_`~\u3000-\u303f]/g,""),g=()=>{e.update(a=>{const o={raw:"私（わたし）は学生（がくせい）です",reading:["私","は","学生","です"],furigana:["わたし","","がくせい",""],translation:"I am a student",note:"This is a note and will be shown with the answer.",hint:"This is a hint and will be shown with the question."},E=[...a,o];return localStorage.setItem("sentences",JSON.stringify(E)),E})};function c(a,o){const E=_(o),C=Z(E);e.update(I=>{const M=I.map(A=>A.raw===a?(console.log(C),{...A,raw:E,reading:C.reading,furigana:C.furigana}):A);return localStorage.setItem("sentences",JSON.stringify(M)),M})}const b=(a,o)=>{e.update(E=>{const C=E.map(I=>I.raw===a?{...I,translation:o}:I);return localStorage.setItem("sentences",JSON.stringify(C)),C})},p=(a,o)=>{e.update(E=>{const C=E.map(I=>I.raw===a?{...I,note:o}:I);return localStorage.setItem("sentences",JSON.stringify(C)),C})},m=(a,o)=>{e.update(E=>{const C=E.map(I=>I.raw===a?{...I,updateHint:o}:I);return localStorage.setItem("sentences",JSON.stringify(C)),C})},O=(a,o)=>{const E=a.target.selectionStart,C=a.target.selectionEnd,I=r(a.target.value);e.update(M=>{const A=M.map(K=>K.raw===o?{...K,raw:I}:K);return localStorage.setItem("sentences",JSON.stringify(A)),A}),a.target.focus(),requestAnimationFrame(()=>{a.target.setSelectionRange(E,C)})};pt(()=>{const a=localStorage.getItem("sentences");a&&e.set(JSON.parse(a))});function f(a,o){a[o].raw=this.value,e.set(l)}const u=(a,o)=>O(o,a.raw),k=(a,o)=>c(a.raw,o.target.value);function i(a,o){a[o].translation=this.value,e.set(l)}const N=(a,o)=>b(a.raw,o.target.value);function R(a,o){a[o].note=this.value,e.set(l)}const j=(a,o)=>p(a.raw,o.target.value);function L(a,o){a[o].hint=this.value,e.set(l)}return[l,e,g,c,b,p,m,O,f,u,k,i,N,R,j,L,(a,o)=>m(a.raw,o.target.value),a=>{e.update(o=>o.filter(E=>E.raw!==a.raw)),localStorage.setItem("sentences",JSON.stringify(l))}]}class Ct extends vt{constructor(n){super(),gt(this,n,yt,qt,ft,{})}}export{Ct as component};
