import{s as de,e as T,t as ee,b as M,d as D,f as I,h as te,j as L,i as k,B as J,k as q,l as c,m as Ie,n as ue,z as be,F as Be,w as He,q as E,r as X,x as F,C as ke,p as ne,v as Oe,y as Ue}from"../chunks/scheduler.BXgHpW_B.js";import{S as fe,i as he,t as z,g as Me,c as Le,a as Y,b as ae,d as re,m as oe,e as ie}from"../chunks/index.CFyXNj5U.js";import{b as Xe,t as Fe,e as ce}from"../chunks/index.Dh9Un3aJ.js";import{s as je,a as Te,C as Ke,c as qe,b as ye,p as Je,d as ze}from"../chunks/srs.Dt8SboFV.js";import{c as Ge}from"../chunks/conversionUtils.FHTzGAhE.js";function De(t){let e,n;return{c(){e=ee("- "),n=ee(t[2])},l(l){e=te(l,"- "),n=te(l,t[2])},m(l,s){q(l,e,s),q(l,n,s)},p(l,s){s&4&&Ie(n,l[2])},d(l){l&&(k(e),k(n))}}}function Ye(t){let e,n=je(t[0])+"",l,s,a=t[1]&&De(t);return{c(){e=T("p"),l=ee(n),s=M(),a&&a.c(),this.h()},l(r){e=D(r,"P",{style:!0});var u=I(e);l=te(u,n),s=L(u),a&&a.l(u),u.forEach(k),this.h()},h(){J(e,"color",Te(t[0]))},m(r,u){q(r,e,u),c(e,l),c(e,s),a&&a.m(e,null)},p(r,[u]){u&1&&n!==(n=je(r[0])+"")&&Ie(l,n),r[1]?a?a.p(r,u):(a=De(r),a.c(),a.m(e,null)):a&&(a.d(1),a=null),u&1&&J(e,"color",Te(r[0]))},i:ue,o:ue,d(r){r&&k(e),a&&a.d()}}}function Qe(t,e,n){let l,s,{stage:a}=e,{srs:r}=e;return t.$$set=u=>{"stage"in u&&n(0,a=u.stage),"srs"in u&&n(3,r=u.srs)},t.$$.update=()=>{t.$$.dirty&8&&n(1,l=r?Math.round((new Date(r.nextReview)-Date.now())/1e3/60):null),t.$$.dirty&2&&n(2,s=l!==null?l>0?`${l} minutes`:"Now":null)},[a,l,s,r]}class We extends fe{constructor(e){super(),he(this,e,Qe,Ye,de,{stage:0,srs:3})}}function Ee(t){let e,n,l;return{c(){e=T("input"),this.h()},l(s){e=D(s,"INPUT",{class:!0}),this.h()},h(){e.value=t[1],E(e,"class","svelte-18pxfbr")},m(s,a){q(s,e,a),t[5](e),n||(l=X(e,"input",t[6]),n=!0)},p(s,a){a&2&&e.value!==s[1]&&(e.value=s[1])},d(s){s&&k(e),t[5](null),n=!1,l()}}}function we(t){let e,n,l;return{c(){e=T("textarea"),this.h()},l(s){e=D(s,"TEXTAREA",{class:!0}),I(e).forEach(k),this.h()},h(){E(e,"class","svelte-18pxfbr")},m(s,a){q(s,e,a),F(e,t[1]),t[8](e),n||(l=X(e,"input",t[7]),n=!0)},p(s,a){a&2&&F(e,s[1])},d(s){s&&k(e),t[8](null),n=!1,l()}}}function Ze(t){let e,n,l=t[0]==="input"&&Ee(t),s=t[0]==="textarea"&&we(t);return{c(){l&&l.c(),e=M(),s&&s.c(),n=be()},l(a){l&&l.l(a),e=L(a),s&&s.l(a),n=be()},m(a,r){l&&l.m(a,r),q(a,e,r),s&&s.m(a,r),q(a,n,r)},p(a,[r]){a[0]==="input"?l?l.p(a,r):(l=Ee(a),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),a[0]==="textarea"?s?s.p(a,r):(s=we(a),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:ue,o:ue,d(a){a&&(k(e),k(n)),l&&l.d(a),s&&s.d(a)}}}function $e(t,e,n){let{type:l="input"}=e,{value:s=""}=e,a=s,r;const u=Be(),v=o=>{u("input",Fe(o,{IMEMode:!0}))};He(()=>{Xe(r)});function N(o){ke[o?"unshift":"push"](()=>{r=o,n(2,r)})}const d=o=>v(o.target.value);function R(){a=this.value,n(1,a)}function w(o){ke[o?"unshift":"push"](()=>{r=o,n(2,r)})}return t.$$set=o=>{"type"in o&&n(0,l=o.type),"value"in o&&n(4,s=o.value)},t.$$.update=()=>{t.$$.dirty&2&&a&&u("input",a)},[l,a,r,v,s,N,d,R,w]}class xe extends fe{constructor(e){super(),he(this,e,$e,Ze,de,{type:0,value:4})}}function Se(t,e,n){const l=t.slice();return l[24]=e[n],l[25]=e,l[26]=n,l}function Ce(t){let e,n,l,s,a,r,u,v,N,d,R,w,o,B,h,m,f,S,P,G,H,V,y,O,i,g="Delete",U,_,W,p;l=new Ke({props:{readings:t[24].reading,furigana:t[24].furigana,colors:t[24].reading.map(Ne)}});function b(...A){return t[11](t[26],...A)}r=new xe({props:{value:t[24].raw}}),r.$on("input",b);function C(){t[12].call(d,t[25],t[26])}function K(...A){return t[13](t[26],...A)}function le(){t[14].call(B,t[25],t[26])}function se(...A){return t[15](t[26],...A)}function Z(){t[16].call(S,t[25],t[26])}function Pe(...A){return t[17](t[26],...A)}V=new We({props:{stage:t[24].srs.stage,srs:t[24].srs}});function Ve(){return t[18](t[26])}return{c(){e=T("tr"),n=T("td"),ae(l.$$.fragment),s=M(),a=T("td"),u=T("div"),ae(r.$$.fragment),v=M(),N=T("td"),d=T("textarea"),w=M(),o=T("td"),B=T("textarea"),m=M(),f=T("td"),S=T("textarea"),G=M(),H=T("td"),ae(V.$$.fragment),y=M(),O=T("td"),i=T("button"),i.textContent=g,U=M(),this.h()},l(A){e=D(A,"TR",{class:!0});var j=I(e);n=D(j,"TD",{class:!0,"data-label":!0});var Q=I(n);re(l.$$.fragment,Q),Q.forEach(k),s=L(j),a=D(j,"TD",{"data-label":!0,class:!0});var $=I(a);u=D($,"DIV",{style:!0});var x=I(u);re(r.$$.fragment,x),$.forEach(k),v=L(j),N=D(j,"TD",{"data-label":!0,class:!0});var _e=I(N);d=D(_e,"TEXTAREA",{class:!0}),I(d).forEach(k),_e.forEach(k),w=L(j),o=D(j,"TD",{"data-label":!0,class:!0});var pe=I(o);B=D(pe,"TEXTAREA",{class:!0}),I(B).forEach(k),pe.forEach(k),m=L(j),f=D(j,"TD",{"data-label":!0,class:!0});var me=I(f);S=D(me,"TEXTAREA",{class:!0}),I(S).forEach(k),me.forEach(k),G=L(j),H=D(j,"TD",{"data-label":!0,class:!0});var ge=I(H);re(V.$$.fragment,ge),ge.forEach(k),y=L(j),O=D(j,"TD",{"data-label":!0,class:!0});var ve=I(O);i=D(ve,"BUTTON",{class:!0,"data-svelte-h":!0}),ne(i)!=="svelte-c7u7nw"&&(i.textContent=g),ve.forEach(k),U=L(j),j.forEach(k),this.h()},h(){E(n,"class","reading svelte-3j1jom"),E(n,"data-label","Sentence"),J(u,"display","contents"),J(u,"--background-color","var(--deck-color)"),J(u,"--font-color","white"),J(u,"--border-color","var(--deck-color)"),E(a,"data-label","Raw"),E(a,"class","svelte-3j1jom"),d.disabled=R=!t[1],E(d,"class","svelte-3j1jom"),E(N,"data-label","Translation"),E(N,"class","svelte-3j1jom"),B.disabled=h=!t[1],E(B,"class","svelte-3j1jom"),E(o,"data-label","Notes"),E(o,"class","svelte-3j1jom"),S.disabled=P=!t[1],E(S,"class","svelte-3j1jom"),E(f,"data-label","Hint"),E(f,"class","svelte-3j1jom"),E(H,"data-label","SRS Stage"),E(H,"class","srs-container svelte-3j1jom"),E(i,"class","align-button"),E(O,"data-label","Actions"),E(O,"class","svelte-3j1jom"),E(e,"class","svelte-3j1jom")},m(A,j){q(A,e,j),c(e,n),oe(l,n,null),c(e,s),c(e,a),c(a,u),oe(r,u,null),c(e,v),c(e,N),c(N,d),F(d,t[24].translation),c(e,w),c(e,o),c(o,B),F(B,t[24].note),c(e,m),c(e,f),c(f,S),F(S,t[24].hint),c(e,G),c(e,H),oe(V,H,null),c(e,y),c(e,O),c(O,i),c(e,U),_=!0,W||(p=[X(d,"input",C),X(d,"input",K),X(B,"input",le),X(B,"input",se),X(S,"input",Z),X(S,"input",Pe),X(i,"click",Ve)],W=!0)},p(A,j){t=A;const Q={};j&1&&(Q.readings=t[24].reading),j&1&&(Q.furigana=t[24].furigana),j&1&&(Q.colors=t[24].reading.map(Ne)),l.$set(Q);const $={};j&1&&($.value=t[24].raw),r.$set($),(!_||j&2&&R!==(R=!t[1]))&&(d.disabled=R),j&1&&F(d,t[24].translation),(!_||j&2&&h!==(h=!t[1]))&&(B.disabled=h),j&1&&F(B,t[24].note),(!_||j&2&&P!==(P=!t[1]))&&(S.disabled=P),j&1&&F(S,t[24].hint);const x={};j&1&&(x.stage=t[24].srs.stage),j&1&&(x.srs=t[24].srs),V.$set(x)},i(A){_||(z(l.$$.fragment,A),z(r.$$.fragment,A),z(V.$$.fragment,A),_=!0)},o(A){Y(l.$$.fragment,A),Y(r.$$.fragment,A),Y(V.$$.fragment,A),_=!1},d(A){A&&k(e),ie(l),ie(r),ie(V),W=!1,Ue(p)}}}function et(t){let e,n,l,s,a,r,u,v,N,d,R,w,o,B='<col class="reading svelte-3j1jom"/> <col class="raw"/> <col class="translation"/> <col class="note"/> <col class="hint"/> <col class="srs"/> <col class="actions"/>',h,m,f='<tr class="svelte-3j1jom"><th class="svelte-3j1jom">Sentence</th> <th class="svelte-3j1jom">Raw</th> <th class="svelte-3j1jom">Translation</th> <th class="svelte-3j1jom">Notes</th> <th class="svelte-3j1jom">Hint</th> <th class="svelte-3j1jom">SRS Stage</th> <th class="svelte-3j1jom">Actions</th></tr>',S,P,G,H,V,y,O,i,g,U=ce(t[0].sentences),_=[];for(let p=0;p<U.length;p+=1)_[p]=Ce(Se(t,U,p));const W=p=>Y(_[p],1,1,()=>{_[p]=null});return{c(){e=T("div"),n=T("input"),s=M(),a=T("input"),u=M(),v=T("button"),N=ee("Delete Deck"),R=M(),w=T("table"),o=T("colgroup"),o.innerHTML=B,h=M(),m=T("thead"),m.innerHTML=f,S=M(),P=T("tbody");for(let p=0;p<_.length;p+=1)_[p].c();G=M(),H=T("button"),V=ee("Add Sentence"),this.h()},l(p){e=D(p,"DIV",{class:!0});var b=I(e);n=D(b,"INPUT",{class:!0}),s=L(b),a=D(b,"INPUT",{class:!0}),u=L(b),v=D(b,"BUTTON",{});var C=I(v);N=te(C,"Delete Deck"),C.forEach(k),R=L(b),w=D(b,"TABLE",{class:!0});var K=I(w);o=D(K,"COLGROUP",{"data-svelte-h":!0}),ne(o)!=="svelte-s6o00j"&&(o.innerHTML=B),h=L(K),m=D(K,"THEAD",{class:!0,"data-svelte-h":!0}),ne(m)!=="svelte-57kxnx"&&(m.innerHTML=f),S=L(K),P=D(K,"TBODY",{class:!0});var le=I(P);for(let Z=0;Z<_.length;Z+=1)_[Z].l(le);le.forEach(k),K.forEach(k),G=L(b),H=D(b,"BUTTON",{});var se=I(H);V=te(se,"Add Sentence"),se.forEach(k),b.forEach(k),this.h()},h(){n.disabled=l=!t[1],E(n,"class","title svelte-3j1jom"),a.disabled=r=!t[1],E(a,"class","description svelte-3j1jom"),v.disabled=d=!t[1],E(m,"class","svelte-3j1jom"),E(P,"class","svelte-3j1jom"),E(w,"class","deck-table svelte-3j1jom"),H.disabled=y=!t[1],E(e,"class","container svelte-3j1jom")},m(p,b){q(p,e,b),c(e,n),F(n,t[0].name),c(e,s),c(e,a),F(a,t[0].description),c(e,u),c(e,v),c(v,N),c(e,R),c(e,w),c(w,o),c(w,h),c(w,m),c(w,S),c(w,P);for(let C=0;C<_.length;C+=1)_[C]&&_[C].m(P,null);c(e,G),c(e,H),c(H,V),O=!0,i||(g=[X(n,"input",t[9]),X(a,"input",t[10]),X(v,"click",t[2]),X(H,"click",t[7])],i=!0)},p(p,[b]){if((!O||b&2&&l!==(l=!p[1]))&&(n.disabled=l),b&1&&n.value!==p[0].name&&F(n,p[0].name),(!O||b&2&&r!==(r=!p[1]))&&(a.disabled=r),b&1&&a.value!==p[0].description&&F(a,p[0].description),(!O||b&2&&d!==(d=!p[1]))&&(v.disabled=d),b&379){U=ce(p[0].sentences);let C;for(C=0;C<U.length;C+=1){const K=Se(p,U,C);_[C]?(_[C].p(K,b),z(_[C],1)):(_[C]=Ce(K),_[C].c(),z(_[C],1),_[C].m(P,null))}for(Me(),C=U.length;C<_.length;C+=1)W(C);Le()}(!O||b&2&&y!==(y=!p[1]))&&(H.disabled=y)},i(p){if(!O){for(let b=0;b<U.length;b+=1)z(_[b]);O=!0}},o(p){_=_.filter(Boolean);for(let b=0;b<_.length;b+=1)Y(_[b]);O=!1},d(p){p&&k(e),Oe(_,p),i=!1,Ue(g)}}}const Ne=t=>"#94f77e";function tt(t,e,n){let{editable:l=!1}=e,{deck:s}=e;const a=Be(),r=i=>a("message",{deck:i}),u=()=>{a("delete")},v=(i,g)=>{const U=qe(ye(i));n(0,s.sentences[g].raw=U,s),n(0,s.sentences[g]=B(U,s.sentences[g]),s)},N=(i,g)=>{n(0,s.sentences[g].translation=i,s)},d=(i,g)=>{n(0,s.sentences[g].note=i,s)},R=(i,g)=>{n(0,s.sentences[g].hint=i,s)},w=()=>{const i={...s,sentences:[...s.sentences,Je]};r(i)},o=i=>{const g={...s,sentences:s.sentences.filter((U,_)=>_!==i)};r(g)},B=(i,g)=>{const U=Ge(i);return{...g,reading:U.reading,furigana:U.furigana}};function h(){s.name=this.value,n(0,s)}function m(){s.description=this.value,n(0,s)}const f=(i,g)=>v(g.detail,i);function S(i,g){i[g].translation=this.value,n(0,s)}const P=(i,g)=>N(g.target.value,i);function G(i,g){i[g].note=this.value,n(0,s)}const H=(i,g)=>d(g.target.value,i);function V(i,g){i[g].hint=this.value,n(0,s)}const y=(i,g)=>R(g.target.value,i),O=i=>o(i);return t.$$set=i=>{"editable"in i&&n(1,l=i.editable),"deck"in i&&n(0,s=i.deck)},[s,l,u,v,N,d,R,w,o,h,m,f,S,P,G,H,V,y,O]}class nt extends fe{constructor(e){super(),he(this,e,tt,et,de,{editable:1,deck:0})}}function Ae(t,e,n){const l=t.slice();return l[7]=e[n],l[9]=n,l}function Re(t){let e,n,l;function s(...r){return t[4](t[9],...r)}function a(...r){return t[5](t[9],...r)}return e=new nt({props:{deck:t[7],editable:!0}}),e.$on("message",s),e.$on("delete",a),{c(){n=T("div"),ae(e.$$.fragment),this.h()},l(r){n=D(r,"DIV",{style:!0});var u=I(n);re(e.$$.fragment,u),this.h()},h(){J(n,"display","contents"),J(n,"--border-color","#22221f"),J(n,"--deck-color","#22221f"),J(n,"--background-color","#2c2b29")},m(r,u){q(r,n,u),oe(e,n,null),l=!0},p(r,u){t=r;const v={};u&1&&(v.deck=t[7]),e.$set(v)},i(r){l||(z(e.$$.fragment,r),l=!0)},o(r){Y(e.$$.fragment,r),l=!1},d(r){r&&e&&k(n),ie(e,r)}}}function lt(t){let e,n,l="Decks",s,a,r="Add Deck",u,v,N,d,R,w=ce(t[0]),o=[];for(let h=0;h<w.length;h+=1)o[h]=Re(Ae(t,w,h));const B=h=>Y(o[h],1,1,()=>{o[h]=null});return{c(){e=T("div"),n=T("h1"),n.textContent=l,s=M(),a=T("button"),a.textContent=r,u=M(),v=T("div");for(let h=0;h<o.length;h+=1)o[h].c();this.h()},l(h){e=D(h,"DIV",{class:!0});var m=I(e);n=D(m,"H1",{"data-svelte-h":!0}),ne(n)!=="svelte-1txjx0s"&&(n.textContent=l),s=L(m),a=D(m,"BUTTON",{"data-svelte-h":!0}),ne(a)!=="svelte-dfk3og"&&(a.textContent=r),u=L(m),v=D(m,"DIV",{class:!0});var f=I(v);for(let S=0;S<o.length;S+=1)o[S].l(f);f.forEach(k),m.forEach(k),this.h()},h(){E(v,"class","decks"),E(e,"class","container")},m(h,m){q(h,e,m),c(e,n),c(e,s),c(e,a),c(e,u),c(e,v);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(v,null);N=!0,d||(R=X(a,"click",t[1]),d=!0)},p(h,[m]){if(m&13){w=ce(h[0]);let f;for(f=0;f<w.length;f+=1){const S=Ae(h,w,f);o[f]?(o[f].p(S,m),z(o[f],1)):(o[f]=Re(S),o[f].c(),z(o[f],1),o[f].m(v,null))}for(Me(),f=w.length;f<o.length;f+=1)B(f);Le()}},i(h){if(!N){for(let m=0;m<w.length;m+=1)z(o[m]);N=!0}},o(h){o=o.filter(Boolean);for(let m=0;m<o.length;m+=1)Y(o[m]);N=!1},d(h){h&&k(e),Oe(o,h),d=!1,R()}}}function st(t,e,n){let{decks:l=[]}=e;const s=()=>{n(0,l=[...l,ze])},a=()=>{localStorage.setItem("decks",JSON.stringify(l))},r=d=>{n(0,l=l.filter((R,w)=>w!==d))},u=(d,R)=>{n(0,l[R]=d,l),a()};He(()=>{const d=localStorage.getItem("decks");n(0,l=d?JSON.parse(d):[]),console.log(l)});const v=(d,R)=>u(R.detail.deck,d),N=(d,R)=>r(d);return t.$$set=d=>{"decks"in d&&n(0,l=d.decks)},[l,s,r,u,v,N]}class ct extends fe{constructor(e){super(),he(this,e,st,lt,de,{decks:0})}}export{ct as component};
