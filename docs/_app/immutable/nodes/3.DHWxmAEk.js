import{s as vt,e as b,b as U,d as S,p as Y,j as q,f as D,i as F,q as m,k as $,l as o,r as J,n as at,v as ct,o as gt,w as mt,x as H,y as bt,z as rt,t as W,h as X,m as Z}from"../chunks/scheduler.BXgHpW_B.js";import{e as G,t as St}from"../chunks/index.Dh9Un3aJ.js";import{S as wt,i as Tt}from"../chunks/index.CFyXNj5U.js";import{w as Ft}from"../chunks/index.B4WzueAp.js";import{c as yt}from"../chunks/conversionUtils.FHTzGAhE.js";function st(t,e,i){const r=t.slice();return r[21]=e[i],r[22]=e,r[23]=i,r}function ut(t,e,i){const r=t.slice();return r[24]=e[i],r[26]=i,r}function Et(t){let e=t[24]+"",i;return{c(){i=W(e)},l(r){i=X(r,e)},m(r,n){$(r,i,n)},p(r,n){n&1&&e!==(e=r[24]+"")&&Z(i,e)},d(r){r&&F(i)}}}function Nt(t){let e,i=t[24]+"",r,n,s,w=t[21].furigana[t[26]]+"",E,v;return{c(){e=b("ruby"),r=W(i),n=U(),s=b("rt"),E=W(w),v=U(),this.h()},l(g){e=S(g,"RUBY",{class:!0});var d=D(e);r=X(d,i),n=q(d),s=S(d,"RT",{});var f=D(s);E=X(f,w),f.forEach(F),v=q(d),d.forEach(F),this.h()},h(){m(e,"class","svelte-18lxgvr")},m(g,d){$(g,e,d),o(e,r),o(e,n),o(e,s),o(s,E),o(e,v)},p(g,d){d&1&&i!==(i=g[24]+"")&&Z(r,i),d&1&&w!==(w=g[21].furigana[g[26]]+"")&&Z(E,w)},d(g){g&&F(e)}}}function it(t){let e;function i(s,w){return s[21].furigana[s[26]]?Nt:Et}let r=i(t),n=r(t);return{c(){n.c(),e=rt()},l(s){n.l(s),e=rt()},m(s,w){n.m(s,w),$(s,e,w)},p(s,w){r===(r=i(s))&&n?n.p(s,w):(n.d(1),n=r(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&F(e),n.d(s)}}}function ot(t){let e,i,r,n,s,w,E,v,g,d,f,P,R,I,B,p,u,y,c,C,A="Delete",j,Q,l=G(t[21].reading),a=[];for(let h=0;h<l.length;h+=1)a[h]=it(ut(t,l,h));function N(){t[8].call(s,t[22],t[23])}function O(...h){return t[9](t[21],...h)}function k(...h){return t[10](t[21],...h)}function L(){t[11].call(v,t[22],t[23])}function M(...h){return t[12](t[21],...h)}function z(){t[13].call(f,t[22],t[23])}function dt(...h){return t[14](t[21],...h)}function ht(){t[15].call(I,t[22],t[23])}function ft(...h){return t[16](t[21],...h)}function pt(){t[17].call(u,t[22],t[23])}function _t(){return t[18](t[21])}return{c(){e=b("tr"),i=b("td");for(let h=0;h<a.length;h+=1)a[h].c();r=U(),n=b("td"),s=b("input"),w=U(),E=b("td"),v=b("input"),g=U(),d=b("td"),f=b("input"),P=U(),R=b("td"),I=b("input"),B=U(),p=b("td"),u=b("input"),y=U(),c=b("td"),C=b("button"),C.textContent=A,this.h()},l(h){e=S(h,"TR",{});var _=D(e);i=S(_,"TD",{class:!0});var T=D(i);for(let V=0;V<a.length;V+=1)a[V].l(T);T.forEach(F),r=q(_),n=S(_,"TD",{class:!0});var K=D(n);s=S(K,"INPUT",{type:!0,class:!0}),K.forEach(F),w=q(_),E=S(_,"TD",{class:!0});var x=D(E);v=S(x,"INPUT",{type:!0,class:!0}),x.forEach(F),g=q(_),d=S(_,"TD",{class:!0});var tt=D(d);f=S(tt,"INPUT",{type:!0,class:!0}),tt.forEach(F),P=q(_),R=S(_,"TD",{class:!0});var et=D(R);I=S(et,"INPUT",{type:!0,class:!0}),et.forEach(F),B=q(_),p=S(_,"TD",{class:!0});var nt=D(p);u=S(nt,"INPUT",{type:!0,class:!0}),nt.forEach(F),y=q(_),c=S(_,"TD",{class:!0});var lt=D(c);C=S(lt,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(C)!=="svelte-qy7xxg"&&(C.textContent=A),lt.forEach(F),_.forEach(F),this.h()},h(){m(i,"class","reading svelte-18lxgvr"),m(s,"type","text"),m(s,"class","svelte-18lxgvr"),m(n,"class","svelte-18lxgvr"),m(v,"type","text"),m(v,"class","svelte-18lxgvr"),m(E,"class","svelte-18lxgvr"),m(f,"type","text"),m(f,"class","svelte-18lxgvr"),m(d,"class","svelte-18lxgvr"),m(I,"type","text"),m(I,"class","svelte-18lxgvr"),m(R,"class","svelte-18lxgvr"),m(u,"type","text"),u.disabled="disabled",m(u,"class","svelte-18lxgvr"),m(p,"class","svelte-18lxgvr"),m(C,"class","svelte-18lxgvr"),m(c,"class","svelte-18lxgvr")},m(h,_){$(h,e,_),o(e,i);for(let T=0;T<a.length;T+=1)a[T]&&a[T].m(i,null);o(e,r),o(e,n),o(n,s),H(s,t[21].raw),o(e,w),o(e,E),o(E,v),H(v,t[21].translation),o(e,g),o(e,d),o(d,f),H(f,t[21].note),o(e,P),o(e,R),o(R,I),H(I,t[21].hint),o(e,B),o(e,p),o(p,u),H(u,t[21].srs.stage),o(e,y),o(e,c),o(c,C),j||(Q=[J(s,"input",N),J(s,"input",O),J(s,"blur",k),J(v,"input",L),J(v,"blur",M),J(f,"input",z),J(f,"blur",dt),J(I,"input",ht),J(I,"blur",ft),J(u,"input",pt),J(C,"click",_t)],j=!0)},p(h,_){if(t=h,_&1){l=G(t[21].reading);let T;for(T=0;T<l.length;T+=1){const K=ut(t,l,T);a[T]?a[T].p(K,_):(a[T]=it(K),a[T].c(),a[T].m(i,null))}for(;T<a.length;T+=1)a[T].d(1);a.length=l.length}_&1&&s.value!==t[21].raw&&H(s,t[21].raw),_&1&&v.value!==t[21].translation&&H(v,t[21].translation),_&1&&f.value!==t[21].note&&H(f,t[21].note),_&1&&I.value!==t[21].hint&&H(I,t[21].hint),_&1&&u.value!==t[21].srs.stage&&H(u,t[21].srs.stage)},d(h){h&&F(e),ct(a,h),j=!1,bt(Q)}}}function kt(t){let e,i="Stored Sentences",r,n,s,w='<td class="centered svelte-18lxgvr"><h3>Formatted Sentence</h3></td> <td class="svelte-18lxgvr"><h3>Raw Sentence (with Furigana)</h3></td> <td class="svelte-18lxgvr"><h3>English Translation</h3></td> <td class="svelte-18lxgvr"><h3>Additional Notes</h3></td> <td class="svelte-18lxgvr"><h3>Hint for Sentence</h3></td> <td class="svelte-18lxgvr"><h3>SRS Stage</h3></td> <td class="svelte-18lxgvr"><h3>Actions</h3></td>',E,v,g,d,f,P="Add",R,I,B=G(t[0]),p=[];for(let u=0;u<B.length;u+=1)p[u]=ot(st(t,B,u));return{c(){e=b("h2"),e.textContent=i,r=U(),n=b("table"),s=b("tr"),s.innerHTML=w,E=U();for(let u=0;u<p.length;u+=1)p[u].c();v=U(),g=b("tr"),d=b("td"),f=b("button"),f.textContent=P,this.h()},l(u){e=S(u,"H2",{"data-svelte-h":!0}),Y(e)!=="svelte-1j8t86n"&&(e.textContent=i),r=q(u),n=S(u,"TABLE",{class:!0});var y=D(n);s=S(y,"TR",{"data-svelte-h":!0}),Y(s)!=="svelte-5d1i86"&&(s.innerHTML=w),E=q(y);for(let A=0;A<p.length;A+=1)p[A].l(y);v=q(y),g=S(y,"TR",{});var c=D(g);d=S(c,"TD",{class:!0});var C=D(d);f=S(C,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-mbqzgr"&&(f.textContent=P),C.forEach(F),c.forEach(F),y.forEach(F),this.h()},h(){m(f,"class","svelte-18lxgvr"),m(d,"class","svelte-18lxgvr"),m(n,"class","svelte-18lxgvr")},m(u,y){$(u,e,y),$(u,r,y),$(u,n,y),o(n,s),o(n,E);for(let c=0;c<p.length;c+=1)p[c]&&p[c].m(n,null);o(n,v),o(n,g),o(g,d),o(d,f),R||(I=J(f,"click",t[2]),R=!0)},p(u,[y]){if(y&251){B=G(u[0]);let c;for(c=0;c<B.length;c+=1){const C=st(u,B,c);p[c]?p[c].p(C,y):(p[c]=ot(C),p[c].c(),p[c].m(n,v))}for(;c<p.length;c+=1)p[c].d(1);p.length=B.length}},i:at,o:at,d(u){u&&(F(e),F(r),F(n)),ct(p,u),R=!1,I()}}}function It(t,e,i){let r,n=Ft([]);gt(t,n,l=>i(0,r=l));const s=l=>St(l,{IMEMode:!0}),w=l=>l.replace(/[\s.,\/#!$%\^&\*;:{}=\-_`~\u3000-\u303f]/g,""),E=()=>{n.update(l=>{const a={raw:"私（わたし）は学生（がくせい）です",reading:["私","は","学生","です"],furigana:["わたし","","がくせい",""],translation:"I am a student",note:"This is a note and will be shown with the answer.",hint:"This is a hint and will be shown with the question."},N=[...l,a];return localStorage.setItem("sentences",JSON.stringify(N)),N})};function v(l,a){const N=w(a),O=yt(N);n.update(k=>{const L=k.map(M=>M.raw===l?(console.log(O),{...M,raw:N,reading:O.reading,furigana:O.furigana}):M);return localStorage.setItem("sentences",JSON.stringify(L)),L})}const g=(l,a)=>{n.update(N=>{const O=N.map(k=>k.raw===l?{...k,translation:a}:k);return localStorage.setItem("sentences",JSON.stringify(O)),O})},d=(l,a)=>{n.update(N=>{const O=N.map(k=>k.raw===l?{...k,note:a}:k);return localStorage.setItem("sentences",JSON.stringify(O)),O})},f=(l,a)=>{n.update(N=>{const O=N.map(k=>k.raw===l?{...k,updateHint:a}:k);return localStorage.setItem("sentences",JSON.stringify(O)),O})},P=(l,a)=>{const N=l.target.selectionStart,O=l.target.selectionEnd,k=s(l.target.value);n.update(L=>{const M=L.map(z=>z.raw===a?{...z,raw:k}:z);return localStorage.setItem("sentences",JSON.stringify(M)),M}),l.target.focus(),requestAnimationFrame(()=>{l.target.setSelectionRange(N,O)})};mt(()=>{const l=localStorage.getItem("sentences");l&&n.set(JSON.parse(l))});function R(l,a){l[a].raw=this.value,n.set(r)}const I=(l,a)=>P(a,l.raw),B=(l,a)=>v(l.raw,a.target.value);function p(l,a){l[a].translation=this.value,n.set(r)}const u=(l,a)=>g(l.raw,a.target.value);function y(l,a){l[a].note=this.value,n.set(r)}const c=(l,a)=>d(l.raw,a.target.value);function C(l,a){l[a].hint=this.value,n.set(r)}const A=(l,a)=>f(l.raw,a.target.value);function j(l,a){l[a].srs.stage=this.value,n.set(r)}return[r,n,E,v,g,d,f,P,R,I,B,p,u,y,c,C,A,j,l=>{n.update(a=>a.filter(N=>N.raw!==l.raw)),localStorage.setItem("sentences",JSON.stringify(r))}]}class Jt extends wt{constructor(e){super(),Tt(this,e,It,kt,vt,{})}}export{Jt as component};
