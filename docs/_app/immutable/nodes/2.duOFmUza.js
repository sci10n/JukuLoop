import{A as Q,s as ce,e as C,t as S,d as E,f as j,h as D,i as h,w as W,v as y,k,l as w,m as M,B as fe,C as we,b as I,j as T,r as ye,D as Ce,x as Ee,p as X,E as Se,F,G as ue,n as H,H as Y,I as De,J as Z,K as $}from"../chunks/scheduler.Bw6tUycq.js";import{S as pe,i as _e,f as x,b as K,d as G,m as J,a as N,c as R,t as P,e as z,g as q}from"../chunks/index.k7AtM7IC.js";import{s as ee,a as te,S as je,N as Pe,c as Ie,b as Te,d as Ne,p as B,e as Ue,f as se,C as Le}from"../chunks/srs.Clr09k6p.js";import{b as de}from"../chunks/paths.gYmycE6g.js";function Me(n){const e=n-1;return e*e*e+1}function le(n,{delay:e=0,duration:t=400,easing:l=Me,x:c=0,y:a=0,opacity:u=0}={}){const p=getComputedStyle(n),f=+p.opacity,o=p.transform==="none"?"":p.transform,s=f*(1-u),[r,i]=Q(c),[_,U]=Q(a);return{delay:e,duration:t,easing:l,css:(L,m)=>`
			transform: ${o} translate(${(1-L)*r}${i}, ${(1-L)*_}${U});
			opacity: ${f-s*m}`}}function He(n){let e,t,l=ee(n[0])+"",c,a,u;return{c(){e=C("div"),t=C("p"),c=S(l),this.h()},l(p){e=E(p,"DIV",{class:!0});var f=j(e);t=E(f,"P",{style:!0});var o=j(t);c=D(o,l),o.forEach(h),f.forEach(h),this.h()},h(){W(t,"color",te(n[0])),y(e,"class","popup svelte-78kmxn")},m(p,f){k(p,e,f),w(e,t),w(t,c),u=!0},p(p,[f]){n=p,(!u||f&1)&&l!==(l=ee(n[0])+"")&&M(c,l),(!u||f&1)&&W(t,"color",te(n[0]))},i(p){u||(p&&fe(()=>{u&&(a||(a=x(e,le,n[1]?{y:50}:{y:-50},!0)),a.run(1))}),u=!0)},o(p){p&&(a||(a=x(e,le,n[1]?{y:50}:{y:-50},!1)),a.run(0)),u=!1},d(p){p&&h(e),p&&a&&a.end()}}}function Ve(n,e,t){const l=we();let{stage:c}=e,{animateUp:a=!1}=e;return setTimeout(()=>{l("hide")},1e3),n.$$set=p=>{"stage"in p&&t(0,c=p.stage),"animateUp"in p&&t(1,a=p.animateUp)},[c,a]}class Ae extends pe{constructor(e){super(),_e(this,e,Ve,He,ce,{stage:0,animateUp:1})}}const Fe=n=>{var t;const e=[];for(let l=0;l<n.reading.length;l++)e.push({reading:n.reading[l],furigana:n.furigana[l],optional:n.optional[l],cluster:n.optionalCluster[l],alternativeReadings:(t=n.alternativeReadings)==null?void 0:t[l]});return e};je.Apprentice1;function ne(n,e,t){const l=n.slice();return l[24]=e[t],l}function Oe(n){let e,t=n[2].translation+"",l,c,a,u=n[2].hint+"",p,f,o,s,r,i,_,U,L,m=n[7]&&ae(n),g=n[6]&&re(n);return{c(){e=C("h1"),l=S(t),c=I(),a=C("p"),p=S(u),f=I(),m&&m.c(),o=I(),s=C("input"),r=I(),g&&g.c(),i=X(),this.h()},l(d){e=E(d,"H1",{class:!0});var v=j(e);l=D(v,t),v.forEach(h),c=T(d),a=E(d,"P",{class:!0});var A=j(a);p=D(A,u),A.forEach(h),f=T(d),m&&m.l(d),o=T(d),s=E(d,"INPUT",{type:!0,class:!0}),r=T(d),g&&g.l(d),i=X(),this.h()},h(){y(e,"class","svelte-cdry9j"),y(a,"class","hint svelte-cdry9j"),y(s,"type","text"),y(s,"class","svelte-cdry9j")},m(d,v){k(d,e,v),w(e,l),k(d,c,v),k(d,a,v),w(a,p),k(d,f,v),m&&m.m(d,v),k(d,o,v),k(d,s,v),n[18](s),k(d,r,v),g&&g.m(d,v),k(d,i,v),_=!0,U||(L=Se(n[11].call(null,s)),U=!0)},p(d,v){(!_||v&4)&&t!==(t=d[2].translation+"")&&M(l,t),(!_||v&4)&&u!==(u=d[2].hint+"")&&M(p,u),d[7]?m?(m.p(d,v),v&128&&P(m,1)):(m=ae(d),m.c(),P(m,1),m.m(o.parentNode,o)):m&&(q(),N(m,1,1,()=>{m=null}),R()),d[6]?g?(g.p(d,v),v&64&&P(g,1)):(g=re(d),g.c(),P(g,1),g.m(i.parentNode,i)):g&&(q(),N(g,1,1,()=>{g=null}),R())},i(d){_||(P(m),P(g),_=!0)},o(d){N(m),N(g),_=!1},d(d){d&&(h(e),h(c),h(a),h(f),h(o),h(s),h(r),h(i)),m&&m.d(d),n[18](null),g&&g.d(d),U=!1,L()}}}function Re(n){let e,t="No sentences to review",l,c,a,u,p="select a different deck",f,o;return{c(){e=C("h1"),e.textContent=t,l=I(),c=C("p"),a=S(`Try adding some sentences to the deck or\r
            `),u=C("button"),u.textContent=p,this.h()},l(s){e=E(s,"H1",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1bxwpcq"&&(e.textContent=t),l=T(s),c=E(s,"P",{class:!0});var r=j(c);a=D(r,`Try adding some sentences to the deck or\r
            `),u=E(r,"BUTTON",{class:!0,"data-svelte-h":!0}),F(u)!=="svelte-1lus17x"&&(u.textContent=p),r.forEach(h),this.h()},h(){y(e,"class","svelte-cdry9j"),y(u,"class","flat svelte-cdry9j"),y(c,"class","centered svelte-cdry9j")},m(s,r){k(s,e,r),k(s,l,r),k(s,c,r),w(c,a),w(c,u),f||(o=ue(u,"click",n[16]),f=!0)},p:H,i:H,o:H,d(s){s&&(h(e),h(l),h(c)),f=!1,o()}}}function qe(n){let e,t,l="Choose a deck",c,a,u,p,f=se(n[4]),o=[];for(let s=0;s<f.length;s+=1)o[s]=oe(ne(n,f,s));return{c(){e=C("div"),t=C("h1"),t.textContent=l,c=I(),a=C("select");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=E(s,"DIV",{class:!0});var r=j(e);t=E(r,"H1",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1mswgjr"&&(t.textContent=l),c=T(r),a=E(r,"SELECT",{class:!0});var i=j(a);for(let _=0;_<o.length;_+=1)o[_].l(i);i.forEach(h),r.forEach(h),this.h()},h(){y(t,"class","svelte-cdry9j"),y(a,"class","svelte-cdry9j"),n[1]===void 0&&fe(()=>n[15].call(a)),y(e,"class","pick-decks-container")},m(s,r){k(s,e,r),w(e,t),w(e,c),w(e,a);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(a,null);Y(a,n[1],!0),u||(p=ue(a,"change",n[15]),u=!0)},p(s,r){if(r&17){f=se(s[4]);let i;for(i=0;i<f.length;i+=1){const _=ne(s,f,i);o[i]?o[i].p(_,r):(o[i]=oe(_),o[i].c(),o[i].m(a,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=f.length}r&18&&Y(a,s[1])},i:H,o:H,d(s){s&&h(e),De(o,s),u=!1,p()}}}function Be(n){let e,t=`No decks found. <a href="${de}/edit">Create a deck</a>`;return{c(){e=C("h1"),e.innerHTML=t,this.h()},l(l){e=E(l,"H1",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-1qavf9u"&&(e.innerHTML=t),this.h()},h(){y(e,"class","svelte-cdry9j")},m(l,c){k(l,e,c)},p:H,i:H,o:H,d(l){l&&h(e)}}}function ae(n){let e,t;return e=new Ae({props:{stage:n[8],animateUp:n[8]>n[9]}}),e.$on("hide",n[17]),{c(){K(e.$$.fragment)},l(l){G(e.$$.fragment,l)},m(l,c){J(e,l,c),t=!0},p(l,c){const a={};c&256&&(a.stage=l[8]),c&768&&(a.animateUp=l[8]>l[9]),e.$set(a)},i(l){t||(P(e.$$.fragment,l),t=!0)},o(l){N(e.$$.fragment,l),t=!1},d(l){z(e,l)}}}function re(n){let e,t,l,c,a,u=n[10]?"Correct!":"Incorrect!",p,f,o;t=new Le({props:{readings:n[2].reading,furigana:n[2].furigana,colors:n[12](n[3])}});let s=n[2].note&&ie(n);return{c(){e=C("div"),K(t.$$.fragment),l=I(),s&&s.c(),c=I(),a=C("p"),p=S(u),this.h()},l(r){e=E(r,"DIV",{class:!0});var i=j(e);G(t.$$.fragment,i),i.forEach(h),l=T(r),s&&s.l(r),c=T(r),a=E(r,"P",{class:!0});var _=j(a);p=D(_,u),_.forEach(h),this.h()},h(){y(e,"class","sentence svelte-cdry9j"),y(a,"class",f=Z(n[10]?"correct":"incorrect")+" svelte-cdry9j")},m(r,i){k(r,e,i),J(t,e,null),k(r,l,i),s&&s.m(r,i),k(r,c,i),k(r,a,i),w(a,p),o=!0},p(r,i){const _={};i&4&&(_.readings=r[2].reading),i&4&&(_.furigana=r[2].furigana),i&8&&(_.colors=r[12](r[3])),t.$set(_),r[2].note?s?s.p(r,i):(s=ie(r),s.c(),s.m(c.parentNode,c)):s&&(s.d(1),s=null),(!o||i&1024)&&u!==(u=r[10]?"Correct!":"Incorrect!")&&M(p,u),(!o||i&1024&&f!==(f=Z(r[10]?"correct":"incorrect")+" svelte-cdry9j"))&&y(a,"class",f)},i(r){o||(P(t.$$.fragment,r),o=!0)},o(r){N(t.$$.fragment,r),o=!1},d(r){r&&(h(e),h(l),h(c),h(a)),z(t),s&&s.d(r)}}}function ie(n){let e,t=n[2].note+"",l;return{c(){e=C("p"),l=S(t),this.h()},l(c){e=E(c,"P",{class:!0});var a=j(e);l=D(a,t),a.forEach(h),this.h()},h(){y(e,"class","note svelte-cdry9j")},m(c,a){k(c,e,a),w(e,l)},p(c,a){a&4&&t!==(t=c[2].note+"")&&M(l,t)},d(c){c&&h(e)}}}function oe(n){let e,t=n[24].name+"",l,c,a=B(n[0].getSentencesForDeck(n[24].id)).length+"",u,p,f=n[0].getSentencesForDeck(n[24].id).length+"",o,s,r;return{c(){e=C("option"),l=S(t),c=S(" ("),u=S(a),p=S(`\r
                        /`),o=S(f),s=S(`)\r
                    `),this.h()},l(i){e=E(i,"OPTION",{});var _=j(e);l=D(_,t),c=D(_," ("),u=D(_,a),p=D(_,`\r
                        /`),o=D(_,f),s=D(_,`)\r
                    `),_.forEach(h),this.h()},h(){e.__value=r=n[24],$(e,e.__value)},m(i,_){k(i,e,_),w(e,l),w(e,c),w(e,u),w(e,p),w(e,o),w(e,s)},p(i,_){_&16&&t!==(t=i[24].name+"")&&M(l,t),_&17&&a!==(a=B(i[0].getSentencesForDeck(i[24].id)).length+"")&&M(u,a),_&17&&f!==(f=i[0].getSentencesForDeck(i[24].id).length+"")&&M(o,f),_&16&&r!==(r=i[24])&&(e.__value=r,$(e,e.__value))},d(i){i&&h(e)}}}function Ke(n){let e,t,l,c,a,u;const p=[Be,qe,Re,Oe],f=[];function o(s,r){return s[4].length===0?0:s[1]?s[2]?3:2:1}return t=o(n),l=f[t]=p[t](n),a=new Pe({props:{view:[{to:" ",label:" ",active:!1},{to:"decks",label:"Edit Decks",active:!0}]}}),a.$on("navigate",n[19]),{c(){e=C("div"),l.c(),c=I(),K(a.$$.fragment),this.h()},l(s){e=E(s,"DIV",{class:!0});var r=j(e);l.l(r),r.forEach(h),c=T(s),G(a.$$.fragment,s),this.h()},h(){y(e,"class","container svelte-cdry9j")},m(s,r){k(s,e,r),f[t].m(e,null),k(s,c,r),J(a,s,r),u=!0},p(s,[r]){let i=t;t=o(s),t===i?f[t].p(s,r):(q(),N(f[i],1,1,()=>{f[i]=null}),R(),l=f[t],l?l.p(s,r):(l=f[t]=p[t](s),l.c()),P(l,1),l.m(e,null))},i(s){u||(P(l),P(a.$$.fragment,s),u=!0)},o(s){N(l),N(a.$$.fragment,s),u=!1},d(s){s&&(h(e),h(c)),f[t].d(),z(a,s)}}}function Ge(n,e,t){let l,c,a,u,p=[],f=null,o=null,s,r="",i=!1,_=!1,U,L;ye(()=>{t(0,u=Ie()),t(4,p=u.getDecks()),window.addEventListener("keydown",m)});function m(b){b.key==="Enter"&&(i?g():v())}function g(){t(13,r=""),t(6,i=!1),t(5,s.value="",s),d(),s.focus()}function d(){t(2,o=l.length>0?l[Math.floor(Math.random()*l.length)]:null),s==null||s.focus()}function v(){if(t(6,i=!0),o!=null&&o.srs){const b=Te(o.srs,a);t(7,_=!0),u.addOrUpdateSrs(o.id,b),t(2,o.srs=b,o),t(8,U=b.stage),t(9,L=o.srs.stage)}}function A(b){Ne(b),b.addEventListener("input",O=>{t(13,r=O.target.value.replace(/\s/g,""))})}function he(b){return b?o.reading.map((O,V)=>b.readingCorrectness[V]===!0?"#0a7141":b.readingCorrectness[V]===!1?"#D81B60":o.optional[V]?"blue":"black"):o.reading.map((O,V)=>o.optional[V]?"blue":"black")}function me(){f=Ce(this),t(1,f),t(4,p)}const ge=()=>t(1,f=null),ve=()=>t(7,_=!1);function ke(b){Ee[b?"unshift":"push"](()=>{s=b,t(5,s)})}const be=b=>{b.detail.to==="decks"&&(window.location.href=`${de}/edit`)};return n.$$.update=()=>{n.$$.dirty&3&&t(14,l=f?B(u.getSentencesForDeck(f.id)):[]),n.$$.dirty&16384&&l&&(console.log(l),t(2,o=l[Math.floor(Math.random()*l.length)])),n.$$.dirty&8196&&t(3,c=r&&o&&Ue(r,o,Fe(o))),n.$$.dirty&8&&t(10,a=c==null?void 0:c.answerCorrect)},[u,f,o,c,p,s,i,_,U,L,a,A,he,r,l,me,ge,ve,ke,be]}class Xe extends pe{constructor(e){super(),_e(this,e,Ge,Ke,ce,{})}}export{Xe as component};
