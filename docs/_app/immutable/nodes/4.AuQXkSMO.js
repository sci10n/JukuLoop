import{s as fe,e as j,t as ne,d as D,f as I,h as se,i as S,B as J,k as Y,l as c,m as je,n as ue,b as L,z as De,j as P,S as Re,w as Ie,q as A,r as V,x as q,C as Te,p as Z,v as Me,y as pe}from"../chunks/scheduler.CDGtiUFo.js";import{S as he,i as _e,t as z,g as Oe,c as Ue,a as Q,b as re,d as oe,m as ie,e as ce}from"../chunks/index.B5cZ8GrW.js";import{b as Le,t as Pe,e as de}from"../chunks/index.Dh9Un3aJ.js";import{S as O,C as Ve,c as Xe,d as Ke,b as qe,e as ye}from"../chunks/misc.B53fYwtt.js";import{c as Fe}from"../chunks/conversionUtils.FHTzGAhE.js";function Je(t){let e,n=t[3](t[0])+"",a,s,l;return{c(){e=j("p"),a=ne(n),s=ne(" - "),l=ne(t[1]),this.h()},l(r){e=D(r,"P",{style:!0});var i=I(e);a=se(i,n),s=se(i," - "),l=se(i,t[1]),i.forEach(S),this.h()},h(){J(e,"color",t[2](t[0]))},m(r,i){Y(r,e,i),c(e,a),c(e,s),c(e,l)},p(r,[i]){i&1&&n!==(n=r[3](r[0])+"")&&je(a,n),i&2&&je(l,r[1]),i&1&&J(e,"color",r[2](r[0]))},i:ue,o:ue,d(r){r&&S(e)}}}function ze(t,e,n){let a,s;const l=T=>{switch(T){case O.Apprentice1:return"#D81B60";case O.Apprentice2:return"#D81B60";case O.Apprentice3:return"#D81B60";case O.Apprentice4:return"#D81B60";case O.Guru1:return"#1E88E5";case O.Guru2:return"#1E88E5";case O.Master:return"#004D40";case O.Enlightened:return"#EBDACC";case O.Burned:return"#360C2D"}},r=T=>{switch(T){case O.Apprentice1:return"Apprentice 1";case O.Apprentice2:return"Apprentice 2";case O.Apprentice3:return"Apprentice 3";case O.Apprentice4:return"Apprentice 4";case O.Guru1:return"Guru 1";case O.Guru2:return"Guru 2";case O.Master:return"Master";case O.Enlightened:return"Enlightened";case O.Burned:return"Burned"}};let{stage:i=O.Apprentice1}=e,{srs:p}=e;return t.$$set=T=>{"stage"in T&&n(0,i=T.stage),"srs"in T&&n(4,p=T.srs)},t.$$.update=()=>{t.$$.dirty&16&&n(5,a=Math.round((new Date(p.nextReview)-Date.now())/1e3/60)),t.$$.dirty&32&&n(1,s=a>0?`${a} minutes`:"Now")},[i,s,l,r,p,a]}class Ye extends he{constructor(e){super(),_e(this,e,ze,Je,fe,{stage:0,srs:4})}}function Ee(t){let e,n,a;return{c(){e=j("input"),this.h()},l(s){e=D(s,"INPUT",{class:!0}),this.h()},h(){e.value=t[1],A(e,"class","svelte-18pxfbr")},m(s,l){Y(s,e,l),t[5](e),n||(a=V(e,"input",t[6]),n=!0)},p(s,l){l&2&&e.value!==s[1]&&(e.value=s[1])},d(s){s&&S(e),t[5](null),n=!1,a()}}}function Ae(t){let e,n,a;return{c(){e=j("textarea"),this.h()},l(s){e=D(s,"TEXTAREA",{class:!0}),I(e).forEach(S),this.h()},h(){A(e,"class","svelte-18pxfbr")},m(s,l){Y(s,e,l),q(e,t[1]),t[8](e),n||(a=V(e,"input",t[7]),n=!0)},p(s,l){l&2&&q(e,s[1])},d(s){s&&S(e),t[8](null),n=!1,a()}}}function Qe(t){let e,n,a=t[0]==="input"&&Ee(t),s=t[0]==="textarea"&&Ae(t);return{c(){a&&a.c(),e=L(),s&&s.c(),n=De()},l(l){a&&a.l(l),e=P(l),s&&s.l(l),n=De()},m(l,r){a&&a.m(l,r),Y(l,e,r),s&&s.m(l,r),Y(l,n,r)},p(l,[r]){l[0]==="input"?a?a.p(l,r):(a=Ee(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),l[0]==="textarea"?s?s.p(l,r):(s=Ae(l),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i:ue,o:ue,d(l){l&&(S(e),S(n)),a&&a.d(l),s&&s.d(l)}}}function We(t,e,n){let{type:a="input"}=e,{value:s=""}=e,l=s,r;const i=Re(),p=h=>{i("input",Pe(h,{IMEMode:!0}))};Ie(()=>{Le(r)});function T(h){Te[h?"unshift":"push"](()=>{r=h,n(2,r)})}const d=h=>p(h.target.value);function w(){l=this.value,n(1,l)}function C(h){Te[h?"unshift":"push"](()=>{r=h,n(2,r)})}return t.$$set=h=>{"type"in h&&n(0,a=h.type),"value"in h&&n(4,s=h.value)},t.$$.update=()=>{t.$$.dirty&2&&l&&i("input",l)},[a,l,r,p,s,T,d,w,C]}class Ze extends he{constructor(e){super(),_e(this,e,We,Qe,fe,{type:0,value:4})}}function Se(t,e,n){const a=t.slice();return a[24]=e[n],a[25]=e,a[26]=n,a}function we(t){let e,n,a,s,l,r,i,p,T,d,w,C,h,M,U,f,X,u,_,v,B,K,F,H,o,b="Delete",G,m,$,g;a=new Ve({props:{readings:t[24].reading,furigana:t[24].furigana,colors:t[24].reading.map(Ce)}});function k(...R){return t[11](t[26],...R)}r=new Ze({props:{value:t[24].raw}}),r.$on("input",k);function N(){t[12].call(d,t[25],t[26])}function y(...R){return t[13](t[26],...R)}function ae(){t[14].call(M,t[25],t[26])}function le(...R){return t[15](t[26],...R)}function x(){t[16].call(u,t[25],t[26])}function He(...R){return t[17](t[26],...R)}K=new Ye({props:{stage:t[24].srs.stage,srs:t[24].srs}});function Ge(){return t[18](t[26])}return{c(){e=j("tr"),n=j("td"),re(a.$$.fragment),s=L(),l=j("td"),i=j("div"),re(r.$$.fragment),p=L(),T=j("td"),d=j("textarea"),C=L(),h=j("td"),M=j("textarea"),f=L(),X=j("td"),u=j("textarea"),v=L(),B=j("td"),re(K.$$.fragment),F=L(),H=j("td"),o=j("button"),o.textContent=b,G=L(),this.h()},l(R){e=D(R,"TR",{class:!0});var E=I(e);n=D(E,"TD",{class:!0,"data-label":!0});var W=I(n);oe(a.$$.fragment,W),W.forEach(S),s=P(E),l=D(E,"TD",{"data-label":!0,class:!0});var ee=I(l);i=D(ee,"DIV",{style:!0});var te=I(i);oe(r.$$.fragment,te),ee.forEach(S),p=P(E),T=D(E,"TD",{"data-label":!0,class:!0});var me=I(T);d=D(me,"TEXTAREA",{class:!0}),I(d).forEach(S),me.forEach(S),C=P(E),h=D(E,"TD",{"data-label":!0,class:!0});var ge=I(h);M=D(ge,"TEXTAREA",{class:!0}),I(M).forEach(S),ge.forEach(S),f=P(E),X=D(E,"TD",{"data-label":!0,class:!0});var ve=I(X);u=D(ve,"TEXTAREA",{class:!0}),I(u).forEach(S),ve.forEach(S),v=P(E),B=D(E,"TD",{"data-label":!0,class:!0});var be=I(B);oe(K.$$.fragment,be),be.forEach(S),F=P(E),H=D(E,"TD",{"data-label":!0,class:!0});var ke=I(H);o=D(ke,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-c7u7nw"&&(o.textContent=b),ke.forEach(S),G=P(E),E.forEach(S),this.h()},h(){A(n,"class","reading svelte-3j1jom"),A(n,"data-label","Sentence"),J(i,"display","contents"),J(i,"--background-color","var(--deck-color)"),J(i,"--font-color","white"),J(i,"--border-color","var(--deck-color)"),A(l,"data-label","Raw"),A(l,"class","svelte-3j1jom"),d.disabled=w=!t[1],A(d,"class","svelte-3j1jom"),A(T,"data-label","Translation"),A(T,"class","svelte-3j1jom"),M.disabled=U=!t[1],A(M,"class","svelte-3j1jom"),A(h,"data-label","Notes"),A(h,"class","svelte-3j1jom"),u.disabled=_=!t[1],A(u,"class","svelte-3j1jom"),A(X,"data-label","Hint"),A(X,"class","svelte-3j1jom"),A(B,"data-label","SRS Stage"),A(B,"class","srs-container svelte-3j1jom"),A(o,"class","align-button"),A(H,"data-label","Actions"),A(H,"class","svelte-3j1jom"),A(e,"class","svelte-3j1jom")},m(R,E){Y(R,e,E),c(e,n),ie(a,n,null),c(e,s),c(e,l),c(l,i),ie(r,i,null),c(e,p),c(e,T),c(T,d),q(d,t[24].translation),c(e,C),c(e,h),c(h,M),q(M,t[24].note),c(e,f),c(e,X),c(X,u),q(u,t[24].hint),c(e,v),c(e,B),ie(K,B,null),c(e,F),c(e,H),c(H,o),c(e,G),m=!0,$||(g=[V(d,"input",N),V(d,"input",y),V(M,"input",ae),V(M,"input",le),V(u,"input",x),V(u,"input",He),V(o,"click",Ge)],$=!0)},p(R,E){t=R;const W={};E&1&&(W.readings=t[24].reading),E&1&&(W.furigana=t[24].furigana),E&1&&(W.colors=t[24].reading.map(Ce)),a.$set(W);const ee={};E&1&&(ee.value=t[24].raw),r.$set(ee),(!m||E&2&&w!==(w=!t[1]))&&(d.disabled=w),E&1&&q(d,t[24].translation),(!m||E&2&&U!==(U=!t[1]))&&(M.disabled=U),E&1&&q(M,t[24].note),(!m||E&2&&_!==(_=!t[1]))&&(u.disabled=_),E&1&&q(u,t[24].hint);const te={};E&1&&(te.stage=t[24].srs.stage),E&1&&(te.srs=t[24].srs),K.$set(te)},i(R){m||(z(a.$$.fragment,R),z(r.$$.fragment,R),z(K.$$.fragment,R),m=!0)},o(R){Q(a.$$.fragment,R),Q(r.$$.fragment,R),Q(K.$$.fragment,R),m=!1},d(R){R&&S(e),ce(a),ce(r),ce(K),$=!1,pe(g)}}}function $e(t){let e,n,a,s,l,r,i,p,T,d,w,C,h,M='<col class="reading svelte-3j1jom"/> <col class="raw"/> <col class="translation"/> <col class="note"/> <col class="hint"/> <col class="srs"/> <col class="actions"/>',U,f,X='<tr class="svelte-3j1jom"><th class="svelte-3j1jom">Sentence</th> <th class="svelte-3j1jom">Raw</th> <th class="svelte-3j1jom">Translation</th> <th class="svelte-3j1jom">Notes</th> <th class="svelte-3j1jom">Hint</th> <th class="svelte-3j1jom">SRS Stage</th> <th class="svelte-3j1jom">Actions</th></tr>',u,_,v,B,K,F,H,o,b,G=de(t[0].sentences),m=[];for(let g=0;g<G.length;g+=1)m[g]=we(Se(t,G,g));const $=g=>Q(m[g],1,1,()=>{m[g]=null});return{c(){e=j("div"),n=j("input"),s=L(),l=j("input"),i=L(),p=j("button"),T=ne("Delete Deck"),w=L(),C=j("table"),h=j("colgroup"),h.innerHTML=M,U=L(),f=j("thead"),f.innerHTML=X,u=L(),_=j("tbody");for(let g=0;g<m.length;g+=1)m[g].c();v=L(),B=j("button"),K=ne("Add Sentence"),this.h()},l(g){e=D(g,"DIV",{class:!0});var k=I(e);n=D(k,"INPUT",{class:!0}),s=P(k),l=D(k,"INPUT",{class:!0}),i=P(k),p=D(k,"BUTTON",{});var N=I(p);T=se(N,"Delete Deck"),N.forEach(S),w=P(k),C=D(k,"TABLE",{class:!0});var y=I(C);h=D(y,"COLGROUP",{"data-svelte-h":!0}),Z(h)!=="svelte-s6o00j"&&(h.innerHTML=M),U=P(y),f=D(y,"THEAD",{class:!0,"data-svelte-h":!0}),Z(f)!=="svelte-57kxnx"&&(f.innerHTML=X),u=P(y),_=D(y,"TBODY",{class:!0});var ae=I(_);for(let x=0;x<m.length;x+=1)m[x].l(ae);ae.forEach(S),y.forEach(S),v=P(k),B=D(k,"BUTTON",{});var le=I(B);K=se(le,"Add Sentence"),le.forEach(S),k.forEach(S),this.h()},h(){n.disabled=a=!t[1],A(n,"class","title svelte-3j1jom"),l.disabled=r=!t[1],A(l,"class","description svelte-3j1jom"),p.disabled=d=!t[1],A(f,"class","svelte-3j1jom"),A(_,"class","svelte-3j1jom"),A(C,"class","deck-table svelte-3j1jom"),B.disabled=F=!t[1],A(e,"class","container svelte-3j1jom")},m(g,k){Y(g,e,k),c(e,n),q(n,t[0].name),c(e,s),c(e,l),q(l,t[0].description),c(e,i),c(e,p),c(p,T),c(e,w),c(e,C),c(C,h),c(C,U),c(C,f),c(C,u),c(C,_);for(let N=0;N<m.length;N+=1)m[N]&&m[N].m(_,null);c(e,v),c(e,B),c(B,K),H=!0,o||(b=[V(n,"input",t[9]),V(l,"input",t[10]),V(p,"click",t[2]),V(B,"click",t[7])],o=!0)},p(g,[k]){if((!H||k&2&&a!==(a=!g[1]))&&(n.disabled=a),k&1&&n.value!==g[0].name&&q(n,g[0].name),(!H||k&2&&r!==(r=!g[1]))&&(l.disabled=r),k&1&&l.value!==g[0].description&&q(l,g[0].description),(!H||k&2&&d!==(d=!g[1]))&&(p.disabled=d),k&379){G=de(g[0].sentences);let N;for(N=0;N<G.length;N+=1){const y=Se(g,G,N);m[N]?(m[N].p(y,k),z(m[N],1)):(m[N]=we(y),m[N].c(),z(m[N],1),m[N].m(_,null))}for(Oe(),N=G.length;N<m.length;N+=1)$(N);Ue()}(!H||k&2&&F!==(F=!g[1]))&&(B.disabled=F)},i(g){if(!H){for(let k=0;k<G.length;k+=1)z(m[k]);H=!0}},o(g){m=m.filter(Boolean);for(let k=0;k<m.length;k+=1)Q(m[k]);H=!1},d(g){g&&S(e),Me(m,g),o=!1,pe(b)}}}const Ce=t=>"#94f77e";function xe(t,e,n){let{editable:a=!1}=e,{deck:s}=e;const l=Re(),r=o=>l("message",{deck:o}),i=()=>{l("delete")},p=(o,b)=>{const G=Xe(Ke(o));n(0,s.sentences[b].raw=G,s),n(0,s.sentences[b]=M(G,s.sentences[b]),s)},T=(o,b)=>{n(0,s.sentences[b].translation=o,s)},d=(o,b)=>{n(0,s.sentences[b].note=o,s)},w=(o,b)=>{n(0,s.sentences[b].hint=o,s)},C=()=>{const o={...s,sentences:[...s.sentences,qe]};r(o)},h=o=>{const b={...s,sentences:s.sentences.filter((G,m)=>m!==o)};r(b)},M=(o,b)=>{const G=Fe(o);return{...b,reading:G.reading,furigana:G.furigana}};function U(){s.name=this.value,n(0,s)}function f(){s.description=this.value,n(0,s)}const X=(o,b)=>p(b.detail,o);function u(o,b){o[b].translation=this.value,n(0,s)}const _=(o,b)=>T(b.target.value,o);function v(o,b){o[b].note=this.value,n(0,s)}const B=(o,b)=>d(b.target.value,o);function K(o,b){o[b].hint=this.value,n(0,s)}const F=(o,b)=>w(b.target.value,o),H=o=>h(o);return t.$$set=o=>{"editable"in o&&n(1,a=o.editable),"deck"in o&&n(0,s=o.deck)},[s,a,i,p,T,d,w,C,h,U,f,X,u,_,v,B,K,F,H]}class et extends he{constructor(e){super(),_e(this,e,xe,$e,fe,{editable:1,deck:0})}}function Be(t,e,n){const a=t.slice();return a[7]=e[n],a[9]=n,a}function Ne(t){let e,n,a;function s(...r){return t[5](t[9],...r)}function l(...r){return t[6](t[9],...r)}return e=new et({props:{deck:t[7],editable:!0}}),e.$on("message",s),e.$on("delete",l),{c(){n=j("div"),re(e.$$.fragment),this.h()},l(r){n=D(r,"DIV",{style:!0});var i=I(n);oe(e.$$.fragment,i),this.h()},h(){J(n,"display","contents"),J(n,"--border-color","#22221f"),J(n,"--deck-color","#22221f"),J(n,"--background-color","#2c2b29")},m(r,i){Y(r,n,i),ie(e,n,null),a=!0},p(r,i){t=r;const p={};i&1&&(p.deck=t[7]),e.$set(p)},i(r){a||(z(e.$$.fragment,r),a=!0)},o(r){Q(e.$$.fragment,r),a=!1},d(r){r&&e&&S(n),ce(e,r)}}}function tt(t){let e,n,a="Decks",s,l,r="Add Deck",i,p,T="Save Decks",d,w,C,h,M,U=de(t[0]),f=[];for(let u=0;u<U.length;u+=1)f[u]=Ne(Be(t,U,u));const X=u=>Q(f[u],1,1,()=>{f[u]=null});return{c(){e=j("div"),n=j("h1"),n.textContent=a,s=L(),l=j("button"),l.textContent=r,i=L(),p=j("button"),p.textContent=T,d=L(),w=j("div");for(let u=0;u<f.length;u+=1)f[u].c();this.h()},l(u){e=D(u,"DIV",{class:!0});var _=I(e);n=D(_,"H1",{"data-svelte-h":!0}),Z(n)!=="svelte-1txjx0s"&&(n.textContent=a),s=P(_),l=D(_,"BUTTON",{"data-svelte-h":!0}),Z(l)!=="svelte-dfk3og"&&(l.textContent=r),i=P(_),p=D(_,"BUTTON",{"data-svelte-h":!0}),Z(p)!=="svelte-fajpc"&&(p.textContent=T),d=P(_),w=D(_,"DIV",{class:!0});var v=I(w);for(let B=0;B<f.length;B+=1)f[B].l(v);v.forEach(S),_.forEach(S),this.h()},h(){A(w,"class","decks"),A(e,"class","container")},m(u,_){Y(u,e,_),c(e,n),c(e,s),c(e,l),c(e,i),c(e,p),c(e,d),c(e,w);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(w,null);C=!0,h||(M=[V(l,"click",t[1]),V(p,"click",t[2])],h=!0)},p(u,[_]){if(_&25){U=de(u[0]);let v;for(v=0;v<U.length;v+=1){const B=Be(u,U,v);f[v]?(f[v].p(B,_),z(f[v],1)):(f[v]=Ne(B),f[v].c(),z(f[v],1),f[v].m(w,null))}for(Oe(),v=U.length;v<f.length;v+=1)X(v);Ue()}},i(u){if(!C){for(let _=0;_<U.length;_+=1)z(f[_]);C=!0}},o(u){f=f.filter(Boolean);for(let _=0;_<f.length;_+=1)Q(f[_]);C=!1},d(u){u&&S(e),Me(f,u),h=!1,pe(M)}}}function nt(t,e,n){let{decks:a=[]}=e;const s=()=>{n(0,a=[...a,ye])},l=()=>{localStorage.setItem("decks",JSON.stringify(a))},r=d=>{n(0,a=a.filter((w,C)=>C!==d))},i=(d,w)=>{n(0,a[w]=d,a)};Ie(()=>{const d=localStorage.getItem("decks");n(0,a=d?JSON.parse(d):[]),console.log(a)});const p=(d,w)=>i(w.detail.deck,d),T=(d,w)=>r(d);return t.$$set=d=>{"decks"in d&&n(0,a=d.decks)},[a,s,l,r,i,p,T]}class it extends he{constructor(e){super(),_e(this,e,nt,tt,fe,{decks:0})}}export{it as component};
