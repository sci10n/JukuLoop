import{s as Ne,e as f,t as ne,d as h,f as w,h as ae,i as d,w as qe,k as J,l as o,m as re,n as we,b as S,j as N,v as k,T as Ae,r as Le,U as X,X as Q,Y as Me,C as Oe,x as He,p as Fe,E as ut,Z as oe,W as ye,$ as dt,_ as Pe}from"../chunks/scheduler.BYqXt0-T.js";import{S as Ie,i as Be,t as y,g as de,a as $,c as fe,b as he,d as _e,m as ge,e as ve,h as Ue}from"../chunks/index.BLJpQBEb.js";import{s as Re,a as Ye,e as Se,C as ct,S as ze,g as Ge,i as ft,c as Ke,f as ot,d as ht}from"../chunks/srs.D4-oNk5N.js";import{b as _t}from"../chunks/paths.DsbW_1TZ.js";function gt(l){let e,s=Re(l[0])+"",a;return{c(){e=f("p"),a=ne(s),this.h()},l(n){e=h(n,"P",{style:!0});var t=w(e);a=ae(t,s),t.forEach(d),this.h()},h(){qe(e,"color",Ye(l[0]))},m(n,t){J(n,e,t),o(e,a)},p(n,[t]){t&1&&s!==(s=Re(n[0])+"")&&re(a,s),t&1&&qe(e,"color",Ye(n[0]))},i:we,o:we,d(n){n&&d(e)}}}function vt(l,e,s){let{stage:a}=e,{srs:n}=e;return l.$$set=t=>{"stage"in t&&s(0,a=t.stage),"srs"in t&&s(1,n=t.srs)},[a,n]}class pt extends Ie{constructor(e){super(),Be(this,e,vt,gt,Ne,{stage:0,srs:1})}}function We(l,e,s){const a=l.slice();return a[9]=e[s],a[10]=e,a[11]=s,a}function Xe(l){let e,s="Deck not found";return{c(){e=f("p"),e.textContent=s},l(a){e=h(a,"P",{"data-svelte-h":!0}),X(e)!=="svelte-vs2gpw"&&(e.textContent=s)},m(a,n){J(a,e,n)},d(a){a&&d(e)}}}function Ze(l){let e,s=l[0].name+"",a,n,t,r=l[0].description+"",i,c,v,B="Back",C,p,D="Add sentence",H,T,P,q='<col class="reading"/> <col class="translation"/> <col class="note"/> <col class="hint"/> <col class="srs"/> <col class="actions"/>',U,V,j='<tr class="svelte-glkr0t"><th class="svelte-glkr0t">Sentence</th> <th class="svelte-glkr0t">Translation</th> <th class="svelte-glkr0t">Notes</th> <th class="svelte-glkr0t">Hint</th> <th class="svelte-glkr0t">Stage</th> <th class="svelte-glkr0t">Review</th> <th class="svelte-glkr0t">Actions</th> <th class="svelte-glkr0t"></th></tr>',A,g,u,_,b,M=Se(l[0].sentences),E=[];for(let m=0;m<M.length;m+=1)E[m]=xe(We(l,M,m));const z=m=>$(E[m],1,1,()=>{E[m]=null});return{c(){e=f("h1"),a=ne(s),n=S(),t=f("p"),i=ne(r),c=S(),v=f("button"),v.textContent=B,C=S(),p=f("button"),p.textContent=D,H=S(),T=f("table"),P=f("colgroup"),P.innerHTML=q,U=S(),V=f("thead"),V.innerHTML=j,A=S(),g=f("tbody");for(let m=0;m<E.length;m+=1)E[m].c();this.h()},l(m){e=h(m,"H1",{});var O=w(e);a=ae(O,s),O.forEach(d),n=N(m),t=h(m,"P",{});var R=w(t);i=ae(R,r),R.forEach(d),c=N(m),v=h(m,"BUTTON",{class:!0,"data-svelte-h":!0}),X(v)!=="svelte-bqzm0i"&&(v.textContent=B),C=N(m),p=h(m,"BUTTON",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-1dhoolp"&&(p.textContent=D),H=N(m),T=h(m,"TABLE",{class:!0});var K=w(T);P=h(K,"COLGROUP",{"data-svelte-h":!0}),X(P)!=="svelte-24go6x"&&(P.innerHTML=q),U=N(K),V=h(K,"THEAD",{class:!0,"data-svelte-h":!0}),X(V)!=="svelte-qk7ijs"&&(V.innerHTML=j),A=N(K),g=h(K,"TBODY",{});var ee=w(g);for(let se=0;se<E.length;se+=1)E[se].l(ee);ee.forEach(d),K.forEach(d),this.h()},h(){k(v,"class","primary svelte-glkr0t"),k(p,"class","primary svelte-glkr0t"),k(V,"class","svelte-glkr0t"),k(T,"class","deck-table svelte-glkr0t")},m(m,O){J(m,e,O),o(e,a),J(m,n,O),J(m,t,O),o(t,i),J(m,c,O),J(m,v,O),J(m,C,O),J(m,p,O),J(m,H,O),J(m,T,O),o(T,P),o(T,U),o(T,V),o(T,A),o(T,g);for(let R=0;R<E.length;R+=1)E[R]&&E[R].m(g,null);u=!0,_||(b=[Q(v,"click",l[5]),Q(p,"click",l[3])],_=!0)},p(m,O){if((!u||O&1)&&s!==(s=m[0].name+"")&&re(a,s),(!u||O&1)&&r!==(r=m[0].description+"")&&re(i,r),O&23){M=Se(m[0].sentences);let R;for(R=0;R<M.length;R+=1){const K=We(m,M,R);E[R]?(E[R].p(K,O),y(E[R],1)):(E[R]=xe(K),E[R].c(),y(E[R],1),E[R].m(g,null))}for(de(),R=M.length;R<E.length;R+=1)z(R);fe()}},i(m){if(!u){for(let O=0;O<M.length;O+=1)y(E[O]);u=!0}},o(m){E=E.filter(Boolean);for(let O=0;O<E.length;O+=1)$(E[O]);u=!1},d(m){m&&(d(e),d(n),d(t),d(c),d(v),d(C),d(p),d(H),d(T)),Me(E,m),_=!1,Oe(b)}}}function Qe(l){let e,s;return e=new pt({props:{stage:l[9].srs.stage,srs:l[9].srs}}),{c(){he(e.$$.fragment)},l(a){_e(e.$$.fragment,a)},m(a,n){ge(e,a,n),s=!0},p(a,n){const t={};n&1&&(t.stage=a[9].srs.stage),n&1&&(t.srs=a[9].srs),e.$set(t)},i(a){s||(y(e.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),s=!1},d(a){ve(e,a)}}}function $e(l){let e,s=Ge(l[9].srs)+"",a;return{c(){e=f("p"),a=ne(s)},l(n){e=h(n,"P",{});var t=w(e);a=ae(t,s),t.forEach(d)},m(n,t){J(n,e,t),o(e,a)},p(n,t){t&1&&s!==(s=Ge(n[9].srs)+"")&&re(a,s)},d(n){n&&d(e)}}}function xe(l){let e,s,a,n,t,r,i=l[9].translation+"",c,v,B,C,p=l[9].note+"",D,H,T,P,q=l[9].hint+"",U,V,j,A,g,u,_,b,M="Edit",E,z,m="Reset",O,R,K,ee,se="Delete",le,x,ie,ue;a=new ct({props:{readings:l[9].reading,furigana:l[9].furigana,colors:l[9].reading.map(et)}});let Y=l[9].srs&&Qe(l),Z=l[9].srs&&$e(l);function te(){return l[6](l[9])}function L(){return l[7](l[9],l[10],l[11])}function G(){return l[8](l[9])}return{c(){e=f("tr"),s=f("td"),he(a.$$.fragment),n=S(),t=f("td"),r=f("p"),c=ne(i),v=S(),B=f("td"),C=f("p"),D=ne(p),H=S(),T=f("td"),P=f("p"),U=ne(q),V=S(),j=f("td"),Y&&Y.c(),A=S(),g=f("td"),Z&&Z.c(),u=S(),_=f("td"),b=f("button"),b.textContent=M,E=S(),z=f("button"),z.textContent=m,O=S(),R=f("td"),K=f("div"),ee=f("button"),ee.textContent=se,le=S(),this.h()},l(F){e=h(F,"TR",{class:!0});var I=w(e);s=h(I,"TD",{class:!0,"data-label":!0});var W=w(s);_e(a.$$.fragment,W),W.forEach(d),n=N(I),t=h(I,"TD",{"data-label":!0,class:!0});var pe=w(t);r=h(pe,"P",{});var ke=w(r);c=ae(ke,i),ke.forEach(d),pe.forEach(d),v=N(I),B=h(I,"TD",{"data-label":!0,class:!0});var me=w(B);C=h(me,"P",{});var be=w(C);D=ae(be,p),be.forEach(d),me.forEach(d),H=N(I),T=h(I,"TD",{"data-label":!0,class:!0});var Te=w(T);P=h(Te,"P",{});var Ee=w(P);U=ae(Ee,q),Ee.forEach(d),Te.forEach(d),V=N(I),j=h(I,"TD",{"data-label":!0,class:!0});var Ce=w(j);Y&&Y.l(Ce),Ce.forEach(d),A=N(I),g=h(I,"TD",{"data-label":!0,class:!0});var De=w(g);Z&&Z.l(De),De.forEach(d),u=N(I),_=h(I,"TD",{"data-label":!0,class:!0});var ce=w(_);b=h(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),X(b)!=="svelte-vyqr5o"&&(b.textContent=M),E=N(ce),z=h(ce,"BUTTON",{class:!0,"data-svelte-h":!0}),X(z)!=="svelte-1mk1mrc"&&(z.textContent=m),ce.forEach(d),O=N(I),R=h(I,"TD",{class:!0});var je=w(R);K=h(je,"DIV",{class:!0});var Je=w(K);ee=h(Je,"BUTTON",{class:!0,"data-svelte-h":!0}),X(ee)!=="svelte-t6q1y7"&&(ee.textContent=se),Je.forEach(d),je.forEach(d),le=N(I),I.forEach(d),this.h()},h(){k(s,"class","reading svelte-glkr0t"),k(s,"data-label","Sentence"),k(t,"data-label","Translation"),k(t,"class","svelte-glkr0t"),k(B,"data-label","Notes"),k(B,"class","svelte-glkr0t"),k(T,"data-label","Hint"),k(T,"class","svelte-glkr0t"),k(j,"data-label","SRS Stage"),k(j,"class","srs-container svelte-glkr0t"),k(g,"data-label","SRS Stage"),k(g,"class","srs-container svelte-glkr0t"),k(b,"class","primary svelte-glkr0t"),k(z,"class","primary svelte-glkr0t"),k(_,"data-label","Actions"),k(_,"class","svelte-glkr0t"),k(ee,"class","red svelte-glkr0t"),k(K,"class","delete-button svelte-glkr0t"),k(R,"class","svelte-glkr0t"),k(e,"class","svelte-glkr0t")},m(F,I){J(F,e,I),o(e,s),ge(a,s,null),o(e,n),o(e,t),o(t,r),o(r,c),o(e,v),o(e,B),o(B,C),o(C,D),o(e,H),o(e,T),o(T,P),o(P,U),o(e,V),o(e,j),Y&&Y.m(j,null),o(e,A),o(e,g),Z&&Z.m(g,null),o(e,u),o(e,_),o(_,b),o(_,E),o(_,z),o(e,O),o(e,R),o(R,K),o(K,ee),o(e,le),x=!0,ie||(ue=[Q(b,"click",te),Q(z,"click",L),Q(ee,"click",G)],ie=!0)},p(F,I){l=F;const W={};I&1&&(W.readings=l[9].reading),I&1&&(W.furigana=l[9].furigana),I&1&&(W.colors=l[9].reading.map(et)),a.$set(W),(!x||I&1)&&i!==(i=l[9].translation+"")&&re(c,i),(!x||I&1)&&p!==(p=l[9].note+"")&&re(D,p),(!x||I&1)&&q!==(q=l[9].hint+"")&&re(U,q),l[9].srs?Y?(Y.p(l,I),I&1&&y(Y,1)):(Y=Qe(l),Y.c(),y(Y,1),Y.m(j,null)):Y&&(de(),$(Y,1,1,()=>{Y=null}),fe()),l[9].srs?Z?Z.p(l,I):(Z=$e(l),Z.c(),Z.m(g,null)):Z&&(Z.d(1),Z=null)},i(F){x||(y(a.$$.fragment,F),y(Y),x=!0)},o(F){$(a.$$.fragment,F),$(Y),x=!1},d(F){F&&d(e),ve(a),Y&&Y.d(),Z&&Z.d(),ie=!1,Oe(ue)}}}function kt(l){let e,s,a,n=!l[0]&&Xe(),t=l[0]&&Ze(l);return{c(){e=f("div"),n&&n.c(),s=S(),t&&t.c(),this.h()},l(r){e=h(r,"DIV",{class:!0});var i=w(e);n&&n.l(i),s=N(i),t&&t.l(i),i.forEach(d),this.h()},h(){k(e,"class","container")},m(r,i){J(r,e,i),n&&n.m(e,null),o(e,s),t&&t.m(e,null),a=!0},p(r,[i]){r[0]?n&&(n.d(1),n=null):n||(n=Xe(),n.c(),n.m(e,s)),r[0]?t?(t.p(r,i),i&1&&y(t,1)):(t=Ze(r),t.c(),y(t,1),t.m(e,null)):t&&(de(),$(t,1,1,()=>{t=null}),fe())},i(r){a||(y(t),a=!0)},o(r){$(t),a=!1},d(r){r&&d(e),n&&n.d(),t&&t.d()}}}const et=l=>"black";function mt(l,e,s){const a=Ae();let{deck:n}=e;const t=p=>{s(0,n.sentences=n.sentences.filter(D=>D.id!==p.id),n),i(n)},r=()=>{s(0,n.sentences=[...n.sentences,{id:Math.random().toString(36).substring(7),raw:"",reading:[],furigana:[],translation:"",note:"",hint:"",srs:{stage:ze.Apprentice1,lastReviewed:new Date,nextReview:new Date,streak:0,maxStreak:0}}],n),i(n)},i=p=>{const D=localStorage.getItem("decks"),H=D?JSON.parse(D):[],T=H.findIndex(P=>P.id===p.id);H[T]=p,localStorage.setItem("decks",JSON.stringify(H)),p=p};Le(()=>{const p=localStorage.getItem("decks"),D=p?JSON.parse(p):[];s(0,n=D.find(H=>H.id===n.id))});const c=()=>{a("back")},v=p=>{a("edit",{deck:n,sentence:p})},B=(p,D,H)=>{s(0,D[H].srs={stage:ze.Apprentice1,lastReviewed:new Date,nextReview:new Date,streak:0,maxStreak:0},n),i(n)},C=p=>{t(p)};return l.$$set=p=>{"deck"in p&&s(0,n=p.deck)},[n,a,t,r,i,c,v,B,C]}class bt extends Ie{constructor(e){super(),Be(this,e,mt,kt,Ne,{deck:0})}}function Ve(l){const e=/([\u3400-\u9FAF]+)[(（](.+?)[)）]|([^\u3400-\u9FAF]+)/g;let s=[],a=[],n;for(;(n=e.exec(l))!==null;)n[1]&&n[2]?(s.push(n[1]),a.push(n[2])):n[3]&&(s.push(n[3]),a.push(""));const t=s.map((c,v)=>ft(c)?c.split("").map(C=>({reading:C,furigana:""})):[{reading:c,furigana:a[v]}]),r=t.flat().map(c=>c.reading),i=t.flat().map(c=>c.furigana);return{reading:r,furigana:i}}const Tt="東京(とうきょう)は日本(にほん)の首都(しゅと)です。",Et="私（わたし）は日本語（にほんご）を話（はな）します";console.log(Ve(Tt));console.log(Ve(Et));function Ct(l){let e;return{c(){e=f("input"),this.h()},l(s){e=h(s,"INPUT",{class:!0}),this.h()},h(){e.value=l[0],k(e,"class","svelte-1g50vj2")},m(s,a){J(s,e,a),l[2](e)},p(s,[a]){a&1&&e.value!==s[0]&&(e.value=s[0])},i:we,o:we,d(s){s&&d(e),l[2](null)}}}function Dt(l,e,s){const a=Ae();let{value:n}=e,t;Le(()=>{Ke(t),t.addEventListener("input",i=>{s(0,n=i.target.value)}),s(1,t.value=n,t)});function r(i){He[i?"unshift":"push"](()=>{t=i,s(1,t)})}return l.$$set=i=>{"value"in i&&s(0,n=i.value)},l.$$.update=()=>{l.$$.dirty&2&&t&&(t&&Ke(t),t.addEventListener("input",i=>{s(0,n=i.target.value)})),l.$$.dirty&1&&n&&a("input",n)},[n,t,r]}class wt extends Ie{constructor(e){super(),Be(this,e,Dt,Ct,Ne,{value:0})}}function St(l,e,s){const a=l.slice();return a[20]=e[s],a}function tt(l){let e,s,a="Back",n,t,r,i='<col class="raw"/> <col class="translation"/> <col class="note"/> <col class="hint"/> <col class="srs"/> <col class="actions"/>',c,v,B='<tr class="svelte-18sdui6"><th class="svelte-18sdui6">Sentence</th> <th class="svelte-18sdui6">Translation</th> <th class="svelte-18sdui6">Notes</th> <th class="svelte-18sdui6">Hint</th> <th class="svelte-18sdui6">SRS Stage</th> <th class="svelte-18sdui6">Actions</th></tr>',C,p,D,H,T,P,q,U,V,j,A,g,u,_,b,M,E,z,m,O,R="Save",K,ee,se,le,x,ie,ue,Y;T=new wt({props:{value:l[1].raw}}),T.$on("input",l[10]);let Z=Se(ot),te=[];for(let L=0;L<Z.length;L+=1)te[L]=Nt(St(l,Z,L));return x=new ct({props:{readings:l[1].reading,furigana:l[1].furigana,colors:l[1].reading.map(st)}}),{c(){e=f("div"),s=f("button"),s.textContent=a,n=S(),t=f("table"),r=f("colgroup"),r.innerHTML=i,c=S(),v=f("thead"),v.innerHTML=B,C=S(),p=f("tbody"),D=f("tr"),H=f("td"),he(T.$$.fragment),P=S(),q=f("td"),U=f("input"),V=S(),j=f("td"),A=f("input"),g=S(),u=f("td"),_=f("input"),b=S(),M=f("td"),E=f("select");for(let L=0;L<te.length;L+=1)te[L].c();z=S(),m=f("td"),O=f("button"),O.textContent=R,K=S(),ee=f("br"),se=S(),le=f("div"),he(x.$$.fragment),this.h()},l(L){e=h(L,"DIV",{class:!0});var G=w(e);s=h(G,"BUTTON",{class:!0,"data-svelte-h":!0}),X(s)!=="svelte-bqzm0i"&&(s.textContent=a),n=N(G),t=h(G,"TABLE",{class:!0});var F=w(t);r=h(F,"COLGROUP",{"data-svelte-h":!0}),X(r)!=="svelte-v9u6mj"&&(r.innerHTML=i),c=N(F),v=h(F,"THEAD",{class:!0,"data-svelte-h":!0}),X(v)!=="svelte-ofx5r0"&&(v.innerHTML=B),C=N(F),p=h(F,"TBODY",{});var I=w(p);D=h(I,"TR",{class:!0});var W=w(D);H=h(W,"TD",{class:!0});var pe=w(H);_e(T.$$.fragment,pe),pe.forEach(d),P=N(W),q=h(W,"TD",{class:!0});var ke=w(q);U=h(ke,"INPUT",{class:!0}),ke.forEach(d),V=N(W),j=h(W,"TD",{class:!0});var me=w(j);A=h(me,"INPUT",{class:!0}),me.forEach(d),g=N(W),u=h(W,"TD",{class:!0});var be=w(u);_=h(be,"INPUT",{class:!0}),be.forEach(d),b=N(W),M=h(W,"TD",{class:!0});var Te=w(M);E=h(Te,"SELECT",{class:!0});var Ee=w(E);for(let ce=0;ce<te.length;ce+=1)te[ce].l(Ee);Ee.forEach(d),Te.forEach(d),z=N(W),m=h(W,"TD",{class:!0});var Ce=w(m);O=h(Ce,"BUTTON",{class:!0,"data-svelte-h":!0}),X(O)!=="svelte-lpw8fa"&&(O.textContent=R),Ce.forEach(d),W.forEach(d),I.forEach(d),F.forEach(d),K=N(G),ee=h(G,"BR",{}),se=N(G),le=h(G,"DIV",{class:!0});var De=w(le);_e(x.$$.fragment,De),De.forEach(d),G.forEach(d),this.h()},h(){k(s,"class","primary svelte-18sdui6"),k(v,"class","svelte-18sdui6"),k(H,"class","svelte-18sdui6"),k(U,"class","svelte-18sdui6"),k(q,"class","svelte-18sdui6"),k(A,"class","svelte-18sdui6"),k(j,"class","svelte-18sdui6"),k(_,"class","svelte-18sdui6"),k(u,"class","svelte-18sdui6"),k(E,"class","svelte-18sdui6"),l[1].srs.stage===void 0&&ut(()=>l[17].call(E)),k(M,"class","svelte-18sdui6"),k(O,"class","primary svelte-18sdui6"),k(m,"class","svelte-18sdui6"),k(D,"class","svelte-18sdui6"),k(t,"class","deck-table svelte-18sdui6"),k(le,"class","sentence-container"),k(e,"class","sentence-container")},m(L,G){J(L,e,G),o(e,s),o(e,n),o(e,t),o(t,r),o(t,c),o(t,v),o(t,C),o(t,p),o(p,D),o(D,H),ge(T,H,null),o(D,P),o(D,q),o(q,U),oe(U,l[1].translation),o(D,V),o(D,j),o(j,A),oe(A,l[1].note),o(D,g),o(D,u),o(u,_),oe(_,l[1].hint),o(D,b),o(D,M),o(M,E);for(let F=0;F<te.length;F+=1)te[F]&&te[F].m(E,null);ye(E,l[1].srs.stage,!0),o(D,z),o(D,m),o(m,O),o(e,K),o(e,ee),o(e,se),o(e,le),ge(x,le,null),ie=!0,ue||(Y=[Q(s,"click",l[9]),Q(U,"input",l[11]),Q(U,"input",l[12]),Q(A,"input",l[13]),Q(A,"input",l[14]),Q(_,"input",l[15]),Q(_,"input",l[16]),Q(E,"change",l[17]),Q(E,"change",l[18]),Q(O,"click",l[19])],ue=!0)},p(L,G){const F={};G&2&&(F.value=L[1].raw),T.$set(F),G&2&&U.value!==L[1].translation&&oe(U,L[1].translation),G&2&&A.value!==L[1].note&&oe(A,L[1].note),G&2&&_.value!==L[1].hint&&oe(_,L[1].hint),G&2&&ye(E,L[1].srs.stage);const I={};G&2&&(I.readings=L[1].reading),G&2&&(I.furigana=L[1].furigana),G&2&&(I.colors=L[1].reading.map(st)),x.$set(I)},i(L){ie||(y(T.$$.fragment,L),y(x.$$.fragment,L),ie=!0)},o(L){$(T.$$.fragment,L),$(x.$$.fragment,L),ie=!1},d(L){L&&d(e),ve(T),Me(te,L),ve(x),ue=!1,Oe(Y)}}}function Nt(l){let e,s=Re(l[20])+"",a,n;return{c(){e=f("option"),a=ne(s),n=S(),this.h()},l(t){e=h(t,"OPTION",{});var r=w(e);a=ae(r,s),n=N(r),r.forEach(d),this.h()},h(){e.__value=l[20],oe(e,e.__value)},m(t,r){J(t,e,r),o(e,a),o(e,n)},p:we,d(t){t&&d(e)}}}function Ot(l){let e,s="Edit",a,n,t,r=l[0]&&l[1]&&tt(l);return{c(){e=f("h1"),e.textContent=s,a=S(),r&&r.c(),n=Fe()},l(i){e=h(i,"H1",{"data-svelte-h":!0}),X(e)!=="svelte-1ct83go"&&(e.textContent=s),a=N(i),r&&r.l(i),n=Fe()},m(i,c){J(i,e,c),J(i,a,c),r&&r.m(i,c),J(i,n,c),t=!0},p(i,[c]){i[0]&&i[1]?r?(r.p(i,c),c&3&&y(r,1)):(r=tt(i),r.c(),y(r,1),r.m(n.parentNode,n)):r&&(de(),$(r,1,1,()=>{r=null}),fe())},i(i){t||(y(r),t=!0)},o(i){$(r),t=!1},d(i){i&&(d(e),d(a),d(n)),r&&r.d(i)}}}const st=l=>"black";function It(l,e,s){const a=Ae();let{deck:n}=e,{sentence:t}=e;const r=u=>{s(1,t.raw=u,t);const _=Ve(u);s(1,t.reading=_.reading,t),s(1,t.furigana=_.furigana,t)},i=u=>{s(1,t.translation=u,t)},c=u=>{s(1,t.note=u,t)},v=u=>{s(1,t.hint=u,t),C(t)},B=u=>{t.srs&&s(1,t.srs.stage=ot[u],t)},C=u=>{r(ht(u.raw));const _=localStorage.getItem("decks"),b=_?JSON.parse(_):[],M=b.findIndex(z=>z.id===n.id),E=b[M].sentences.findIndex(z=>z.id===u.id);b[M].sentences[E]=u,localStorage.setItem("decks",JSON.stringify(b)),a("edit",{deck:n,sentence:u})};Le(()=>{const u=localStorage.getItem("decks"),_=u?JSON.parse(u):[];s(0,n=_.find(b=>b.id===n.id)),s(1,t=n.sentences.find(b=>b.id===t.id))});const p=()=>{a("back")},D=u=>r(u.detail);function H(){t.translation=this.value,s(1,t)}const T=u=>i(u.target.value);function P(){t.note=this.value,s(1,t)}const q=u=>c(u.target.value);function U(){t.hint=this.value,s(1,t)}const V=u=>v(u.target.value);function j(){t.srs.stage=dt(this),s(1,t)}const A=u=>B(u.target.value),g=()=>C(t);return l.$$set=u=>{"deck"in u&&s(0,n=u.deck),"sentence"in u&&s(1,t=u.sentence)},[n,t,a,r,i,c,v,B,C,p,D,H,T,P,q,U,V,j,A,g]}class Bt extends Ie{constructor(e){super(),Be(this,e,It,Ot,Ne,{deck:0,sentence:1})}}function lt(l,e,s){const a=l.slice();return a[19]=e[s],a[21]=s,a}function nt(l){let e,s="Decks",a,n,t,r="Back",i,c,v="Add deck",B,C,p,D='<col class="name"/> <col class="description"/> <col class="actions"/>',H,T,P='<tr class="svelte-18sdui6"><th class="svelte-18sdui6">Name</th> <th class="svelte-18sdui6">Description</th> <th class="svelte-18sdui6">Edit</th> <th class="svelte-18sdui6"></th></tr>',q,U,V,j,A=Se(l[0]),g=[];for(let u=0;u<A.length;u+=1)g[u]=at(lt(l,A,u));return{c(){e=f("h1"),e.textContent=s,a=S(),n=f("div"),t=f("button"),t.textContent=r,i=S(),c=f("button"),c.textContent=v,B=S(),C=f("table"),p=f("colgroup"),p.innerHTML=D,H=S(),T=f("thead"),T.innerHTML=P,q=S(),U=f("tbody");for(let u=0;u<g.length;u+=1)g[u].c();this.h()},l(u){e=h(u,"H1",{"data-svelte-h":!0}),X(e)!=="svelte-1txjx0s"&&(e.textContent=s),a=N(u),n=h(u,"DIV",{});var _=w(n);t=h(_,"BUTTON",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-19ix80j"&&(t.textContent=r),i=N(_),c=h(_,"BUTTON",{class:!0,"data-svelte-h":!0}),X(c)!=="svelte-1mugmu2"&&(c.textContent=v),_.forEach(d),B=N(u),C=h(u,"TABLE",{class:!0});var b=w(C);p=h(b,"COLGROUP",{"data-svelte-h":!0}),X(p)!=="svelte-1ro31q8"&&(p.innerHTML=D),H=N(b),T=h(b,"THEAD",{class:!0,"data-svelte-h":!0}),X(T)!=="svelte-118omzq"&&(T.innerHTML=P),q=N(b),U=h(b,"TBODY",{});var M=w(U);for(let E=0;E<g.length;E+=1)g[E].l(M);M.forEach(d),b.forEach(d),this.h()},h(){k(t,"class","primary svelte-18sdui6"),k(c,"class","primary svelte-18sdui6"),k(T,"class","svelte-18sdui6"),k(C,"class","deck-table svelte-18sdui6")},m(u,_){J(u,e,_),J(u,a,_),J(u,n,_),o(n,t),o(n,i),o(n,c),J(u,B,_),J(u,C,_),o(C,p),o(C,H),o(C,T),o(C,q),o(C,U);for(let b=0;b<g.length;b+=1)g[b]&&g[b].m(U,null);V||(j=[Q(t,"click",l[8]),Q(c,"click",l[9])],V=!0)},p(u,_){if(_&155){A=Se(u[0]);let b;for(b=0;b<A.length;b+=1){const M=lt(u,A,b);g[b]?g[b].p(M,_):(g[b]=at(M),g[b].c(),g[b].m(U,null))}for(;b<g.length;b+=1)g[b].d(1);g.length=A.length}},d(u){u&&(d(e),d(a),d(n),d(B),d(C)),Me(g,u),V=!1,Oe(j)}}}function at(l){let e,s,a=l[19].name+"",n,t,r,i,c=l[19].description+"",v,B,C,p,D="Edit",H,T,P,q="Delete",U,V,j;function A(){return l[10](l[19])}function g(){return l[11](l[19])}return{c(){e=f("tr"),s=f("td"),n=ne(a),t=S(),r=f("td"),i=f("p"),v=ne(c),B=S(),C=f("td"),p=f("button"),p.textContent=D,H=S(),T=f("td"),P=f("button"),P.textContent=q,U=S(),this.h()},l(u){e=h(u,"TR",{class:!0});var _=w(e);s=h(_,"TD",{class:!0,"data-label":!0});var b=w(s);n=ae(b,a),b.forEach(d),t=N(_),r=h(_,"TD",{"data-label":!0,class:!0});var M=w(r);i=h(M,"P",{});var E=w(i);v=ae(E,c),E.forEach(d),M.forEach(d),B=N(_),C=h(_,"TD",{"data-label":!0,class:!0});var z=w(C);p=h(z,"BUTTON",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-jp0087"&&(p.textContent=D),z.forEach(d),H=N(_),T=h(_,"TD",{class:!0});var m=w(T);P=h(m,"BUTTON",{class:!0,"data-svelte-h":!0}),X(P)!=="svelte-ix0m2f"&&(P.textContent=q),m.forEach(d),U=N(_),_.forEach(d),this.h()},h(){k(s,"class","name svelte-18sdui6"),k(s,"data-label","Name"),k(r,"data-label","Description"),k(r,"class","svelte-18sdui6"),k(p,"class","primary svelte-18sdui6"),k(C,"data-label","Actions"),k(C,"class","svelte-18sdui6"),k(P,"class","red svelte-18sdui6"),k(T,"class","svelte-18sdui6"),k(e,"class","svelte-18sdui6")},m(u,_){J(u,e,_),o(e,s),o(s,n),o(e,t),o(e,r),o(r,i),o(i,v),o(e,B),o(e,C),o(C,p),o(e,H),o(e,T),o(T,P),o(e,U),V||(j=[Q(p,"click",A),Q(P,"click",g)],V=!0)},p(u,_){l=u,_&1&&a!==(a=l[19].name+"")&&re(n,a),_&1&&c!==(c=l[19].description+"")&&re(v,c)},d(u){u&&d(e),V=!1,Oe(j)}}}function rt(l){let e,s,a;function n(r){l[12](r)}let t={};return l[1]!==void 0&&(t.deck=l[1]),e=new bt({props:t}),He.push(()=>Ue(e,"deck",n)),e.$on("edit",l[13]),e.$on("back",l[14]),{c(){he(e.$$.fragment)},l(r){_e(e.$$.fragment,r)},m(r,i){ge(e,r,i),a=!0},p(r,i){const c={};!s&&i&2&&(s=!0,c.deck=r[1],Pe(()=>s=!1)),e.$set(c)},i(r){a||(y(e.$$.fragment,r),a=!0)},o(r){$(e.$$.fragment,r),a=!1},d(r){ve(e,r)}}}function it(l){let e,s,a,n;function t(c){l[15](c)}function r(c){l[16](c)}let i={};return l[1]!==void 0&&(i.deck=l[1]),l[2]!==void 0&&(i.sentence=l[2]),e=new Bt({props:i}),He.push(()=>Ue(e,"deck",t)),He.push(()=>Ue(e,"sentence",r)),e.$on("edit",l[17]),e.$on("back",l[18]),{c(){he(e.$$.fragment)},l(c){_e(e.$$.fragment,c)},m(c,v){ge(e,c,v),n=!0},p(c,v){const B={};!s&&v&2&&(s=!0,B.deck=c[1],Pe(()=>s=!1)),!a&&v&4&&(a=!0,B.sentence=c[2],Pe(()=>a=!1)),e.$set(B)},i(c){n||(y(e.$$.fragment,c),n=!0)},o(c){$(e.$$.fragment,c),n=!1},d(c){ve(e,c)}}}function Ht(l){let e,s,a,n,t=l[3]&&nt(l),r=l[4]&&l[1]&&rt(l),i=l[5]&&l[1]&&l[2]&&it(l);return{c(){e=f("div"),t&&t.c(),s=S(),r&&r.c(),a=S(),i&&i.c(),this.h()},l(c){e=h(c,"DIV",{class:!0});var v=w(e);t&&t.l(v),s=N(v),r&&r.l(v),a=N(v),i&&i.l(v),v.forEach(d),this.h()},h(){k(e,"class","container")},m(c,v){J(c,e,v),t&&t.m(e,null),o(e,s),r&&r.m(e,null),o(e,a),i&&i.m(e,null),n=!0},p(c,[v]){c[3]?t?t.p(c,v):(t=nt(c),t.c(),t.m(e,s)):t&&(t.d(1),t=null),c[4]&&c[1]?r?(r.p(c,v),v&18&&y(r,1)):(r=rt(c),r.c(),y(r,1),r.m(e,a)):r&&(de(),$(r,1,1,()=>{r=null}),fe()),c[5]&&c[1]&&c[2]?i?(i.p(c,v),v&38&&y(i,1)):(i=it(c),i.c(),y(i,1),i.m(e,null)):i&&(de(),$(i,1,1,()=>{i=null}),fe())},i(c){n||(y(r),y(i),n=!0)},o(c){$(r),$(i),n=!1},d(c){c&&d(e),t&&t.d(),r&&r.d(),i&&i.d()}}}function Lt(l,e,s){let a=[],n=null,t=null,r=!0,i=!1,c=!1;const v=()=>{const g=prompt("Enter the name of the deck"),u=prompt("Enter the description of the deck"),_=Math.random().toString(36).substring(7);a.push({id:_,name:g,description:u,sentences:[]}),localStorage.setItem("decks",JSON.stringify(a)),s(0,a)},B=g=>{s(0,a=a.filter(u=>u.id!==g.id)),localStorage.setItem("decks",JSON.stringify(a))};Le(()=>{const g=localStorage.getItem("decks");s(0,a=g?JSON.parse(g):[])});const C=()=>window.location.href=`${_t}/`,p=()=>v(),D=g=>{s(1,n=g),s(3,r=!1),s(4,i=!0)},H=g=>{B(g)};function T(g){n=g,s(1,n)}const P=g=>{s(2,t=g.detail.sentence),s(5,c=!0),s(4,i=!1),s(3,r=!1)},q=()=>{s(3,r=!0),s(4,i=!1),s(1,n=null),s(2,t=null)};function U(g){n=g,s(1,n)}function V(g){t=g,s(2,t)}return[a,n,t,r,i,c,v,B,C,p,D,H,T,P,q,U,V,g=>{s(4,i=!0),s(5,c=!1),s(3,r=!1),s(2,t=null)},()=>{s(4,i=!0),s(5,c=!1),s(3,r=!1),s(2,t=null)}]}class Mt extends Ie{constructor(e){super(),Be(this,e,Lt,Ht,Ne,{})}}export{Mt as component};
