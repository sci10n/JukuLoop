function Le(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function O(e){return e===null?"null":e!==Object(e)?typeof e:{}.toString.call(e).slice(8,-1).toLowerCase()}function h(e){return O(e)!=="string"?!0:!e.length}function j(e="",t,s){if(h(e))return!1;const n=e.charCodeAt(0);return t<=n&&n<=s}const N={HIRAGANA:"toHiragana",KATAKANA:"toKatakana"},w={HEPBURN:"hepburn"},J={useObsoleteKana:!1,passRomaji:!1,convertLongVowelMark:!0,upcaseKatakana:!1,IMEMode:!1,romanization:w.HEPBURN},B=65,$=90,I=12353,Y=12438,R=12449,q=12540,G=12540,V=12539;var p=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function W(e,t){return!!(e===t||p(e)&&p(t))}function X(e,t){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!W(e[s],t[s]))return!1;return!0}function C(e,t){t===void 0&&(t=X);var s=null;function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(s&&s.lastThis===this&&t(r,s.lastArgs))return s.lastResult;var u=e.apply(this,r);return s={lastResult:u,lastArgs:r,lastThis:this},u}return n.clear=function(){s=null},n}var T=Object.prototype.hasOwnProperty;function b(e,t,s){for(s of e.keys())if(A(s,t))return s}function A(e,t){var s,n,r;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((n=e.length)===t.length)for(;n--&&A(e[n],t[n]););return n===-1}if(s===Set){if(e.size!==t.size)return!1;for(n of e)if(r=n,r&&typeof r=="object"&&(r=b(t,r),!r)||!t.has(r))return!1;return!0}if(s===Map){if(e.size!==t.size)return!1;for(n of e)if(r=n[0],r&&typeof r=="object"&&(r=b(t,r),!r)||!A(n[1],t.get(r)))return!1;return!0}if(s===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(s===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!s||typeof e=="object"){n=0;for(s in e)if(T.call(e,s)&&++n&&!T.call(t,s)||!(s in t)||!A(e[s],t[s]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}const F=(e={})=>Object.assign({},J,e);function Z(e,t,s){const n=t;function r(c,a){if(c[a]!==void 0)return Object.assign({"":c[""]+a},c[a])}function i(c,a){const o=c.charAt(0);return u(Object.assign({"":o},n[o]),c.slice(1),a,a+1)}function u(c,a,o,f){if(!a)return s||Object.keys(c).length===1?c[""]?[[o,f,c[""]]]:[]:[[o,f,null]];if(Object.keys(c).length===1)return[[o,f,c[""]]].concat(i(a,f));const l=r(c,a.charAt(0));return l===void 0?[[o,f,c[""]]].concat(i(a,f)):u(l,a.slice(1),o,f+1)}return i(e,0)}function S(e){return Object.entries(e).reduce((t,[s,n])=>{const r=O(n)==="string";return t[s]=r?{"":n}:S(n),t},{})}function z(e,t){return t.split("").reduce((s,n)=>(s[n]===void 0&&(s[n]={}),s[n]),e)}function _(e={}){const t={};return O(e)==="object"&&Object.entries(e).forEach(([s,n])=>{let r=t;s.split("").forEach(i=>{r[i]===void 0&&(r[i]={}),r=r[i]}),r[""]=n}),function(n){const r=JSON.parse(JSON.stringify(n));function i(u,c){return u===void 0||O(u)==="string"?c:Object.entries(c).reduce((a,[o,f])=>(a[o]=i(u[o],f),a),u)}return i(r,t)}}function U(e,t){return t?O(t)==="function"?t(e):_(t)(e):e}const Q={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},ee={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},L={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},m={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},x={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},K={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},te=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},x,m),ne={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},re={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function se(){const e=S(Q),t=r=>z(e,r);Object.entries(L).forEach(([r,i])=>{Object.entries(m).forEach(([u,c])=>{t(r+u)[""]=i+c})}),Object.entries(ee).forEach(([r,i])=>{t(r)[""]=i}),Object.entries(re).forEach(([r,i])=>{Object.entries(x).forEach(([u,c])=>{const a=t(r+u);a[""]=i+c})}),["n","n'","xn"].forEach(r=>{t(r)[""]="ん"}),e.c=JSON.parse(JSON.stringify(e.k)),Object.entries(K).forEach(([r,i])=>{const u=r.slice(0,r.length-1),c=r.charAt(r.length-1),a=t(u);a[c]=JSON.parse(JSON.stringify(t(i)))});function s(r){return[...Object.entries(K),["c","k"]].reduce((i,[u,c])=>r.startsWith(c)?i.concat(r.replace(c,u)):i,[])}Object.entries(te).forEach(([r,i])=>{const u=l=>l.charAt(l.length-1),c=l=>l.slice(0,l.length-1),a=`x${r}`,o=t(a);o[""]=i;const f=t(`l${c(r)}`);f[u(r)]=o,s(r).forEach(l=>{["l","x"].forEach(d=>{const D=t(d+c(l));D[u(l)]=t(d+r)})})}),Object.entries(ne).forEach(([r,i])=>{t(r)[""]=i});function n(r){return Object.entries(r).reduce((i,[u,c])=>(u?i[u]=n(c):i[u]=`っ${c}`,i),{})}return[...Object.keys(L),"c","y","w","j"].forEach(r=>{const i=e[r];i[r]=n(i)}),delete e.n.n,Object.freeze(JSON.parse(JSON.stringify(e)))}let E=null;function ie(){return E==null&&(E=se()),E}const ce=_({wi:"ゐ",we:"ゑ"});function ue(e){const t=JSON.parse(JSON.stringify(e));return t.n.n={"":"ん"},t.n[" "]={"":"ん"},t}function ae(e=""){return h(e)?!1:j(e,B,$)}function P(e=""){return h(e)?!1:e.charCodeAt(0)===G}function oe(e=""){return h(e)?!1:e.charCodeAt(0)===V}function H(e=""){return h(e)?!1:P(e)?!0:j(e,I,Y)}function fe(e=""){const t=[];return e.split("").forEach(s=>{if(P(s)||oe(s))t.push(s);else if(H(s)){const n=s.charCodeAt(0)+(R-I),r=String.fromCharCode(n);t.push(r)}else t.push(s)}),t.join("")}const k=C((e,t,s)=>{let n=ie();return n=e?ue(n):n,n=t?ce(n):n,s&&(n=U(n,s)),n},A);function Ke(e="",t={},s){let n;return s?n=t:(n=F(t),s=k(n.IMEMode,n.useObsoleteKana,n.customKanaMapping)),le(e,n,s).map(r=>{const[i,u,c]=r;if(c===null)return e.slice(i);const a=n.IMEMode===N.HIRAGANA,o=n.IMEMode===N.KATAKANA||[...e.slice(i,u)].every(ae);return a||!o?c:fe(c)}).join("")}function le(e="",t={},s){const{IMEMode:n,useObsoleteKana:r,customKanaMapping:i}=t;return s||(s=k(n,r,i)),Z(e.toLowerCase(),s,!n)}function he(e=""){return j(e,R,q)}function Ae(e=""){return h(e)?!1:H(e)||he(e)}function Me(e=""){return h(e)?!1:[...e].every(Ae)}let g=null;const Oe={あ:"a",い:"i",う:"u",え:"e",お:"o",か:"ka",き:"ki",く:"ku",け:"ke",こ:"ko",さ:"sa",し:"shi",す:"su",せ:"se",そ:"so",た:"ta",ち:"chi",つ:"tsu",て:"te",と:"to",な:"na",に:"ni",ぬ:"nu",ね:"ne",の:"no",は:"ha",ひ:"hi",ふ:"fu",へ:"he",ほ:"ho",ま:"ma",み:"mi",む:"mu",め:"me",も:"mo",ら:"ra",り:"ri",る:"ru",れ:"re",ろ:"ro",や:"ya",ゆ:"yu",よ:"yo",わ:"wa",ゐ:"wi",ゑ:"we",を:"wo",ん:"n",が:"ga",ぎ:"gi",ぐ:"gu",げ:"ge",ご:"go",ざ:"za",じ:"ji",ず:"zu",ぜ:"ze",ぞ:"zo",だ:"da",ぢ:"ji",づ:"zu",で:"de",ど:"do",ば:"ba",び:"bi",ぶ:"bu",べ:"be",ぼ:"bo",ぱ:"pa",ぴ:"pi",ぷ:"pu",ぺ:"pe",ぽ:"po",ゔぁ:"va",ゔぃ:"vi",ゔ:"vu",ゔぇ:"ve",ゔぉ:"vo"},Ee={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~",ー:"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},ge=["あ","い","う","え","お","や","ゆ","よ"],y={ゃ:"ya",ゅ:"yu",ょ:"yo"},ye={ぃ:"yi",ぇ:"ye"},je={ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},Se=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],de={し:"sh",ち:"ch",じ:"j",ぢ:"j"},Ne={っ:"",ゃ:"ya",ゅ:"yu",ょ:"yo",ぁ:"a",ぃ:"i",ぅ:"u",ぇ:"e",ぉ:"o"},M={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function pe(){return g==null&&(g=be()),g}function Te(e){switch(e){case w.HEPBURN:return pe();default:return{}}}function be(){const e=S(Oe),t=n=>z(e,n),s=(n,r)=>{t(n)[""]=r};return Object.entries(Ee).forEach(([n,r])=>{t(n)[""]=r}),[...Object.entries(y),...Object.entries(je)].forEach(([n,r])=>{s(n,r)}),Se.forEach(n=>{const r=t(n)[""][0];Object.entries(y).forEach(([i,u])=>{s(n+i,r+u)}),Object.entries(ye).forEach(([i,u])=>{s(n+i,r+u)})}),Object.entries(de).forEach(([n,r])=>{Object.entries(y).forEach(([i,u])=>{s(n+i,r+u[1])}),s(`${n}ぃ`,`${r}yi`),s(`${n}ぇ`,`${r}e`)}),e.っ=v(e),Object.entries(Ne).forEach(([n,r])=>{s(n,r)}),ge.forEach(n=>{s(`ん${n}`,`n'${t(n)[""]}`)}),Object.freeze(JSON.parse(JSON.stringify(e)))}function v(e){return Object.entries(e).reduce((t,[s,n])=>{if(s)t[s]=v(n);else{const r=n.charAt(0);t[s]=Object.keys(M).includes(r)?M[r]+n:n}return t},{})}C((e,t)=>{let s=Te(e);return t&&(s=U(s,t)),s},A);export{Le as e,Me as i,Ke as t};
